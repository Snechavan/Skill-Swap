/*! For license information please see main.4ce3aae6.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,x(a)?(s="",null!=e&&(s=e.replace(I,"$&/")+"/"),C(a,t,s,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=C(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return C(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(E),E=-1),p=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(x,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,N=null,E=-1,I=5,T=-1;function C(){return!(t.unstable_now()-T<I)}function j(){if(null!==N){var e=t.unstable_now();T=e;var n=!0;try{n=N(!0,e)}finally{n?k():(S=!1,N=null)}}else S=!1}if("function"===typeof w)k=function(){w(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=j,k=function(){R.postMessage(null)}}else k=function(){y(j,0)};function D(e){N=e,S||(S=!0,k())}function P(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,P(x,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},330:(e,t,n)=>{var r=n(43);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),s=r[0].inst,u=r[1];return o(function(){s.value=n,s.getSnapshot=t,c(s)&&u({inst:s})},[e,n,t]),a(function(){return c(s)&&u({inst:s}),e(function(){c(s)&&u({inst:s})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},443:(e,t,n)=>{e.exports=n(717)},461:(e,t,n)=>{e.exports=n(330)},579:(e,t,n)=>{e.exports=n(153)},717:(e,t,n)=>{var r=n(43),s=n(461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=s.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var n=r(e);return void 0!==s&&s(t,n)?(a=e,t):(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,s]);var f=a(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(Ue){var t=Ue.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Pe){var r=Pe}Reflect.construct(e,[],t)}else{try{t.call()}catch(Pe){r=Pe}e.call(t.prototype)}else{try{throw Error()}catch(Pe){r=Pe}e()}}catch(Pe){if(Pe&&r&&"string"===typeof Pe.stack){for(var s=Pe.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case N:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(Ue){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ie(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,ke=null;function Se(e){if(e=Ts(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=js(t),xe(e.stateNode,e.type,t))}}function Ne(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Ee(){if(_e){var e=_e,t=ke;if(ke=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Ce=!1;function je(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Ie(e,t,n)}finally{Ce=!1,(null!==_e||null!==ke)&&(Te(),Ee())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=js(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(Oe){Le=!1}function Fe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ve=!1,ze=null,$e=!1,We=null,Ke={onError:function(e){Ve=!0,ze=e}};function Qe(e,t,n,r,s,i,a,o,l){Ve=!1,ze=null,Fe.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(i(188))}function Ze(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Xe(s),e;if(a===r)return Xe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?et(e):null}function et(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=et(e);if(null!==t)return t;e=e.sibling}return null}var tt=s.unstable_scheduleCallback,nt=s.unstable_cancelCallback,rt=s.unstable_shouldYield,st=s.unstable_requestPaint,it=s.unstable_now,at=s.unstable_getCurrentPriorityLevel,ot=s.unstable_ImmediatePriority,lt=s.unstable_UserBlockingPriority,ct=s.unstable_NormalPriority,dt=s.unstable_LowPriority,ht=s.unstable_IdlePriority,ft=null,pt=null;var mt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(gt(e)/yt|0)|0},gt=Math.log,yt=Math.LN2;var vt=64,wt=4194304;function bt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=bt(o):0!==(i&=a)&&(r=bt(i))}else 0!==(a=n&~s)?r=bt(a):0!==i&&(r=bt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-mt(t)),r|=e[n],t&=~s;return r}function _t(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function St(){var e=vt;return 0===(4194240&(vt<<=1))&&(vt=64),e}function Nt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Et(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-mt(t)]=n}function It(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Tt=0;function Ct(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,At,Rt,Dt,Pt,Ot=!1,Lt=[],Mt=null,Ut=null,Ft=null,Vt=new Map,zt=new Map,qt=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $t(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Ut=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Vt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function Ht(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Ts(t))&&At(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Wt(e){var t=Is(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void Pt(e.priority,function(){Rt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ts(n))&&At(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Gt(e,t,n){Kt(e)&&n.delete(t)}function Qt(){Ot=!1,null!==Mt&&Kt(Mt)&&(Mt=null),null!==Ut&&Kt(Ut)&&(Ut=null),null!==Ft&&Kt(Ft)&&(Ft=null),Vt.forEach(Gt),zt.forEach(Gt)}function Yt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Qt)))}function Jt(e){function t(t){return Yt(t,e)}if(0<Lt.length){Yt(Lt[0],e);for(var n=1;n<Lt.length;n++){var r=Lt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Yt(Mt,e),null!==Ut&&Yt(Ut,e),null!==Ft&&Yt(Ft,e),Vt.forEach(t),zt.forEach(t),n=0;n<qt.length;n++)(r=qt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<qt.length&&null===(n=qt[0]).blockedOn;)Wt(n),null===n.blockedOn&&qt.shift()}var Xt=b.ReactCurrentBatchConfig,Zt=!0;function en(e,t,n,r){var s=Tt,i=Xt.transition;Xt.transition=null;try{Tt=1,nn(e,t,n,r)}finally{Tt=s,Xt.transition=i}}function tn(e,t,n,r){var s=Tt,i=Xt.transition;Xt.transition=null;try{Tt=4,nn(e,t,n,r)}finally{Tt=s,Xt.transition=i}}function nn(e,t,n,r){if(Zt){var s=sn(e,t,n,r);if(null===s)Zr(e,t,r,rn,n),$t(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Mt=Ht(Mt,e,t,n,r,s),!0;case"dragenter":return Ut=Ht(Ut,e,t,n,r,s),!0;case"mouseover":return Ft=Ht(Ft,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vt.set(i,Ht(Vt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zt.set(i,Ht(zt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if($t(e,r),4&t&&-1<Bt.indexOf(e)){for(;null!==s;){var i=Ts(s);if(null!==i&&jt(i),null===(i=sn(e,t,n,r))&&Zr(e,t,r,rn,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var rn=null;function sn(e,t,n,r){if(rn=null,null!==(e=Is(e=be(r))))if(null===(t=Ye(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rn=e,null}function an(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(at()){case ot:return 1;case lt:return 4;case ct:case dt:return 16;case ht:return 536870912;default:return 16}default:return 16}}var on=null,ln=null,cn=null;function un(){if(cn)return cn;var e,t,n=ln,r=n.length,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return cn=s.slice(e,1<t?1-t:void 0)}function dn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function hn(){return!0}function fn(){return!1}function pn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?hn:fn,this.isPropagationStopped=fn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hn)},persist:function(){},isPersistent:hn}),t}var mn,gn,yn,vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wn=pn(vn),bn=M({},vn,{view:0,detail:0}),xn=pn(bn),_n=M({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&"mousemove"===e.type?(mn=e.screenX-yn.screenX,gn=e.screenY-yn.screenY):gn=mn=0,yn=e),mn)},movementY:function(e){return"movementY"in e?e.movementY:gn}}),kn=pn(_n),Sn=pn(M({},_n,{dataTransfer:0})),Nn=pn(M({},bn,{relatedTarget:0})),En=pn(M({},vn,{animationName:0,elapsedTime:0,pseudoElement:0})),In=M({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tn=pn(In),Cn=pn(M({},vn,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rn[e])&&!!t[e]}function Pn(){return Dn}var On=M({},bn,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?dn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=pn(On),Mn=pn(M({},_n,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Un=pn(M({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),Fn=pn(M({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=M({},_n,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zn=pn(Vn),qn=[9,13,27,32],Bn=u&&"CompositionEvent"in window,$n=null;u&&"documentMode"in document&&($n=document.documentMode);var Hn=u&&"TextEvent"in window&&!$n,Wn=u&&(!Bn||$n&&8<$n&&11>=$n),Kn=String.fromCharCode(32),Gn=!1;function Qn(e,t){switch(e){case"keyup":return-1!==qn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Jn=!1;var Xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Xn[e.type]:"textarea"===t}function er(e,t,n,r){Ne(r),0<(t=ts(t,"onChange")).length&&(n=new wn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tr=null,nr=null;function rr(e){Kr(e,0)}function sr(e){if(K(Cs(e)))return e}function ir(e,t){if("change"===e)return t}var ar=!1;if(u){var or;if(u){var lr="oninput"in document;if(!lr){var cr=document.createElement("div");cr.setAttribute("oninput","return;"),lr="function"===typeof cr.oninput}or=lr}else or=!1;ar=or&&(!document.documentMode||9<document.documentMode)}function ur(){tr&&(tr.detachEvent("onpropertychange",dr),nr=tr=null)}function dr(e){if("value"===e.propertyName&&sr(nr)){var t=[];er(t,nr,e,be(e)),je(rr,t)}}function hr(e,t,n){"focusin"===e?(ur(),nr=n,(tr=t).attachEvent("onpropertychange",dr)):"focusout"===e&&ur()}function fr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return sr(nr)}function pr(e,t){if("click"===e)return sr(t)}function mr(e,t){if("input"===e||"change"===e)return sr(t)}var gr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function yr(e,t){if(gr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!gr(e[s],t[s]))return!1}return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wr(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function br(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?br(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(qe){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function _r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function kr(e){var t=xr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&br(n.ownerDocument.documentElement,n)){if(null!==r&&_r(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=wr(n,i);var a=wr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sr=u&&"documentMode"in document&&11>=document.documentMode,Nr=null,Er=null,Ir=null,Tr=!1;function Cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Tr||null==Nr||Nr!==G(r)||("selectionStart"in(r=Nr)&&_r(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ir&&yr(Ir,r)||(Ir=r,0<(r=ts(Er,"onSelect")).length&&(t=new wn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function jr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ar={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionend:jr("Transition","TransitionEnd")},Rr={},Dr={};function Pr(e){if(Rr[e])return Rr[e];if(!Ar[e])return e;var t,n=Ar[e];for(t in n)if(n.hasOwnProperty(t)&&t in Dr)return Rr[e]=n[t];return e}u&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);var Or=Pr("animationend"),Lr=Pr("animationiteration"),Mr=Pr("animationstart"),Ur=Pr("transitionend"),Fr=new Map,Vr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(e,t){Fr.set(e,t),l(t,[e])}for(var qr=0;qr<Vr.length;qr++){var Br=Vr[qr];zr(Br.toLowerCase(),"on"+(Br[0].toUpperCase()+Br.slice(1)))}zr(Or,"onAnimationEnd"),zr(Lr,"onAnimationIteration"),zr(Mr,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Ur,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hr=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function Wr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Qe.apply(this,arguments),Ve){if(!Ve)throw Error(i(198));var u=ze;Ve=!1,ze=null,$e||($e=!0,We=u)}}(r,t,void 0,e),e.currentTarget=null}function Kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Wr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Wr(s,o,c),i=l}}}if($e)throw e=We,$e=!1,We=null,e}function Gr(e,t){var n=t[Ss];void 0===n&&(n=t[Ss]=new Set);var r=e+"__bubble";n.has(r)||(Xr(t,e,2,!1),n.add(r))}function Qr(e,t,n){var r=0;t&&(r|=4),Xr(n,e,r,t)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Jr(e){if(!e[Yr]){e[Yr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Hr.has(t)||Qr(t,!1,e),Qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Yr]||(t[Yr]=!0,Qr("selectionchange",!1,t))}}function Xr(e,t,n,r){switch(an(t)){case 1:var s=en;break;case 4:s=tn;break;default:s=nn}n=s.bind(null,t,n,e),s=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=Is(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=i,s=be(n),a=[];e:{var o=Fr.get(e);if(void 0!==o){var l=wn,c=e;switch(e){case"keypress":if(0===dn(n))break e;case"keydown":case"keyup":l=Ln;break;case"focusin":c="focus",l=Nn;break;case"focusout":c="blur",l=Nn;break;case"beforeblur":case"afterblur":l=Nn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Un;break;case Or:case Lr:case Mr:l=En;break;case Ur:l=Fn;break;case"scroll":l=xn;break;case"wheel":l=zn;break;case"copy":case"cut":case"paste":l=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ae(p,h))&&u.push(es(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!Is(c)&&!c[ks])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Is(c):null)&&(c!==(d=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=kn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Cs(l),f=null==c?o:Cs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,Is(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=ns(f))p++;for(f=0,m=h;m;m=ns(m))f++;for(;0<p-f;)u=ns(u),p--;for(;0<f-p;)h=ns(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=ns(u),h=ns(h)}u=null}else u=null;null!==l&&rs(a,o,l,u,!1),null!==c&&null!==d&&rs(a,d,c,u,!0)}if("select"===(l=(o=r?Cs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=ir;else if(Zn(o))if(ar)g=mr;else{g=fr;var y=hr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=pr);switch(g&&(g=g(e,r))?er(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Cs(r):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(Nr=y,Er=r,Ir=null);break;case"focusout":Ir=Er=Nr=null;break;case"mousedown":Tr=!0;break;case"contextmenu":case"mouseup":case"dragend":Tr=!1,Cr(a,n,s);break;case"selectionchange":if(Sr)break;case"keydown":case"keyup":Cr(a,n,s)}var v;if(Bn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Jn?Qn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Wn&&"ko"!==n.locale&&(Jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Jn&&(v=un()):(ln="value"in(on=s)?on.value:on.textContent,Jn=!0)),0<(y=ts(r,w)).length&&(w=new Cn(w,e,null,n,s),a.push({event:w,listeners:y}),v?w.data=v:null!==(v=Yn(n))&&(w.data=v))),(v=Hn?function(e,t){switch(e){case"compositionend":return Yn(t);case"keypress":return 32!==t.which?null:(Gn=!0,Kn);case"textInput":return(e=t.data)===Kn&&Gn?null:e;default:return null}}(e,n):function(e,t){if(Jn)return"compositionend"===e||!Bn&&Qn(e,t)?(e=un(),cn=ln=on=null,Jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ts(r,"onBeforeInput")).length&&(s=new Cn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Kr(a,t)})}function es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ts(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ae(e,n))&&r.unshift(es(e,i,s)),null!=(i=Ae(e,t))&&r.push(es(e,i,s))),e=e.return}return r}function ns(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function rs(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,i))&&a.unshift(es(n,l,o)):s||null!=(l=Ae(n,i))&&a.push(es(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ss=/\r\n?/g,is=/\u0000|\uFFFD/g;function as(e){return("string"===typeof e?e:""+e).replace(ss,"\n").replace(is,"")}function os(e,t,n){if(t=as(t),as(e)!==t&&n)throw Error(i(425))}function ls(){}var cs=null,us=null;function ds(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var hs="function"===typeof setTimeout?setTimeout:void 0,fs="function"===typeof clearTimeout?clearTimeout:void 0,ps="function"===typeof Promise?Promise:void 0,ms="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ps?function(e){return ps.resolve(null).then(e).catch(gs)}:hs;function gs(e){setTimeout(function(){throw e})}function ys(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Jt(t)}function vs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ws(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),xs="__reactFiber$"+bs,_s="__reactProps$"+bs,ks="__reactContainer$"+bs,Ss="__reactEvents$"+bs,Ns="__reactListeners$"+bs,Es="__reactHandles$"+bs;function Is(e){var t=e[xs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[xs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ws(e);null!==e;){if(n=e[xs])return n;e=ws(e)}return t}n=(e=n).parentNode}return null}function Ts(e){return!(e=e[xs]||e[ks])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Cs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function js(e){return e[_s]||null}var As=[],Rs=-1;function Ds(e){return{current:e}}function Ps(e){0>Rs||(e.current=As[Rs],As[Rs]=null,Rs--)}function Os(e,t){Rs++,As[Rs]=e.current,e.current=t}var Ls={},Ms=Ds(Ls),Us=Ds(!1),Fs=Ls;function Vs(e,t){var n=e.type.contextTypes;if(!n)return Ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function zs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function qs(){Ps(Us),Ps(Ms)}function Bs(e,t,n){if(Ms.current!==Ls)throw Error(i(168));Os(Ms,t),Os(Us,n)}function $s(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,B(e)||"Unknown",s));return M({},n,r)}function Hs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,Fs=Ms.current,Os(Ms,e),Os(Us,Us.current),!0}function Ws(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=$s(e,t,Fs),r.__reactInternalMemoizedMergedChildContext=e,Ps(Us),Ps(Ms),Os(Ms,e)):Ps(Us),Os(Us,n)}var Ks=null,Gs=!1,Qs=!1;function Ys(e){null===Ks?Ks=[e]:Ks.push(e)}function Js(){if(!Qs&&null!==Ks){Qs=!0;var e=0,t=Tt;try{var n=Ks;for(Tt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ks=null,Gs=!1}catch(Re){throw null!==Ks&&(Ks=Ks.slice(e+1)),tt(ot,Js),Re}finally{Tt=t,Qs=!1}}return null}var Xs=[],Zs=0,ei=null,ti=0,ni=[],ri=0,si=null,ii=1,ai="";function oi(e,t){Xs[Zs++]=ti,Xs[Zs++]=ei,ei=e,ti=t}function li(e,t,n){ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,si=e;var r=ii;e=ai;var s=32-mt(r)-1;r&=~(1<<s),n+=1;var i=32-mt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ii=1<<32-mt(t)+s|n<<s|r,ai=i+e}else ii=1<<i|n<<s|r,ai=e}function ci(e){null!==e.return&&(oi(e,1),li(e,1,0))}function ui(e){for(;e===ei;)ei=Xs[--Zs],Xs[Zs]=null,ti=Xs[--Zs],Xs[Zs]=null;for(;e===si;)si=ni[--ri],ni[ri]=null,ai=ni[--ri],ni[ri]=null,ii=ni[--ri],ni[ri]=null}var di=null,hi=null,fi=!1,pi=null;function mi(e,t){var n=Vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function gi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,di=e,hi=vs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,di=e,hi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==si?{id:ii,overflow:ai}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Vc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,di=e,hi=null,!0);default:return!1}}function yi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function vi(e){if(fi){var t=hi;if(t){var n=t;if(!gi(e,t)){if(yi(e))throw Error(i(418));t=vs(n.nextSibling);var r=di;t&&gi(e,t)?mi(r,n):(e.flags=-4097&e.flags|2,fi=!1,di=e)}}else{if(yi(e))throw Error(i(418));e.flags=-4097&e.flags|2,fi=!1,di=e}}}function wi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;di=e}function bi(e){if(e!==di)return!1;if(!fi)return wi(e),fi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ds(e.type,e.memoizedProps)),t&&(t=hi)){if(yi(e))throw xi(),Error(i(418));for(;t;)mi(e,t),t=vs(t.nextSibling)}if(wi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){hi=vs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}hi=null}}else hi=di?vs(e.stateNode.nextSibling):null;return!0}function xi(){for(var e=hi;e;)e=vs(e.nextSibling)}function _i(){hi=di=null,fi=!1}function ki(e){null===pi?pi=[e]:pi.push(e)}var Si=b.ReactCurrentBatchConfig;function Ni(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ei(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ii(e){return(0,e._init)(e._payload)}function Ti(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=qc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Ii(i)===t.type)?((r=s(t,n.props)).ref=Ni(e,t,n),r.return=e,r):((r=Bc(n.type,n.key,n.props,null,e.mode,r)).ref=Ni(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=$c(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Wc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Bc(t.type,t.key,t.props,null,e.mode,n)).ref=Ni(e,null,t),n.return=e,n;case _:return(t=Kc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=$c(t,e.mode,n,null)).return=e,t;Ei(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?u(e,t,n,r):null;case R:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);Ei(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case R:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);Ei(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),fi&&oi(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return fi&&oi(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),fi&&oi(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(s,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(s,m),o=a(w,o,g),null===d?u=w:d.sibling=w,d=w,m=y}if(v.done)return n(s,m),fi&&oi(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return fi&&oi(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),fi&&oi(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ii(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=Ni(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=$c(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Bc(a.type,a.key,a.props,null,r.mode,l)).ref=Ni(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Kc(a,r.mode,l)).return=r,r=i}return o(r);case R:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);Ei(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Wc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Ci=Ti(!0),ji=Ti(!1),Ai=Ds(null),Ri=null,Di=null,Pi=null;function Oi(){Pi=Di=Ri=null}function Li(e){var t=Ai.current;Ps(Ai),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ui(e,t){Ri=e,Pi=Di=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(To=!0),e.firstContext=null)}function Fi(e){var t=e._currentValue;if(Pi!==e)if(e={context:e,memoizedValue:t,next:null},null===Di){if(null===Ri)throw Error(i(308));Di=e,Ri.dependencies={lanes:0,firstContext:e}}else Di=Di.next=e;return t}var Vi=null;function zi(e){null===Vi?Vi=[e]:Vi.push(e)}function qi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,zi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Bi(e,r)}function Bi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var $i=!1;function Hi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ki(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Bi(e,n)}return null===(s=r.interleaved)?(t.next=t,zi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Bi(e,n)}function Qi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}function Yi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ji(e,t,n,r){var s=e.updateQueue;$i=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:$i=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Hl|=a,e.lanes=a,e.memoizedState=d}}function Xi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Zi={},ea=Ds(Zi),ta=Ds(Zi),na=Ds(Zi);function ra(e){if(e===Zi)throw Error(i(174));return e}function sa(e,t){switch(Os(na,t),Os(ta,e),Os(ea,Zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ps(ea),Os(ea,t)}function ia(){Ps(ea),Ps(ta),Ps(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Os(ta,e),Os(ea,n))}function oa(e){ta.current===e&&(Ps(ea),Ps(ta))}var la=Ds(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=b.ReactCurrentDispatcher,fa=b.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,ya=null,va=!1,wa=!1,ba=0,xa=0;function _a(){throw Error(i(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gr(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,s,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?oo:lo,e=n(r,s),wa){a=0;do{if(wa=!1,ba=0,25<=a)throw Error(i(301));a+=1,ya=ga=null,t.updateQueue=null,ha.current=co,e=n(r,s)}while(wa)}if(ha.current=ao,t=null!==ga&&null!==ga.next,pa=0,ya=ga=ma=null,va=!1,t)throw Error(i(300));return e}function Na(){var e=0!==ba;return ba=0,e}function Ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Ia(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Ta(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=Ia(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ma.lanes|=d,Hl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,gr(r,t.memoizedState)||(To=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,ma.lanes|=a,Hl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ja(e){var t=Ia(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);gr(a,t.memoizedState)||(To=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Ra(e,t){var n=ma,r=Ia(),s=t(),a=!gr(r.memoizedState,s);if(a&&(r.memoizedState=s,To=!0),r=r.queue,$a(Oa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Fa(9,Pa.bind(null,n,r,s,t),void 0,null),null===Ul)throw Error(i(349));0!==(30&pa)||Da(n,t,s)}return s}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pa(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ma(e)}function Oa(e,t,n){return n(function(){La(t)&&Ma(e)})}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch(qe){return!0}}function Ma(e){var t=Bi(e,1);null!==t&&dc(t,e,1,-1)}function Ua(e){var t=Ea();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t.queue=e,e=e.dispatch=no.bind(null,ma,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Va(){return Ia().memoizedState}function za(e,t,n,r){var s=Ea();ma.flags|=e,s.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function qa(e,t,n,r){var s=Ia();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&ka(r,a.deps))return void(s.memoizedState=Fa(t,n,i,r))}ma.flags|=e,s.memoizedState=Fa(1|t,n,i,r)}function Ba(e,t){return za(8390656,8,e,t)}function $a(e,t){return qa(2048,8,e,t)}function Ha(e,t){return qa(4,2,e,t)}function Wa(e,t){return qa(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ga(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qa(4,4,Ka.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=Ia();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ia();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xa(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,To=!0),e.memoizedState=n):(gr(n,t)||(n=St(),ma.lanes|=n,Hl|=n,e.baseState=!0),t)}function Za(e,t){var n=Tt;Tt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{Tt=n,fa.transition=r}}function eo(){return Ia().memoizedState}function to(e,t,n){var r=uc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ro(e))so(t,n);else if(null!==(n=qi(e,t,n,r))){dc(n,e,r,cc()),io(n,t,r)}}function no(e,t,n){var r=uc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ro(e))so(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,gr(o,a)){var l=t.interleaved;return null===l?(s.next=s,zi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Pe){}null!==(n=qi(e,t,s,r))&&(dc(n,e,r,s=cc()),io(n,t,r))}}function ro(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function so(e,t){wa=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}var ao={readContext:Fi,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},oo={readContext:Fi,useCallback:function(e,t){return Ea().memoizedState=[e,void 0===t?null:t],e},useContext:Fi,useEffect:Ba,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var n=Ea();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ea();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=to.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ea().memoizedState=e},useState:Ua,useDebugValue:Qa,useDeferredValue:function(e){return Ea().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=Za.bind(null,e[1]),Ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,s=Ea();if(fi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ul)throw Error(i(349));0!==(30&pa)||Da(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ba(Oa.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Pa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ea(),t=Ul.identifierPrefix;if(fi){var n=ai;t=":"+t+"R"+(n=(ii&~(1<<32-mt(ii)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lo={readContext:Fi,useCallback:Ya,useContext:Fi,useEffect:$a,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Ja,useReducer:Ca,useRef:Va,useState:function(){return Ca(Ta)},useDebugValue:Qa,useDeferredValue:function(e){return Xa(Ia(),ga.memoizedState,e)},useTransition:function(){return[Ca(Ta)[0],Ia().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Ra,useId:eo,unstable_isNewReconciler:!1},co={readContext:Fi,useCallback:Ya,useContext:Fi,useEffect:$a,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Ja,useReducer:ja,useRef:Va,useState:function(){return ja(Ta)},useDebugValue:Qa,useDeferredValue:function(e){var t=Ia();return null===ga?t.memoizedState=e:Xa(t,ga.memoizedState,e)},useTransition:function(){return[ja(Ta)[0],Ia().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Ra,useId:eo,unstable_isNewReconciler:!1};function uo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Ki(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Gi(e,i,s))&&(dc(t,e,s,r),Qi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Ki(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Gi(e,i,s))&&(dc(t,e,s,r),Qi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cc(),r=uc(e),s=Ki(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Gi(e,s,r))&&(dc(t,e,r,n),Qi(t,e,r))}};function po(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!yr(n,r)||!yr(s,i))}function mo(e,t,n){var r=!1,s=Ls,i=t.contextType;return"object"===typeof i&&null!==i?i=Fi(i):(s=zs(t)?Fs:Ms.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Vs(e,s):Ls),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Hi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Fi(i):(i=zs(t)?Fs:Ms.current,s.context=Vs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ho(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&fo.enqueueReplaceState(s,s.state,null),Ji(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(Be){s="\nError generating stack: "+Be.message+"\n"+Be.stack}return{value:e,source:t,stack:s,digest:null}}function wo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function bo(e,t){try{console.error(t.value)}catch(Ue){setTimeout(function(){throw Ue})}}var xo="function"===typeof WeakMap?WeakMap:Map;function _o(e,t,n){(n=Ki(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,ec=r),bo(0,t)},n}function ko(e,t,n){(n=Ki(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){bo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){bo(0,t),"function"!==typeof r&&(null===tc?tc=new Set([this]):tc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function So(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new xo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Pc.bind(null,e,t,n),t.then(e,e))}function No(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Eo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ki(-1,1)).tag=2,Gi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Io=b.ReactCurrentOwner,To=!1;function Co(e,t,n,r){t.child=null===e?ji(t,null,n,r):Ci(t,e.child,n,r)}function jo(e,t,n,r,s){n=n.render;var i=t.ref;return Ui(t,s),r=Sa(e,t,n,r,i,s),n=Na(),null===e||To?(fi&&n&&ci(t),t.flags|=1,Co(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Ao(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||zc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ro(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:yr)(a,r)&&e.ref===t.ref)return Zo(e,t,s)}return t.flags|=1,(e=qc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ro(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(yr(i,r)&&e.ref===t.ref){if(To=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Zo(e,t,s);0!==(131072&e.flags)&&(To=!0)}}return Oo(e,t,n,r,s)}function Do(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(ql,zl),zl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Os(ql,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Os(ql,zl),zl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Os(ql,zl),zl|=r;return Co(e,t,s,n),t.child}function Po(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,n,r,s){var i=zs(n)?Fs:Ms.current;return i=Vs(t,i),Ui(t,s),n=Sa(e,t,n,r,i,s),r=Na(),null===e||To?(fi&&r&&ci(t),t.flags|=1,Co(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Lo(e,t,n,r,s){if(zs(n)){var i=!0;Hs(t)}else i=!1;if(Ui(t,s),null===t.stateNode)Xo(e,t),mo(t,n,r),yo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Fi(c):c=Vs(t,c=zs(n)?Fs:Ms.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&go(t,a,r,c),$i=!1;var h=t.memoizedState;a.state=h,Ji(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Us.current||$i?("function"===typeof u&&(ho(t,n,u,r),l=t.memoizedState),(o=$i||po(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Wi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:uo(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Fi(l):l=Vs(t,l=zs(n)?Fs:Ms.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&go(t,a,r,l),$i=!1,h=t.memoizedState,a.state=h,Ji(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Us.current||$i?("function"===typeof f&&(ho(t,n,f,r),p=t.memoizedState),(c=$i||po(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Mo(e,t,n,r,i,s)}function Mo(e,t,n,r,s,i){Po(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ws(t,n,!1),Zo(e,t,i);r=t.stateNode,Io.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ci(t,e.child,null,i),t.child=Ci(t,null,o,i)):Co(e,t,o,i),t.memoizedState=r.state,s&&Ws(t,n,!0),t.child}function Uo(e){var t=e.stateNode;t.pendingContext?Bs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Bs(0,t.context,!1),sa(e,t.containerInfo)}function Fo(e,t,n,r,s){return _i(),ki(s),t.flags|=256,Co(e,t,n,r),t.child}var Vo,zo,qo,Bo,$o={dehydrated:null,treeContext:null,retryLane:0};function Ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wo(e,t,n){var r,s=t.pendingProps,a=la.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Os(la,1&a),null===e)return vi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Hc(l,s,0,null),e=$c(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ho(n),t.memoizedState=$o,e):Ko(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Go(e,t,o,r=wo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Hc({mode:"visible",children:r.children},s,0,null),(a=$c(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ci(t,e.child,null,o),t.child.memoizedState=Ho(o),t.memoizedState=$o,a);if(0===(1&t.mode))return Go(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Go(e,t,o,r=wo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),To||l){if(null!==(r=Ul)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Bi(e,s),dc(r,e,s,-1))}return Sc(),Go(e,t,o,r=wo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,hi=vs(s.nextSibling),di=t,fi=!0,pi=null,null!==e&&(ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,ii=e.id,ai=e.overflow,si=t),t=Ko(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=qc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=qc(r,o):(o=$c(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ho(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=$o,s}return e=(o=e.child).sibling,s=qc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ko(e,t){return(t=Hc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Go(e,t,n,r){return null!==r&&ki(r),Ci(t,e.child,null,n),(e=Ko(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Mi(e.return,t,n)}function Yo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Jo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Co(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n,t);else if(19===e.tag)Qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Os(la,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ca(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yo(t,!0,n,null,i);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=qc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function el(e,t){if(!fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var r=t.pendingProps;switch(ui(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tl(t),null;case 1:case 17:return zs(t.type)&&qs(),tl(t),null;case 3:return r=t.stateNode,ia(),Ps(Us),Ps(Ms),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==pi&&(mc(pi),pi=null))),zo(e,t),tl(t),null;case 5:oa(t);var s=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)qo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return tl(t),null}if(e=ra(ea.current),bi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[xs]=t,r[_s]=a,e=0!==(1&t.mode),n){case"dialog":Gr("cancel",r),Gr("close",r);break;case"iframe":case"object":case"embed":Gr("load",r);break;case"video":case"audio":for(s=0;s<$r.length;s++)Gr($r[s],r);break;case"source":Gr("error",r);break;case"img":case"image":case"link":Gr("error",r),Gr("load",r);break;case"details":Gr("toggle",r);break;case"input":Y(r,a),Gr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Gr("invalid",r);break;case"textarea":se(r,a),Gr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Gr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ls)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[xs]=t,e[_s]=r,Vo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Gr("cancel",e),Gr("close",e),s=r;break;case"iframe":case"object":case"embed":Gr("load",e),s=r;break;case"video":case"audio":for(s=0;s<$r.length;s++)Gr($r[s],e);s=r;break;case"source":Gr("error",e),s=r;break;case"img":case"image":case"link":Gr("error",e),Gr("load",e),s=r;break;case"details":Gr("toggle",e),s=r;break;case"input":Y(e,r),s=Q(e,r),Gr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Gr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Gr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Gr("scroll",e):null!=u&&w(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return tl(t),null;case 6:if(e&&null!=t.stateNode)Bo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[xs]=t,(a=r.nodeValue!==n)&&null!==(e=di))switch(e.tag){case 3:os(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&os(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[xs]=t,t.stateNode=r}return tl(t),null;case 13:if(Ps(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(fi&&null!==hi&&0!==(1&t.mode)&&0===(128&t.flags))xi(),_i(),t.flags|=98560,a=!1;else if(a=bi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[xs]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;tl(t),a=!1}else null!==pi&&(mc(pi),pi=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Bl&&(Bl=3):Sc())),null!==t.updateQueue&&(t.flags|=4),tl(t),null);case 4:return ia(),zo(e,t),null===e&&Jr(t.stateNode.containerInfo),tl(t),null;case 10:return Li(t.type._context),tl(t),null;case 19:if(Ps(la),null===(a=t.memoizedState))return tl(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)el(a,!1);else{if(0!==Bl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,el(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Os(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&it()>Jl&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),el(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!fi)return tl(t),null}else 2*it()-a.renderingStartTime>Jl&&1073741824!==n&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=it(),t.sibling=null,n=la.current,Os(la,r?1&n|2:1&n),t):(tl(t),null);case 22:case 23:return bc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&zl)&&(tl(t),6&t.subtreeFlags&&(t.flags|=8192)):tl(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function rl(e,t){switch(ui(t),t.tag){case 1:return zs(t.type)&&qs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Ps(Us),Ps(Ms),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oa(t),null;case 13:if(Ps(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ps(la),null;case 4:return ia(),null;case 10:return Li(t.type._context),null;case 22:case 23:return bc(),null;default:return null}}Vo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},zo=function(){},qo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=ls)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Gr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Bo=function(e,t,n,r){n!==r&&(t.flags|=4)};var sl=!1,il=!1,al="function"===typeof WeakSet?WeakSet:Set,ol=null;function ll(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(qe){Dc(e,t,qe)}else n.current=null}function cl(e,t,n){try{n()}catch(qe){Dc(e,t,qe)}}var ul=!1;function dl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&cl(t,n,i)}s=s.next}while(s!==r)}}function hl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function pl(e){var t=e.alternate;null!==t&&(e.alternate=null,pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[xs],delete t[_s],delete t[Ss],delete t[Ns],delete t[Es])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ml(e){return 5===e.tag||3===e.tag||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ls));else if(4!==r&&null!==(e=e.child))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}var wl=null,bl=!1;function xl(e,t,n){for(n=n.child;null!==n;)_l(e,t,n),n=n.sibling}function _l(e,t,n){if(pt&&"function"===typeof pt.onCommitFiberUnmount)try{pt.onCommitFiberUnmount(ft,n)}catch(He){}switch(n.tag){case 5:il||ll(n,t);case 6:var r=wl,s=bl;wl=null,xl(e,t,n),bl=s,null!==(wl=r)&&(bl?(e=wl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):wl.removeChild(n.stateNode));break;case 18:null!==wl&&(bl?(e=wl,n=n.stateNode,8===e.nodeType?ys(e.parentNode,n):1===e.nodeType&&ys(e,n),Jt(e)):ys(wl,n.stateNode));break;case 4:r=wl,s=bl,wl=n.stateNode.containerInfo,bl=!0,xl(e,t,n),wl=r,bl=s;break;case 0:case 11:case 14:case 15:if(!il&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&cl(n,t,a),s=s.next}while(s!==r)}xl(e,t,n);break;case 1:if(!il&&(ll(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(He){Dc(n,t,He)}xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:1&n.mode?(il=(r=il)||null!==n.memoizedState,xl(e,t,n),il=r):xl(e,t,n);break;default:xl(e,t,n)}}function kl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new al),t.forEach(function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Sl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:wl=l.stateNode,bl=!1;break e;case 3:case 4:wl=l.stateNode.containerInfo,bl=!0;break e}l=l.return}if(null===wl)throw Error(i(160));_l(a,o,s),wl=null,bl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Pe){Dc(s,t,Pe)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Nl(t,e),t=t.sibling}function Nl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sl(t,e),El(e),4&r){try{dl(3,e,e.return),hl(3,e)}catch(De){Dc(e,e.return,De)}try{dl(5,e,e.return)}catch(De){Dc(e,e.return,De)}}break;case 1:Sl(t,e),El(e),512&r&&null!==n&&ll(n,n.return);break;case 5:if(Sl(t,e),El(e),512&r&&null!==n&&ll(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(De){Dc(e,e.return,De)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(s,h):"dangerouslySetInnerHTML"===d?ue(s,h):"children"===d?de(s,h):w(s,d,h,u)}switch(l){case"input":X(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[_s]=a}catch(De){Dc(e,e.return,De)}}break;case 6:if(Sl(t,e),El(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(De){Dc(e,e.return,De)}}break;case 3:if(Sl(t,e),El(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Jt(t.containerInfo)}catch(De){Dc(e,e.return,De)}break;case 4:default:Sl(t,e),El(e);break;case 13:Sl(t,e),El(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Yl=it())),4&r&&kl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(il=(u=il)||d,Sl(t,e),il=u):Sl(t,e),El(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(ol=e,d=e.child;null!==d;){for(h=ol=d;null!==ol;){switch(p=(f=ol).child,f.tag){case 0:case 11:case 14:case 15:dl(4,f,f.return);break;case 1:ll(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(De){Dc(r,n,De)}}break;case 5:ll(f,f.return);break;case 22:if(null!==f.memoizedState){jl(h);continue}}null!==p?(p.return=f,ol=p):jl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(De){Dc(e,e.return,De)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(De){Dc(e,e.return,De)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sl(t,e),El(e),4&r&&kl(e);case 21:}}function El(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ml(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(i(161))}}catch(ut){Dc(e,e.return,ut)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Il(e,t,n){ol=e,Tl(e,t,n)}function Tl(e,t,n){for(var r=0!==(1&e.mode);null!==ol;){var s=ol,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||sl;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||il;o=sl;var c=il;if(sl=a,(il=l)&&!c)for(ol=s;null!==ol;)l=(a=ol).child,22===a.tag&&null!==a.memoizedState?Al(s):null!==l?(l.return=a,ol=l):Al(s);for(;null!==i;)ol=i,Tl(i,t,n),i=i.sibling;ol=s,sl=o,il=c}Cl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,ol=i):Cl(e)}}function Cl(e){for(;null!==ol;){var t=ol;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:il||hl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!il)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:uo(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Xi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Xi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Jt(h)}}}break;default:throw Error(i(163))}il||512&t.flags&&fl(t)}catch(f){Dc(t,t.return,f)}}if(t===e){ol=null;break}if(null!==(n=t.sibling)){n.return=t.return,ol=n;break}ol=t.return}}function jl(e){for(;null!==ol;){var t=ol;if(t===e){ol=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ol=n;break}ol=t.return}}function Al(e){for(;null!==ol;){var t=ol;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hl(4,t)}catch(ut){Dc(t,n,ut)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(ut){Dc(t,s,ut)}}var i=t.return;try{fl(t)}catch(ut){Dc(t,i,ut)}break;case 5:var a=t.return;try{fl(t)}catch(ut){Dc(t,a,ut)}}}catch(ut){Dc(t,t.return,ut)}if(t===e){ol=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ol=o;break}ol=t.return}}var Rl,Dl=Math.ceil,Pl=b.ReactCurrentDispatcher,Ol=b.ReactCurrentOwner,Ll=b.ReactCurrentBatchConfig,Ml=0,Ul=null,Fl=null,Vl=0,zl=0,ql=Ds(0),Bl=0,$l=null,Hl=0,Wl=0,Kl=0,Gl=null,Ql=null,Yl=0,Jl=1/0,Xl=null,Zl=!1,ec=null,tc=null,nc=!1,rc=null,sc=0,ic=0,ac=null,oc=-1,lc=0;function cc(){return 0!==(6&Ml)?it():-1!==oc?oc:oc=it()}function uc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Vl?Vl&-Vl:null!==Si.transition?(0===lc&&(lc=St()),lc):0!==(e=Tt)?e:e=void 0===(e=window.event)?16:an(e.type)}function dc(e,t,n,r){if(50<ic)throw ic=0,ac=null,Error(i(185));Et(e,n,r),0!==(2&Ml)&&e===Ul||(e===Ul&&(0===(2&Ml)&&(Wl|=n),4===Bl&&gc(e,Vl)),hc(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Jl=it()+500,Gs&&Js()))}function hc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-mt(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=_t(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=xt(e,e===Ul?Vl:0);if(0===r)null!==n&&nt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&nt(n),1===t)0===e.tag?function(e){Gs=!0,Ys(e)}(yc.bind(null,e)):Ys(yc.bind(null,e)),ms(function(){0===(6&Ml)&&Js()}),n=null;else{switch(Ct(r)){case 1:n=ot;break;case 4:n=lt;break;case 16:default:n=ct;break;case 536870912:n=ht}n=Uc(n,fc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fc(e,t){if(oc=-1,lc=0,0!==(6&Ml))throw Error(i(327));var n=e.callbackNode;if(Ac()&&e.callbackNode!==n)return null;var r=xt(e,e===Ul?Vl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Nc(e,r);else{t=r;var s=Ml;Ml|=2;var a=kc();for(Ul===e&&Vl===t||(Xl=null,Jl=it()+500,xc(e,t));;)try{Ic();break}catch(He){_c(e,He)}Oi(),Pl.current=a,Ml=s,null!==Fl?t=0:(Ul=null,Vl=0,t=Bl)}if(0!==t){if(2===t&&(0!==(s=kt(e))&&(r=s,t=pc(e,s))),1===t)throw n=$l,xc(e,0),gc(e,r),hc(e,it()),n;if(6===t)gc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=Nc(e,r))&&(0!==(a=kt(e))&&(r=a,t=pc(e,a))),1===t))throw n=$l,xc(e,0),gc(e,r),hc(e,it()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:jc(e,Ql,Xl);break;case 3:if(gc(e,r),(130023424&r)===r&&10<(t=Yl+500-it())){if(0!==xt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){cc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hs(jc.bind(null,e,Ql,Xl),t);break}jc(e,Ql,Xl);break;case 4:if(gc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-mt(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=it()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dl(r/1960))-r)){e.timeoutHandle=hs(jc.bind(null,e,Ql,Xl),r);break}jc(e,Ql,Xl);break;default:throw Error(i(329))}}}return hc(e,it()),e.callbackNode===n?fc.bind(null,e):null}function pc(e,t){var n=Gl;return e.current.memoizedState.isDehydrated&&(xc(e,t).flags|=256),2!==(e=Nc(e,t))&&(t=Ql,Ql=n,null!==t&&mc(t)),e}function mc(e){null===Ql?Ql=e:Ql.push.apply(Ql,e)}function gc(e,t){for(t&=~Kl,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mt(t),r=1<<n;e[n]=-1,t&=~r}}function yc(e){if(0!==(6&Ml))throw Error(i(327));Ac();var t=xt(e,0);if(0===(1&t))return hc(e,it()),null;var n=Nc(e,t);if(0!==e.tag&&2===n){var r=kt(e);0!==r&&(t=r,n=pc(e,r))}if(1===n)throw n=$l,xc(e,0),gc(e,t),hc(e,it()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ql,Xl),hc(e,it()),null}function vc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Jl=it()+500,Gs&&Js())}}function wc(e){null!==rc&&0===rc.tag&&0===(6&Ml)&&Ac();var t=Ml;Ml|=1;var n=Ll.transition,r=Tt;try{if(Ll.transition=null,Tt=1,e)return e()}finally{Tt=r,Ll.transition=n,0===(6&(Ml=t))&&Js()}}function bc(){zl=ql.current,Ps(ql)}function xc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,fs(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(ui(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&qs();break;case 3:ia(),Ps(Us),Ps(Ms),da();break;case 5:oa(r);break;case 4:ia();break;case 13:case 19:Ps(la);break;case 10:Li(r.type._context);break;case 22:case 23:bc()}n=n.return}if(Ul=e,Fl=e=qc(e.current,null),Vl=zl=t,Bl=0,$l=null,Kl=Wl=Hl=0,Ql=Gl=null,null!==Vi){for(t=0;t<Vi.length;t++)if(null!==(r=(n=Vi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Vi=null}return e}function _c(e,t){for(;;){var n=Fl;try{if(Oi(),ha.current=ao,va){for(var r=ma.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}va=!1}if(pa=0,ya=ga=ma=null,wa=!1,ba=0,Ol.current=null,null===n||null===n.return){Bl=1,$l=t,Fl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Vl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=No(o);if(null!==p){p.flags&=-257,Eo(p,o,l,0,t),1&p.mode&&So(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){So(a,u,t),Sc();break e}c=Error(i(426))}else if(fi&&1&l.mode){var y=No(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Eo(y,o,l,0,t),ki(vo(c,l));break e}}a=c=vo(c,l),4!==Bl&&(Bl=2),null===Gl?Gl=[a]:Gl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Yi(a,_o(0,c,t));break e;case 1:l=c;var v=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===tc||!tc.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Yi(a,ko(a,l,t));break e}}a=a.return}while(null!==a)}Cc(n)}catch(b){t=b,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function kc(){var e=Pl.current;return Pl.current=ao,null===e?ao:e}function Sc(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Ul||0===(268435455&Hl)&&0===(268435455&Wl)||gc(Ul,Vl)}function Nc(e,t){var n=Ml;Ml|=2;var r=kc();for(Ul===e&&Vl===t||(Xl=null,xc(e,t));;)try{Ec();break}catch(Re){_c(e,Re)}if(Oi(),Ml=n,Pl.current=r,null!==Fl)throw Error(i(261));return Ul=null,Vl=0,Bl}function Ec(){for(;null!==Fl;)Tc(Fl)}function Ic(){for(;null!==Fl&&!rt();)Tc(Fl)}function Tc(e){var t=Rl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?Cc(e):Fl=t,Ol.current=null}function Cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=nl(n,t,zl)))return void(Fl=n)}else{if(null!==(n=rl(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return Bl=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===Bl&&(Bl=5)}function jc(e,t,n){var r=Tt,s=Ll.transition;try{Ll.transition=null,Tt=1,function(e,t,n,r){do{Ac()}while(null!==rc);if(0!==(6&Ml))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-mt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Ul&&(Fl=Ul=null,Vl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||nc||(nc=!0,Uc(ct,function(){return Ac(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ll.transition,Ll.transition=null;var o=Tt;Tt=1;var l=Ml;Ml|=4,Ol.current=null,function(e,t){if(cs=Zt,_r(e=xr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Ge){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(us={focusedElem:e,selectionRange:n},Zt=!1,ol=t;null!==ol;)if(e=(t=ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ol=e;else for(;null!==ol;){t=ol;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:uo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(Ge){Dc(t,t.return,Ge)}if(null!==(e=t.sibling)){e.return=t.return,ol=e;break}ol=t.return}m=ul,ul=!1}(e,n),Nl(n,e),kr(us),Zt=!!cs,us=cs=null,e.current=n,Il(n,e,s),st(),Ml=l,Tt=o,Ll.transition=a}else e.current=n;if(nc&&(nc=!1,rc=e,sc=s),a=e.pendingLanes,0===a&&(tc=null),function(e){if(pt&&"function"===typeof pt.onCommitFiberRoot)try{pt.onCommitFiberRoot(ft,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),hc(e,it()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,e=ec,ec=null,e;0!==(1&sc)&&0!==e.tag&&Ac(),a=e.pendingLanes,0!==(1&a)?e===ac?ic++:(ic=0,ac=e):ic=0,Js()}(e,t,n,r)}finally{Ll.transition=s,Tt=r}return null}function Ac(){if(null!==rc){var e=Ct(sc),t=Ll.transition,n=Tt;try{if(Ll.transition=null,Tt=16>e?16:e,null===rc)var r=!1;else{if(e=rc,rc=null,sc=0,0!==(6&Ml))throw Error(i(331));var s=Ml;for(Ml|=4,ol=e.current;null!==ol;){var a=ol,o=a.child;if(0!==(16&ol.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ol=u;null!==ol;){var d=ol;switch(d.tag){case 0:case 11:case 15:dl(8,d,a)}var h=d.child;if(null!==h)h.return=d,ol=h;else for(;null!==ol;){var f=(d=ol).sibling,p=d.return;if(pl(d),d===u){ol=null;break}if(null!==f){f.return=p,ol=f;break}ol=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ol=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ol=o;else e:for(;null!==ol;){if(0!==(2048&(a=ol).flags))switch(a.tag){case 0:case 11:case 15:dl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ol=v;break e}ol=a.return}}var w=e.current;for(ol=w;null!==ol;){var b=(o=ol).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,ol=b;else e:for(o=w;null!==ol;){if(0!==(2048&(l=ol).flags))try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(_){Dc(l,l.return,_)}if(l===o){ol=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,ol=x;break e}ol=l.return}}if(Ml=s,Js(),pt&&"function"===typeof pt.onPostCommitFiberRoot)try{pt.onPostCommitFiberRoot(ft,e)}catch(_){}r=!0}return r}finally{Tt=n,Ll.transition=t}}return!1}function Rc(e,t,n){e=Gi(e,t=_o(0,t=vo(n,t),1),1),t=cc(),null!==e&&(Et(e,1,t),hc(e,t))}function Dc(e,t,n){if(3===e.tag)Rc(e,e,n);else for(;null!==t;){if(3===t.tag){Rc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tc||!tc.has(r))){t=Gi(t,e=ko(t,e=vo(n,e),1),1),e=cc(),null!==t&&(Et(t,1,e),hc(t,e));break}}t=t.return}}function Pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cc(),e.pingedLanes|=e.suspendedLanes&n,Ul===e&&(Vl&n)===n&&(4===Bl||3===Bl&&(130023424&Vl)===Vl&&500>it()-Yl?xc(e,0):Kl|=n),hc(e,t)}function Oc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=wt,0===(130023424&(wt<<=1))&&(wt=4194304)));var n=cc();null!==(e=Bi(e,t))&&(Et(e,t,n),hc(e,n))}function Lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Oc(e,n)}function Uc(e,t){return tt(e,t)}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vc(e,t,n,r){return new Fc(e,t,n,r)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qc(e,t){var n=e.alternate;return null===n?((n=Vc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)zc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return $c(n.children,s,a,t);case S:o=8,s|=8;break;case N:return(e=Vc(12,n,t,2|s)).elementType=N,e.lanes=a,e;case C:return(e=Vc(13,n,t,s)).elementType=C,e.lanes=a,e;case j:return(e=Vc(19,n,t,s)).elementType=j,e.lanes=a,e;case D:return Hc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case I:o=9;break e;case T:o=11;break e;case A:o=14;break e;case R:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Vc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function $c(e,t,n,r){return(e=Vc(7,e,r,t)).lanes=n,e}function Hc(e,t,n,r){return(e=Vc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Wc(e,t,n){return(e=Vc(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=Vc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nt(0),this.expirationTimes=Nt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qc(e,t,n,r,s,i,a,o,l){return e=new Gc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Vc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hi(i),e}function Yc(e){if(!e)return Ls;e:{if(Ye(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(zs(n))return $s(e,n,t)}return t}function Jc(e,t,n,r,s,i,a,o,l){return(e=Qc(n,r,!0,e,0,i,0,o,l)).context=Yc(null),n=e.current,(i=Ki(r=cc(),s=uc(n))).callback=void 0!==t&&null!==t?t:null,Gi(n,i,s),e.current.lanes=s,Et(e,s,r),hc(e,r),e}function Xc(e,t,n,r){var s=t.current,i=cc(),a=uc(s);return n=Yc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ki(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Gi(s,t,a))&&(dc(e,s,a,i),Qi(e,s,a)),a}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function eu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tu(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}Rl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Us.current)To=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return To=!1,function(e,t,n){switch(t.tag){case 3:Uo(t),_i();break;case 5:aa(t);break;case 1:zs(t.type)&&Hs(t);break;case 4:sa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Os(Ai,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Os(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Wo(e,t,n):(Os(la,1&la.current),null!==(e=Zo(e,t,n))?e.sibling:null);Os(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Jo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Os(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Do(e,t,n)}return Zo(e,t,n)}(e,t,n);To=0!==(131072&e.flags)}else To=!1,fi&&0!==(1048576&t.flags)&&li(t,ti,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xo(e,t),e=t.pendingProps;var s=Vs(t,Ms.current);Ui(t,n),s=Sa(null,t,r,e,s,n);var a=Na();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zs(r)?(a=!0,Hs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Hi(t),s.updater=fo,t.stateNode=s,s._reactInternals=t,yo(t,r,e,n),t=Mo(null,t,r,!0,a,n)):(t.tag=0,fi&&a&&ci(t),Co(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=uo(r,e),s){case 0:t=Oo(null,t,r,e,n);break e;case 1:t=Lo(null,t,r,e,n);break e;case 11:t=jo(null,t,r,e,n);break e;case 14:t=Ao(null,t,r,uo(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Oo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 1:return r=t.type,s=t.pendingProps,Lo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 3:e:{if(Uo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Wi(e,t),Ji(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Fo(e,t,r,n,s=vo(Error(i(423)),t));break e}if(r!==s){t=Fo(e,t,r,n,s=vo(Error(i(424)),t));break e}for(hi=vs(t.stateNode.containerInfo.firstChild),di=t,fi=!0,pi=null,n=ji(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_i(),r===s){t=Zo(e,t,n);break e}Co(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&vi(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ds(r,s)?o=null:null!==a&&ds(r,a)&&(t.flags|=32),Po(e,t),Co(e,t,o,n),t.child;case 6:return null===e&&vi(t),null;case 13:return Wo(e,t,n);case 4:return sa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ci(t,null,r,n):Co(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,jo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 7:return Co(e,t,t.pendingProps,n),t.child;case 8:case 12:return Co(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Os(Ai,r._currentValue),r._currentValue=o,null!==a)if(gr(a.value,o)){if(a.children===s.children&&!Us.current){t=Zo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ki(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Mi(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Mi(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Co(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ui(t,n),r=r(s=Fi(s)),t.flags|=1,Co(e,t,r,n),t.child;case 14:return s=uo(r=t.type,t.pendingProps),Ao(e,t,r,s=uo(r.type,s),n);case 15:return Ro(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:uo(r,s),Xo(e,t),t.tag=1,zs(r)?(e=!0,Hs(t)):e=!1,Ui(t,n),mo(t,r,s),yo(t,r,s,n),Mo(null,t,r,!0,e,n);case 19:return Jo(e,t,n);case 22:return Do(e,t,n)}throw Error(i(156,t.tag))};var nu="function"===typeof reportError?reportError:function(e){console.error(e)};function ru(e){this._internalRoot=e}function su(e){this._internalRoot=e}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function au(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(){}function lu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Zc(a);o.call(e)}}Xc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Zc(a);i.call(e)}}var a=Jc(t,r,e,0,null,!1,0,"",ou);return e._reactRootContainer=a,e[ks]=a.current,Jr(8===e.nodeType?e.parentNode:e),wc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Zc(l);o.call(e)}}var l=Qc(e,0,!1,null,0,!1,0,"",ou);return e._reactRootContainer=l,e[ks]=l.current,Jr(8===e.nodeType?e.parentNode:e),wc(function(){Xc(t,l,n,r)}),l}(n,t,e,s,r);return Zc(a)}su.prototype.render=ru.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Xc(e,t,null,null)},su.prototype.unmount=ru.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;wc(function(){Xc(null,e,null,null)}),t[ks]=null}},su.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qt.length&&0!==t&&t<qt[n].priority;n++);qt.splice(n,0,e),0===n&&Wt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bt(t.pendingLanes);0!==n&&(It(t,1|n),hc(t,it()),0===(6&Ml)&&(Jl=it()+500,Js()))}break;case 13:wc(function(){var t=Bi(e,1);if(null!==t){var n=cc();dc(t,e,1,n)}}),tu(e,1)}},At=function(e){if(13===e.tag){var t=Bi(e,134217728);if(null!==t)dc(t,e,134217728,cc());tu(e,134217728)}},Rt=function(e){if(13===e.tag){var t=uc(e),n=Bi(e,t);if(null!==n)dc(n,e,t,cc());tu(e,t)}},Dt=function(){return Tt},Pt=function(e,t){var n=Tt;try{return Tt=e,t()}finally{Tt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=js(r);if(!s)throw Error(i(90));K(r),X(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=vc,Te=wc;var cu={usingClientEntryPoint:!1,Events:[Ts,Cs,js,Ne,Ee,vc]},uu={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},du={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{ft=hu.inject(du),pt=hu}catch(Oe){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!iu(e))throw Error(i(299));var n=!1,r="",s=nu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Qc(e,1,!1,null,0,n,0,r,s),e[ks]=t.current,Jr(8===e.nodeType?e.parentNode:e),new ru(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return wc(e)},t.hydrate=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!iu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=nu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Jc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ks]=t.current,Jr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new su(t)},t.render=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!au(e))throw Error(i(40));return!!e._reactRootContainer&&(wc(function(){lu(null,null,e,!1,function(){e._reactRootContainer=null,e[ks]=null})}),!0)},t.unstable_batchedUpdates=vc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!au(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return lu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Re){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Re){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let b={get action(){return p},get location(){return e(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),m=e,()=>{i.removeEventListener(l,v),m=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let s=h(b.location,e,t);n&&n(s,e),g=y()+1;let o=d(s,g),l=b.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,t){p=r.Replace;let s=h(b.location,e,t);n&&n(s,e),g=y();let i=d(s,g),o=b.createHref(s);u.replaceState(i,"",o),a&&m&&m({action:p,location:b.location,delta:0})},go:e=>u.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let s=R(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=A(s);a=C(i[o],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=M([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))s(e,t,r);else s(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=b(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,_=3,k=2,S=1,N=10,E=-2,I=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=E),t&&(r+=k),n.filter(e=>!I(e)).reduce((e,t)=>e+(x.test(t)?_:""===t?S:N),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:M([i,u.pathname]),pathnameBase:U(M([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=M([i,u.pathnameBase]))}return a}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=P(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),D("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),D("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),D("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?p(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:F(r),hash:V(s)}}(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],B=(new Set(q),["get",...q]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}const H=s.createContext(null);const W=s.createContext(null);const K=s.createContext(null);const G=s.createContext(null);const Q=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=s.createContext(null);function J(){return null!=s.useContext(G)}function X(){return J()||c(!1),s.useContext(G).location}function Z(e){s.useContext(K).static||s.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=s.useContext(Q);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=s.useRef(!1);return Z(()=>{n.current=!0}),s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,$({fromRouteId:t},s)))},[e,t])}():function(){J()||c(!1);let e=s.useContext(H),{basename:t,future:n,navigator:r}=s.useContext(K),{matches:i}=s.useContext(Q),{pathname:a}=X(),o=JSON.stringify(O(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return Z(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=L(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:M([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(K),{matches:i}=s.useContext(Q),{pathname:a}=X(),o=JSON.stringify(O(i,r.v7_relativeSplatPath));return s.useMemo(()=>L(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ne(e,t,n,i){J()||c(!1);let{navigator:a}=s.useContext(K),{matches:o}=s.useContext(Q),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=X();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=oe(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&b?s.createElement(G.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},b):b}function re(){let e=function(){var e;let t=s.useContext(Y),n=de(ce.UseRouteError),r=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const se=s.createElement(re,null);class ie extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Q.Provider,{value:this.props.routeContext},s.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(H);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Q.Provider,{value:t},r)}function oe(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,c=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||se,u&&(d<0&&0===i?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):d===i&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:c?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ae,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=s.useContext(H);return t||c(!1),t}function de(e){let t=s.useContext(W);return t||c(!1),t}function he(e){let t=function(){let e=s.useContext(Q);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function me(e){let{to:t,replace:n,state:r,relative:i}=e;J()||c(!1);let{future:a,static:o}=s.useContext(K),{matches:l}=s.useContext(Q),{pathname:u}=X(),d=ee(),h=L(t,O(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:i}),[d,f,i,n,r]),null}function ge(e){c(!1)}function ye(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;J()&&c(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:d,navigator:o,static:l,future:$({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,w=s.useMemo(()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,f,m,g,y,v,a]);return null==w?null:s.createElement(K.Provider,{value:h},s.createElement(G.Provider,{children:n,value:w}))}function ve(e){let{children:t,location:n}=e;return ne(we(t),n)}new Promise(()=>{});s.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,we(e.props.children,i));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=we(e.props.children,i)),n.push(a)}),n}var be=n(950),xe=n.t(be,2);function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Re){}new Map;const Ne=i.startTransition;xe.flushSync,i.useId;function Ee(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=a.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},p=s.useCallback(e=>{d&&Ne?Ne(()=>u(e)):u(e)},[u,d]);return s.useLayoutEffect(()=>l.listen(p),[l,p]),s.useEffect(()=>pe(r),[r]),s.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=ke(e,Se),{basename:g}=s.useContext(K),y=!1;if("string"===typeof d&&Te.test(d)&&(n=d,Ie))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=R(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(Re){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;J()||c(!1);let{basename:r,navigator:i}=s.useContext(K),{hash:a,pathname:o,search:l}=te(e,{relative:n}),u=o;return"/"!==r&&(u="/"===o?r:M([r,o])),i.createHref({pathname:u,search:l,hash:a})}(d,{relative:i}),w=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),d=te(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});return s.createElement("a",_e({},m,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:u}))});var je,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(je||(je={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));let Re={data:""},De=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Re,Pe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Oe=/\/\*[^]*?\*\/|  +/g,Le=/\n+/g,Me=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?Me(a,i):i+"{"+Me(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=Me(a,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Me.p?Me.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Ue={},Fe=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Fe(e[n]);return t}return e},Ve=(e,t,n,r,s)=>{let i=Fe(e),a=Ue[i]||(Ue[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!Ue[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=Pe.exec(e.replace(Oe,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Le," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Le," ").trim();return r[0]})(e);Ue[a]=Me(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Ue.g?Ue.g:null;return n&&(Ue.g=Ue[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Ue[a],t,r,o),a};function ze(e){let t=this||{},n=e.call?e(t.p):e;return Ve(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":Me(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,De(t.target),t.g,t.o,t.k)}ze.bind({g:1});let qe,Be,$e,He=ze.bind({k:1});function We(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:Be&&Be()},o),n.o=/ *go\d+/.test(l),o.className=ze.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),$e&&c[0]&&$e(o),qe(c,o)}return t?t(s):s}}var Ke=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ge=(()=>{let e=0;return()=>(++e).toString()})(),Qe=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ye=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:n}=t;return Ye(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+s}))}}},Je=[],Xe={toasts:[],pausedAt:void 0},Ze=e=>{Xe=Ye(Xe,e),Je.forEach(e=>{e(Xe)})},et={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},tt=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||Ge()}}(t,e,n);return Ze({type:2,toast:r}),r.id},nt=(e,t)=>tt("blank")(e,t);nt.error=tt("error"),nt.success=tt("success"),nt.loading=tt("loading"),nt.custom=tt("custom"),nt.dismiss=e=>{Ze({type:3,toastId:e})},nt.remove=e=>Ze({type:4,toastId:e}),nt.promise=(e,t,n)=>{let r=nt.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?Ke(t.success,e):void 0;return s?nt.success(s,{id:r,...n,...null==n?void 0:n.success}):nt.dismiss(r),e}).catch(e=>{let s=t.error?Ke(t.error,e):void 0;s?nt.error(s,{id:r,...n,...null==n?void 0:n.error}):nt.dismiss(r)}),e};var rt=(e,t)=>{Ze({type:1,toast:{id:e,height:t}})},st=()=>{Ze({type:5,time:Date.now()})},it=new Map,at=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,s.useState)(Xe),r=(0,s.useRef)(Xe);(0,s.useEffect)(()=>(r.current!==Xe&&n(Xe),Je.push(n),()=>{let e=Je.indexOf(n);e>-1&&Je.splice(e,1)}),[]);let i=t.toasts.map(t=>{var n,r,s;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||et[t.type],style:{...e.style,...null==(s=e[t.type])?void 0:s.style,...t.style}}});return{...t,toasts:i}}(e);(0,s.useEffect)(()=>{if(n)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout(()=>nt.dismiss(t.id),n);t.visible&&nt.dismiss(t.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,n]);let r=(0,s.useCallback)(()=>{n&&Ze({type:6,time:Date.now()})},[n]),i=(0,s.useCallback)((e,n)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:i}=n||{},a=t.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[t]);return(0,s.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(it.has(e))return;let n=setTimeout(()=>{it.delete(e),Ze({type:4,toastId:e})},t);it.set(e,n)}(e.id,e.removeDelay);else{let t=it.get(e.id);t&&(clearTimeout(t),it.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:rt,startPause:st,endPause:r,calculateOffset:i}}},ot=He`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,lt=He`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ct=He`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ut=We("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ot} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${lt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ct} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,dt=He`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ht=We("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${dt} 1s linear infinite;
`,ft=He`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pt=He`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,mt=We("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ft} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,gt=We("div")`
  position: absolute;
`,yt=We("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,vt=He`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wt=We("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${vt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bt=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:i}=t;return void 0!==n?"string"==typeof n?s.createElement(wt,null,n):n:"blank"===r?null:s.createElement(yt,null,s.createElement(ht,{...i}),"loading"!==r&&s.createElement(gt,null,"error"===r?s.createElement(ut,{...i}):s.createElement(mt,{...i})))},xt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,_t=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,kt=We("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,St=We("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Nt=s.memo(e=>{let{toast:t,position:n,style:r,children:i}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Qe()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[xt(n),_t(n)];return{animation:t?`${He(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${He(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},o=s.createElement(bt,{toast:t}),l=s.createElement(St,{...t.ariaProps},Ke(t.message,t));return s.createElement(kt,{className:t.className,style:{...a,...r,...t.style}},"function"==typeof i?i({icon:o,message:l}):s.createElement(s.Fragment,null,o,l))});!function(e,t,n,r){Me.p=t,qe=e,Be=n,$e=r}(s.createElement);var Et=e=>{let{id:t,className:n,style:r,onHeightUpdate:i,children:a}=e,o=s.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return s.createElement("div",{ref:o,className:n,style:r},a)},It=ze`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Tt=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:i,children:a,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=at(r);return s.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qe()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}})(r,u.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:n}));return s.createElement(Et,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?It:"",style:o},"custom"===e.type?Ke(e.message,e):a?a(e):s.createElement(Nt,{toast:e,position:r}))}))},Ct=nt;const jt=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"===typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!==typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,s,i);return i},At=e=>e?jt(e):jt;var Rt=n(443);const{useDebugValue:Dt}=s,{useSyncExternalStoreWithSelector:Pt}=Rt;let Ot=!1;const Lt=e=>e;const Mt=e=>{"function"!==typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"===typeof e?At(e):e,n=(e,n)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt,n=arguments.length>2?arguments[2]:void 0;n&&!Ot&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ot=!0);const r=Pt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Dt(r),r}(t,e,n);return Object.assign(n,t),n},Ut=e=>e?Mt(e):Mt;const Ft=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Vt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ft(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new zt;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class zt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qt=function(e){return function(e){const t=Ft(e);return Vt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Bt=function(e){try{return Vt.decodeString(e,!0)}catch(Re){console.error("base64Decode failed: ",Re)}return null};const $t=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ht=()=>{try{return $t()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Re){return}const t=e&&Bt(e[1]);return t&&JSON.parse(t)})()}catch(Re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Re}`)}},Wt=e=>{var t,n;return null===(n=null===(t=Ht())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Kt=e=>{const t=Wt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Gt=()=>{var e;return null===(e=Ht())||void 0===e?void 0:e.config},Qt=e=>{var t;return null===(t=Ht())||void 0===t?void 0:t[`_${e}`]};class Yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Jt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qt(JSON.stringify({alg:"none",type:"JWT"})),qt(JSON.stringify(i)),""].join(".")}function Xt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Zt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function en(){return!function(){var e;const t=null===(e=Ht())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Re){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tn(){try{return"object"===typeof indexedDB}catch(Re){return!1}}function nn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class rn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}}class sn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(an,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new rn(n,i,t)}}const an=/\{\$([^}]+)}/g;function on(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(ln(n)&&ln(i)){if(!on(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ln(e){return null!==e&&"object"===typeof e}function cn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function un(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function dn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class hn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=fn),void 0===r.error&&(r.error=fn),void 0===r.complete&&(r.complete=fn);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Re){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Re){"undefined"!==typeof console&&console.error&&console.error(Re)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}function pn(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function mn(e){return e&&e._delegate?e._delegate:e}class gn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yn="[DEFAULT]";class vn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Yt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Re){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Re){if(r)return null;throw Re}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:yn})}catch(Re){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Re){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===yn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn;return this.component?this.component.multipleInstances?e:yn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const bn=[];var xn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xn||(xn={}));const _n={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},kn=xn.INFO,Sn={[xn.DEBUG]:"log",[xn.VERBOSE]:"log",[xn.INFO]:"info",[xn.WARN]:"warn",[xn.ERROR]:"error"},Nn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Sn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class En{constructor(e){this.name=e,this._logLevel=kn,this._logHandler=Nn,this._userLogHandler=null,bn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?_n[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.DEBUG,...t),this._logHandler(this,xn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.VERBOSE,...t),this._logHandler(this,xn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.INFO,...t),this._logHandler(this,xn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.WARN,...t),this._logHandler(this,xn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.ERROR,...t),this._logHandler(this,xn.ERROR,...t)}}let In,Tn;const Cn=new WeakMap,jn=new WeakMap,An=new WeakMap,Rn=new WeakMap,Dn=new WeakMap;let Pn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return jn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||An.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function On(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Tn||(Tn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Un(this),n),Mn(Cn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mn(e.apply(Un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Un(this),t,...r);return An.set(i,t.sort?t.sort():[t]),Mn(i)}}function Ln(e){return"function"===typeof e?On(e):(e instanceof IDBTransaction&&function(e){if(jn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});jn.set(e,t)}(e),t=e,(In||(In=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Pn):e);var t}function Mn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Mn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Cn.set(t,e)}).catch(()=>{}),Dn.set(t,e),t}(e);if(Rn.has(e))return Rn.get(e);const t=Ln(e);return t!==e&&(Rn.set(e,t),Dn.set(t,e)),t}const Un=e=>Dn.get(e);function Fn(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Mn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Mn(a.result),e.oldVersion,e.newVersion,Mn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const Vn=["get","getKey","getAll","getAllKeys","count"],zn=["put","add","delete","clear"],qn=new Map;function Bn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(qn.get(t))return qn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=zn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Vn.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return qn.set(t,i),i}Pn=(e=>({...e,get:(t,n,r)=>Bn(t,n)||e.get(t,n,r),has:(t,n)=>!!Bn(t,n)||e.has(t,n)}))(Pn);class $n{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Hn="@firebase/app",Wn="0.10.13",Kn=new En("@firebase/app"),Gn="@firebase/app-compat",Qn="@firebase/analytics-compat",Yn="@firebase/analytics",Jn="@firebase/app-check-compat",Xn="@firebase/app-check",Zn="@firebase/auth",er="@firebase/auth-compat",tr="@firebase/database",nr="@firebase/data-connect",rr="@firebase/database-compat",sr="@firebase/functions",ir="@firebase/functions-compat",ar="@firebase/installations",or="@firebase/installations-compat",lr="@firebase/messaging",cr="@firebase/messaging-compat",ur="@firebase/performance",dr="@firebase/performance-compat",hr="@firebase/remote-config",fr="@firebase/remote-config-compat",pr="@firebase/storage",mr="@firebase/storage-compat",gr="@firebase/firestore",yr="@firebase/vertexai-preview",vr="@firebase/firestore-compat",wr="firebase",br="[DEFAULT]",xr={[Hn]:"fire-core",[Gn]:"fire-core-compat",[Yn]:"fire-analytics",[Qn]:"fire-analytics-compat",[Xn]:"fire-app-check",[Jn]:"fire-app-check-compat",[Zn]:"fire-auth",[er]:"fire-auth-compat",[tr]:"fire-rtdb",[nr]:"fire-data-connect",[rr]:"fire-rtdb-compat",[sr]:"fire-fn",[ir]:"fire-fn-compat",[ar]:"fire-iid",[or]:"fire-iid-compat",[lr]:"fire-fcm",[cr]:"fire-fcm-compat",[ur]:"fire-perf",[dr]:"fire-perf-compat",[hr]:"fire-rc",[fr]:"fire-rc-compat",[pr]:"fire-gcs",[mr]:"fire-gcs-compat",[gr]:"fire-fst",[vr]:"fire-fst-compat",[yr]:"fire-vertex","fire-js":"fire-js",[wr]:"fire-js-all"},_r=new Map,kr=new Map,Sr=new Map;function Nr(e,t){try{e.container.addComponent(t)}catch(Re){Kn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Re)}}function Er(e){const t=e.name;if(Sr.has(t))return Kn.debug(`There were multiple attempts to register component ${t}.`),!1;Sr.set(t,e);for(const n of _r.values())Nr(n,e);for(const n of kr.values())Nr(n,e);return!0}function Ir(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tr(e){return void 0!==e.settings}const Cr=new sn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class jr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}const Ar="10.14.1";function Rr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:br,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Cr.create("bad-app-name",{appName:String(s)});if(n||(n=Gt()),!n)throw Cr.create("no-options");const i=_r.get(s);if(i){if(on(n,i.options)&&on(r,i.config))return i;throw Cr.create("duplicate-app",{appName:s})}const a=new wn(s);for(const l of Sr.values())a.addComponent(l);const o=new jr(n,r,a);return _r.set(s,o),o}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br;const t=_r.get(e);if(!t&&e===br&&Gt())return Rr();if(!t)throw Cr.create("no-app",{appName:e});return t}function Pr(e,t,n){var r;let s=null!==(r=xr[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Kn.warn(e.join(" "))}Er(new gn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const Or="firebase-heartbeat-store";let Lr=null;function Mr(){return Lr||(Lr=Fn("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Or)}catch(Re){console.warn(Re)}}}).catch(e=>{throw Cr.create("idb-open",{originalErrorMessage:e.message})})),Lr}async function Ur(e,t){try{const n=(await Mr()).transaction(Or,"readwrite"),r=n.objectStore(Or);await r.put(t,Fr(e)),await n.done}catch(Re){if(Re instanceof rn)Kn.warn(Re.message);else{const t=Cr.create("idb-set",{originalErrorMessage:null===Re||void 0===Re?void 0:Re.message});Kn.warn(t.message)}}}function Fr(e){return`${e.name}!${e.options.appId}`}class Vr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Re){Kn.warn(Re)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=zr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Br(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Br(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=qt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Re){return Kn.warn(Re),""}}}function zr(){return(new Date).toISOString().substring(0,10)}class qr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!tn()&&nn().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Mr()).transaction(Or),n=await t.objectStore(Or).get(Fr(e));return await t.done,n}catch(Re){if(Re instanceof rn)Kn.warn(Re.message);else{const t=Cr.create("idb-get",{originalErrorMessage:null===Re||void 0===Re?void 0:Re.message});Kn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ur(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ur(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Br(e){return qt(JSON.stringify({version:2,heartbeats:e})).length}var $r;$r="",Er(new gn("platform-logger",e=>new $n(e),"PRIVATE")),Er(new gn("heartbeat",e=>new Vr(e),"PRIVATE")),Pr(Hn,Wn,$r),Pr(Hn,Wn,"esm2017"),Pr("fire-js","");Pr("firebase","10.14.1","app");const Hr="@firebase/installations",Wr="0.6.9",Kr=1e4,Gr=`w:${Wr}`,Qr="FIS_v2",Yr=36e5,Jr=new sn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xr(e){return e instanceof rn&&e.code.includes("request-failed")}function Zr(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function es(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ts(e,t){const n=(await t.json()).error;return Jr.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ns(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function rs(e,t){let{refreshToken:n}=t;const r=ns(e);return r.append("Authorization",function(e){return`${Qr} ${e}`}(n)),r}async function ss(e){const t=await e();return t.status>=500&&t.status<600?e():t}function is(e){return new Promise(t=>{setTimeout(t,e)})}const as=/^[cdef][\w-]{21}$/;function os(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return as.test(t)?t:""}catch(e){return""}}function ls(e){return`${e.appName}!${e.appId}`}const cs=new Map;function us(e,t){const n=ls(e);ds(n,t),function(e,t){const n=fs();n&&n.postMessage({key:e,fid:t});ps()}(n,t)}function ds(e,t){const n=cs.get(e);if(n)for(const r of n)r(t)}let hs=null;function fs(){return!hs&&"BroadcastChannel"in self&&(hs=new BroadcastChannel("[Firebase] FID Change"),hs.onmessage=e=>{ds(e.data.key,e.data.fid)}),hs}function ps(){0===cs.size&&hs&&(hs.close(),hs=null)}const ms="firebase-installations-store";let gs=null;function ys(){return gs||(gs=Fn("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ms)}})),gs}async function vs(e,t){const n=ls(e),r=(await ys()).transaction(ms,"readwrite"),s=r.objectStore(ms),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||us(e,t.fid),t}async function ws(e){const t=ls(e),n=(await ys()).transaction(ms,"readwrite");await n.objectStore(ms).delete(t),await n.done}async function bs(e,t){const n=ls(e),r=(await ys()).transaction(ms,"readwrite"),s=r.objectStore(ms),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||us(e,a.fid),a}async function xs(e){let t;const n=await bs(e.appConfig,n=>{const r=function(e){const t=e||{fid:os(),registrationStatus:0};return Ss(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Jr.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=Zr(n),a=ns(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:Qr,appId:n.appId,sdkVersion:Gr},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await ss(()=>fetch(i,c));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:es(e.authToken)}}throw await ts("Create Installation",u)}(e,t);return vs(e.appConfig,n)}catch(Re){throw Xr(Re)&&409===Re.customData.serverCode?await ws(e.appConfig):await vs(e.appConfig,{fid:t.fid,registrationStatus:0}),Re}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:_s(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function _s(e){let t=await ks(e.appConfig);for(;1===t.registrationStatus;)await is(100),t=await ks(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await xs(e);return n||t}return t}function ks(e){return bs(e,e=>{if(!e)throw Jr.create("installation-not-found");return Ss(e)})}function Ss(e){return 1===(t=e).registrationStatus&&t.registrationTime+Kr<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ns(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return`${Zr(e)}/${n}/authTokens:generate`}(n,t),i=rs(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:Gr,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await ss(()=>fetch(s,l));if(c.ok){return es(await c.json())}throw await ts("Generate Auth Token",c)}async function Es(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await bs(e.appConfig,r=>{if(!Ts(r))throw Jr.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Yr}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Is(e.appConfig);for(;1===n.authToken.requestStatus;)await is(100),n=await Is(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Es(e,t):r}(e,n),r;{if(!navigator.onLine)throw Jr.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Ns(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await vs(e.appConfig,r),n}catch(Re){if(!Xr(Re)||401!==Re.customData.serverCode&&404!==Re.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await vs(e.appConfig,n)}else await ws(e.appConfig);throw Re}}(e,n),n}});return t?await t:r.authToken}function Is(e){return bs(e,e=>{if(!Ts(e))throw Jr.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Kr<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Ts(e){return void 0!==e&&2===e.registrationStatus}async function Cs(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await xs(e);t&&await t}(n);return(await Es(n,t)).token}function js(e){return Jr.create("missing-app-config-values",{valueName:e})}const As="installations",Rs=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw js("App Configuration");if(!e.name)throw js("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw js(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ir(t,"heartbeat"),_delete:()=>Promise.resolve()}},Ds=e=>{const t=Ir(e.getProvider("app").getImmediate(),As).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await xs(t);return r?r.catch(console.error):Es(t).catch(console.error),n.fid}(t),getToken:e=>Cs(t,e)}};Er(new gn(As,Rs,"PUBLIC")),Er(new gn("installations-internal",Ds,"PRIVATE")),Pr(Hr,Wr),Pr(Hr,Wr,"esm2017");const Ps="analytics",Os="https://www.googletagmanager.com/gtag/js",Ls=new En("@firebase/analytics"),Ms=new sn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Us(e){if(!e.startsWith(Os)){const t=Ms.create("invalid-gtag-resource",{gtagURL:e});return Ls.warn(t.message),""}return e}function Fs(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Vs(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Us}),r=document.createElement("script"),s=`${Os}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function zs(e,t,n,r){return async function(s){try{for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("event"===s){const[r,s]=a;await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await Fs(n);for(const n of e){const e=r.find(e=>e.measurementId===n),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(Re){Ls.error(Re)}}(e,t,n,r,s)}else if("config"===s){const[s,i]=a;await async function(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const e=(await Fs(n)).find(e=>e.measurementId===s);e&&await t[e.appId]}}catch(Re){Ls.error(Re)}e("config",s,i)}(e,t,n,r,s,i)}else if("consent"===s){const[t,n]=a;e("consent",t,n)}else if("get"===s){const[t,n,r]=a;e("get",t,n,r)}else if("set"===s){const[t]=a;e("set",t)}else e(s,...a)}catch(Re){Ls.error(Re)}}}const qs=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Bs(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function $s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qs,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw Ms.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ms.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Ws;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Hs({appId:r,apiKey:s,measurementId:i},a,o,t)}async function Hs(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qs;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(Ms.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(Re){if(l)return Ls.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===Re||void 0===Re?void 0:Re.message}]`),{appId:o,measurementId:l};throw Re}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:Bs(r)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(i,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Ms.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(o),t}catch(Re){const r=Re;if(!function(e){if(!(e instanceof rn)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(i.deleteThrottleMetadata(o),l)return Ls.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:o,measurementId:l};throw Re}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?pn(s,i.intervalMillis,30):pn(s,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:s+1};return i.setThrottleMetadata(o,u),Ls.debug(`Calling attemptFetch again in ${c} millis`),Hs(e,u,n,i)}}class Ws{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ks,Gs;function Qs(e){Gs=e}function Ys(e){Ks=e}async function Js(e,t,n,r,s,i,a){var o;const l=$s(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ls.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Ls.error(e)),t.push(l);const c=async function(){if(!tn())return Ls.warn(Ms.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await nn()}catch(Re){return Ls.warn(Ms.create("indexeddb-unavailable",{errorInfo:null===Re||void 0===Re?void 0:Re.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Os)&&n.src.includes(e))return n;return null})(i)||Vs(i,u.measurementId),Gs&&(s("consent","default",Gs),Qs(void 0)),s("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),Ks&&(s("set",Ks),Ys(void 0)),u.measurementId}class Xs{constructor(e){this.app=e}_delete(){return delete Zs[this.app.options.appId],Promise.resolve()}}let Zs={},ei=[];const ti={};let ni,ri,si="dataLayer",ii="gtag",ai=!1;function oi(){const e=[];if(Zt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Ms.create("invalid-analytics-context",{errorInfo:t});Ls.warn(n.message)}}function li(e,t,n){oi();const r=e.options.appId;if(!r)throw Ms.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ms.create("no-api-key");Ls.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zs[r])throw Ms.create("already-exists",{id:r});if(!ai){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(si);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(i=window[s]),window[s]=zs(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(Zs,ei,ti,si,ii);ri=e,ni=t,ai=!0}Zs[r]=Js(e,ei,ti,t,ni,si,n);return new Xs(e)}function ci(e,t,n,r){e=mn(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(ri,Zs[e.app.options.appId],t,n,r).catch(e=>Ls.error(e))}const ui="@firebase/analytics",di="0.10.8";Er(new gn(Ps,(e,t)=>{let{options:n}=t;return li(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),Er(new gn("analytics-internal",function(e){try{const t=e.getProvider(Ps).getImmediate();return{logEvent:(e,n,r)=>ci(t,e,n,r)}}catch(Re){throw Ms.create("interop-component-reg-failed",{reason:Re})}},"PRIVATE")),Pr(ui,di),Pr(ui,di,"esm2017");function hi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function fi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pi=fi,mi=new sn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gi=new En("@firebase/auth");function yi(e){if(gi.logLevel<=xn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gi.error(`Auth (${Ar}): ${e}`,...n)}}function vi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw _i(e,...n)}function wi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _i(e,...n)}function bi(e,t,n){const r=Object.assign(Object.assign({},pi()),{[t]:n});return new sn("auth","Firebase",r).create(t,{appName:e.name})}function xi(e){return bi(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return mi.create(e,...n)}function ki(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw _i(t,...r)}}function Si(e){const t="INTERNAL ASSERTION FAILED: "+e;throw yi(t),new Error(t)}function Ni(e,t){e||Si(t)}function Ei(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ii(){return"http:"===Ti()||"https:"===Ti()}function Ti(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ci{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ii()||Zt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ji(e,t){Ni(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Ai{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ri={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Di=new Ci(3e4,6e4);function Pi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Oi(e,t,n,r){return Li(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=cn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Ai.fetch()(Ui(e,e.config.apiHost,n,a),l)})}async function Li(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ri),t);try{const t=new Vi(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw zi(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw zi(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw zi(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw zi(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw bi(e,o,a);vi(e,o)}}catch(Re){if(Re instanceof rn)throw Re;vi(e,"network-request-failed",{message:String(Re)})}}async function Mi(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Oi(e,t,n,r,s);return"mfaPendingCredential"in i&&vi(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Ui(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?ji(e.config,s):`${e.config.apiScheme}://${s}`}function Fi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vi{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(wi(this.auth,"network-request-failed")),Di.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wi(e,t,r);return s.customData._tokenResponse=n,s}function qi(e){return void 0!==e&&void 0!==e.enterprise}class Bi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function $i(e,t){return Oi(e,"GET","/v2/recaptchaConfig",Pi(e,t))}async function Hi(e,t){return Oi(e,"POST","/v1/accounts:lookup",t)}function Wi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Re){}}function Ki(e){return 1e3*Number(e)}function Gi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return yi("JWT malformed, contained fewer than 3 sections"),null;try{const e=Bt(n);return e?JSON.parse(e):(yi("Failed to decode base64 JWT payload"),null)}catch(Re){return yi("Caught error parsing JWT payload as JSON",null===Re||void 0===Re?void 0:Re.toString()),null}}function Qi(e){const t=Gi(e);return ki(t,"internal-error"),ki("undefined"!==typeof t.exp,"internal-error"),ki("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Yi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Re){throw Re instanceof rn&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Re)&&e.auth.currentUser===e&&await e.auth.signOut(),Re}}class Ji{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Re){return void("auth/network-request-failed"===(null===Re||void 0===Re?void 0:Re.code)&&this.schedule(!0))}this.schedule()}}class Xi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wi(this.lastLoginAt),this.creationTime=Wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zi(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Yi(e,Hi(n,{idToken:r}));ki(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?ea(i.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Xi(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function ea(e){return e.map(e=>{var{providerId:t}=e,n=hi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ki(e.idToken,"internal-error"),ki("undefined"!==typeof e.idToken,"internal-error"),ki("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Qi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ki(0!==e.length,"internal-error");const t=Qi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ki(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Li(e,{},async()=>{const n=cn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Ui(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ai.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new ta;return n&&(ki("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(ki("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(ki("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ta,this.toJSON())}_performRefresh(){return Si("not implemented")}}function na(e,t){ki("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ra{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=hi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ji(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xi(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Yi(this,this.stsTokenManager.getToken(this.auth,e));return ki(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=mn(e),r=await n.getIdToken(t),s=Gi(r);ki(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Wi(Ki(s.auth_time)),issuedAtTime:Wi(Ki(s.iat)),expirationTime:Wi(Ki(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=mn(e);await Zi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ki(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ra(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ki(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Zi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await Yi(this,async function(e,t){return Oi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:x,stsTokenManager:_}=t;ki(v&&_,e,"internal-error");const k=ta.fromJSON(this.name,_);ki("string"===typeof v,e,"internal-error"),na(u,e.name),na(d,e.name),ki("boolean"===typeof w,e,"internal-error"),ki("boolean"===typeof b,e,"internal-error"),na(h,e.name),na(f,e.name),na(p,e.name),na(m,e.name),na(g,e.name),na(y,e.name);const S=new ra({uid:v,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ta;r.updateFromServerResponse(t);const s=new ra({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Zi(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ki(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?ea(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new ta;a.updateFromIdToken(n);const o=new ra({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Xi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const sa=new Map;function ia(e){Ni(e instanceof Function,"Expected a class definition");let t=sa.get(e);return t?(Ni(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sa.set(e,t),t)}class aa{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aa.type="NONE";const oa=aa;function la(e,t,n){return`firebase:${e}:${t}:${n}`}class ca{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=la(this.userKey,r.apiKey,s),this.fullPersistenceKey=la("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ra._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ca(ia(oa),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ia(oa);const i=la(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=ra._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new ca(s,e,n)):new ca(s,e,n)}}function ua(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pa(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(da(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ga(t))return"Blackberry";if(ya(t))return"Webos";if(ha(t))return"Safari";if((t.includes("chrome/")||fa(t))&&!t.includes("edge/"))return"Chrome";if(ma(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/firefox\//i.test(e)}function ha(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/crios\//i.test(e)}function pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/iemobile/i.test(e)}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/android/i.test(e)}function ga(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/blackberry/i.test(e)}function ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/webos/i.test(e)}function va(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wa(){return function(){const e=Xt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt();return va(e)||ma(e)||ya(e)||ga(e)||/windows phone/i.test(e)||pa(e)}function xa(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ua(Xt());break;case"Worker":t=`${ua(Xt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}class _a{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Re){r(Re)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Re){t.reverse();for(const n of t)try{n()}catch(mt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Re||void 0===Re?void 0:Re.message})}}}class ka{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Sa{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ea(this),this.idTokenSubscription=new Ea(this),this.beforeStateQueue=new _a(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Re){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Hi(this,{idToken:e}),n=await ra._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Tr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Re){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Re))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ki(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Re){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zi(e)}catch(Re){if("auth/network-request-failed"!==(null===Re||void 0===Re?void 0:Re.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(xi(this));const t=e?mn(e):null;return t&&ki(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ki(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Oi(e,"GET","/v2/passwordPolicy",Pi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ka(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Oi(e,"POST","/v2/accounts:revokeToken",Pi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;ki(t,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ki(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ki(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(gi.logLevel<=xn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gi.warn(`Auth (${Ar}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Na(e){return mn(e)}class Ea{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new hn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ki(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ia={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ta(e){return Ia.loadJS(e)}function Ca(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ja{constructor(e){this.type="recaptcha-enterprise",this.auth=Na(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;qi(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{$i(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Bi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&qi(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ia.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Ta(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Aa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new ja(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ra(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Aa(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Aa(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Da(e,t,n){const r=Na(e);ki(r._canInitEmulator,r,"emulator-config-failed"),ki(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Pa(t),{host:a,port:o}=function(e){const t=Pa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Oa(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Oa(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pa(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Oa(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class La{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,t){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}}async function Ma(e,t){return Oi(e,"POST","/v1/accounts:signUp",t)}async function Ua(e,t){return Mi(e,"POST","/v1/accounts:signInWithPassword",Pi(e,t))}class Fa extends La{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Fa(e,t,"password")}static _fromEmailAndCode(e,t){return new Fa(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ra(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ua);case"emailLink":return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithEmailLink",Pi(e,t))}(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ra(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ma);case"emailLink":return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithEmailLink",Pi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Va(e,t){return Mi(e,"POST","/v1/accounts:signInWithIdp",Pi(e,t))}class za extends La{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=hi(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new za(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Va(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Va(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cn(t)}return e}}const qa={USER_NOT_FOUND:"user-not-found"};class Ba extends La{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ba({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ba({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithPhoneNumber",Pi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mi(e,"POST","/v1/accounts:signInWithPhoneNumber",Pi(e,t));if(n.temporaryProof)throw zi(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithPhoneNumber",Pi(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),qa)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Ba({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class $a{constructor(e){var t,n,r,s,i,a;const o=un(dn(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);ki(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=un(dn(e)).link,n=t?un(dn(t)).deep_link_id:null,r=un(dn(e)).deep_link_id;return(r?un(dn(r)).link:null)||r||n||t||e}(e);try{return new $a(t)}catch(n){return null}}}class Ha{constructor(){this.providerId=Ha.PROVIDER_ID}static credential(e,t){return Fa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$a.parseLink(t);return ki(n,"argument-error"),Fa._fromEmailAndCode(e,n.code,n.tenantId)}}Ha.PROVIDER_ID="password",Ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ka extends Wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ga extends Ka{constructor(){super("facebook.com")}static credential(e){return za._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ga.credential(t.oauthAccessToken)}catch(n){return null}}}Ga.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ga.PROVIDER_ID="facebook.com";class Qa extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return za._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Qa.credential(n,r)}catch(s){return null}}}Qa.GOOGLE_SIGN_IN_METHOD="google.com",Qa.PROVIDER_ID="google.com";class Ya extends Ka{constructor(){super("github.com")}static credential(e){return za._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ya.credential(t.oauthAccessToken)}catch(n){return null}}}Ya.GITHUB_SIGN_IN_METHOD="github.com",Ya.PROVIDER_ID="github.com";class Ja extends Ka{constructor(){super("twitter.com")}static credential(e,t){return za._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ja.credential(n,r)}catch(s){return null}}}async function Xa(e,t){return Mi(e,"POST","/v1/accounts:signUp",Pi(e,t))}Ja.TWITTER_SIGN_IN_METHOD="twitter.com",Ja.PROVIDER_ID="twitter.com";class Za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ra._fromIdTokenResponse(e,n,r),i=eo(n);return new Za({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=eo(n);return new Za({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function eo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class to extends rn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,to.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new to(e,t,n,r)}}function no(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw to._fromErrorAndOperation(e,n,t,r);throw n})}async function ro(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Yi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Za._forOperation(e,"link",r)}async function so(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Tr(r.app))return Promise.reject(xi(r));const s="reauthenticate";try{const i=await Yi(e,no(r,s,t,e),n);ki(i.idToken,r,"internal-error");const a=Gi(i.idToken);ki(a,r,"internal-error");const{sub:o}=a;return ki(e.uid===o,r,"user-mismatch"),Za._forOperation(e,s,i)}catch(Re){throw"auth/user-not-found"===(null===Re||void 0===Re?void 0:Re.code)&&vi(r,"user-mismatch"),Re}}async function io(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Tr(e.app))return Promise.reject(xi(e));const r="signIn",s=await no(e,r,t),i=await Za._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function ao(e,t){return io(Na(e),t)}async function oo(e){const t=Na(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function lo(e,t,n){if(Tr(e.app))return Promise.reject(xi(e));const r=Na(e),s=Ra(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xa),i=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&oo(e),t}),a=await Za._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}new WeakMap;const co="__sak";class uo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(co,"1"),this.storage.removeItem(co),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ho extends uo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ba(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);wa()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ho.type="LOCAL";const fo=ho;class po extends uo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}po.type="SESSION";const mo=po;class go{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new go(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function yo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}go.receivers=[];class vo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=yo("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function wo(){return window}function bo(){return"undefined"!==typeof wo().WorkerGlobalScope&&"function"===typeof wo().importScripts}const xo="firebaseLocalStorageDb",_o="firebaseLocalStorage",ko="fbase_key";class So{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function No(e,t){return e.transaction([_o],t?"readwrite":"readonly").objectStore(_o)}function Eo(){const e=indexedDB.open(xo,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(_o,{keyPath:ko})}catch(Re){n(Re)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(_o)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(xo);return new So(e).toPromise()}(),t(await Eo()))})})}async function Io(e,t,n){const r=No(e,!0).put({[ko]:t,value:n});return new So(r).toPromise()}function To(e,t){const n=No(e,!0).delete(t);return new So(n).toPromise()}class Co{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Eo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Re){if(t++>3)throw Re;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=go._getInstance(bo()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new vo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eo();return await Io(e,co,"1"),await To(e,co),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Io(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=No(e,!1).get(t),r=await new So(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>To(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=No(e,!1).getAll();return new So(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Co.type="LOCAL";const jo=Co;Ca("rcb"),new Ci(3e4,6e4);const Ao="recaptcha";async function Ro(e,t,n){var r;const s=await n.verify();try{let i;if(ki("string"===typeof s,e,"argument-error"),ki(n.type===Ao,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){ki("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Oi(e,"POST","/v2/accounts/mfaEnrollment:start",Pi(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{ki("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;ki(n,e,"missing-multi-factor-info");const a=await function(e,t){return Oi(e,"POST","/v2/accounts/mfaSignIn:start",Pi(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Oi(e,"POST","/v1/accounts:sendVerificationCode",Pi(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Do{constructor(e){this.providerId=Do.PROVIDER_ID,this.auth=Na(e)}verifyPhoneNumber(e,t){return Ro(this.auth,e,mn(t))}static credential(e,t){return Ba._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Do.credentialFromTaggedObject(t)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ba._fromTokenResponse(n,r):null}}function Po(e,t){return t?ia(t):(ki(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Do.PROVIDER_ID="phone",Do.PHONE_SIGN_IN_METHOD="phone";class Oo extends La{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Lo(e){return io(e.auth,new Oo(e),e.bypassAuthState)}function Mo(e){const{auth:t,user:n}=e;return ki(n,t,"internal-error"),so(n,new Oo(e),e.bypassAuthState)}async function Uo(e){const{auth:t,user:n}=e;return ki(n,t,"internal-error"),ro(n,new Oo(e),e.bypassAuthState)}class Fo{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Re){this.reject(Re)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Re){this.reject(Re)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lo;case"linkViaPopup":case"linkViaRedirect":return Uo;case"reauthViaPopup":case"reauthViaRedirect":return Mo;default:vi(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vo=new Ci(2e3,1e4);class zo extends Fo{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ki(e,this.auth,"internal-error"),e}async onExecution(){Ni(1===this.filter.length,"Popup operations only handle one event");const e=yo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Vo.get())};e()}}zo.currentPopupAction=null;const qo=new Map;class Bo extends Fo{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Wo(t),r=Ho(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Re){e=()=>Promise.reject(Re)}qo.set(this.auth._key(),e)}return this.bypassAuthState||qo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function $o(e,t){qo.set(e._key(),t)}function Ho(e){return ia(e._redirectPersistence)}function Wo(e){return la("pendingRedirect",e.config.apiKey,e.name)}async function Ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Tr(e.app))return Promise.reject(xi(e));const r=Na(e),s=Po(r,t),i=new Bo(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Go{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yo(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(wi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qo(e))}saveEventToCache(e){this.cachedEventUids.add(Qo(e)),this.lastProcessedEventTime=Date.now()}}function Qo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Yo(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Jo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xo=/^https?/;async function Zo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Oi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(el(r))return}catch(n){}vi(e,"unauthorized-domain")}function el(e){const t=Ei(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Xo.test(n))return!1;if(Jo.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const tl=new Ci(3e4,6e4);function nl(){const e=wo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function rl(e){return new Promise((t,n)=>{var r,s,i;function a(){nl(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nl(),n(wi(e,"network-request-failed"))},timeout:tl.get()})}if(null===(s=null===(r=wo().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=wo().gapi)||void 0===i?void 0:i.load)){const t=Ca("iframefcb");return wo()[t]=()=>{gapi.load?a():n(wi(e,"network-request-failed"))},Ta(`${Ia.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw sl=null,e})}let sl=null;const il=new Ci(5e3,15e3),al={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ll(e){const t=e.config;ki(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ji(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ar},s=ol.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${cn(r).slice(1)}`}async function cl(e){const t=await function(e){return sl=sl||rl(e),sl}(e),n=wo().gapi;return ki(n,e,"internal-error"),t.open({where:document.body,url:ll(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:al,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=wi(e,"network-request-failed"),i=wo().setTimeout(()=>{r(s)},il.get());function a(){wo().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const ul={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Re){}}}function hl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ul),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Xt().toLowerCase();n&&(o=fa(c)?"_blank":n),da(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return va(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new dl(null);const d=window.open(t||"",o,u);ki(d,e,"popup-blocked");try{d.focus()}catch(Re){}return new dl(d)}const fl="__/auth/handler",pl="emulator/auth/handler",ml=encodeURIComponent("fac");async function gl(e,t,n,r,s,i){ki(e.config.authDomain,e,"auth-domain-config-required"),ki(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ar,eventId:s};if(t instanceof Wa){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Ka){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${ml}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${fl}`;return ji(t,pl)}(e)}?${cn(o).slice(1)}${c}`}const yl="webStorageSupport";const vl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=Ko,this._overrideRedirectResult=$o}async _openPopup(e,t,n,r){var s;Ni(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return hl(e,await gl(e,t,n,Ei(),r),yo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){wo().location.href=e}(await gl(e,t,n,Ei(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ni(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await cl(e),n=new Go(e);return t.register("authEvent",t=>{ki(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yl,{type:yl},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yl];void 0!==s&&t(!!s),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ba()||ha()||va()}};var wl="@firebase/auth",bl="1.7.9";class xl{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ki(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _l=Qt("authIdTokenMaxAge")||300;let kl=null;var Sl;!function(e){Ia=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=wi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Sl="Browser",Er(new gn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;ki(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Sl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xa(Sl)},c=new Sa(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ia);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Er(new gn("auth-internal",e=>(e=>new xl(e))(Na(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(wl,bl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Sl)),Pr(wl,bl,"esm2017");var Nl,El,Il="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Tl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,El=Tl.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Nl=Tl.Integer=r}).apply("undefined"!==typeof Il?Il:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Cl,jl,Al,Rl,Dl,Pl,Ol,Ll,Ml="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ul={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ml&&Ml];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout(()=>{throw e},0)}function S(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,T=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=s.Promise.resolve(void 0);I=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(Ue){k(Ue)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(Ue){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(Be){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=B(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[$]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[$]=null)):V(e)}}}function J(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;x(t=new D(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&q(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function we(){D.call(this,"c")}d(ve,D),d(we,D);var be={},xe=null;function _e(){return xe=xe||new ne}function ke(e){D.call(this,be.La,e)}function Se(e){const t=_e();re(t,new ke(t))}function Ne(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function Ee(e){const t=_e();re(t,new Ne(t,e))}function Ie(e,t){D.call(this,be.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(ke,D),be.STAT_EVENT="statevent",d(Ne,D),be.Ma="timingevent",d(Ie,D),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Fe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}d(Me,pe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Ae=new Me;var ze={},$e={};function He(e,t,n){e.L=1,e.v=yt(ht(t)),e.m=n,e.P=!0,We(e,null)}function We(e,t){e.F=Date.now(),Qe(e),e.A=ht(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),jt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ve,e.g=vn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ke(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ge(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$e:(n=Number(t.substring(n,r)),isNaN(n)?ze:(r+=1)+n>t.length?$e:(t=t.slice(r,r+n),e.C=r+n,t))}function Qe(e){e.S=Date.now()+e.I,Ye(e,e.I)}function Ye(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function Je(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Xe(e){0==e.j.G||e.J||fn(e.j,e)}function Ze(e){Je(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function et(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||it(n.h,e)))if(!e.K&&it(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Pe){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}cn(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=st(n.h)&&n.ca){try{n.ca()}catch(Pe){}n.ca=void 0}}else mn(n,11)}else if((e.K||n.g==e)&&hn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(at(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=yn(r,r.J?r.ia:null,r.W),a.K){ot(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Je(o),Qe(o)),r.g=a}else ln(r);0<n.i.length&&rn(n)}else"stop"!=c[0]&&"close"!=c[0]||mn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?mn(n,7):en(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(Pe){}}Fe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Yt(e)?t.j():this.Y(e)},Fe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Yt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Jt(this.g)))){this.J||4!=h||7==t||Se(),Je(this);var n=this.g.Z();this.X=n;t:if(Ke(this)){var r=Jt(this.g);e="";var i=r.length,a=4==Yt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ze(this),Xe(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Ze(this),Xe(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,et(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ge(this,o),e==$e){4==h&&(this.s=4,Ee(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==ze){this.s=4,Ee(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),et(this,e)}if(Ke(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),un(d),d.M=!0,Ee(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ze(this),Xe(this)}else je(this.i,this.l,o,null),et(this,o);4==h&&Ze(this),this.o&&!this.J&&(4==h?fn(this.j,this):(this.o=!1,Qe(this)))}else(function(e){const t={};e=(e.g&&2<=Yt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Ze(this),Xe(this)}}}catch(Fl){}},Fe.prototype.cancel=function(){this.J=!0,Ze(this)},Fe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ee(17)),Ze(this),this.s=2,Xe(this)):Ye(this,this.S-e)};var tt=class{constructor(e,t){this.g=e,this.map=t}};function nt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function st(e){return e.h?1:e.g?e.g.size:0}function it(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}nt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.s),this.l=e.l;var t=e.i,n=new Et;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),mt(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,ft(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),pt(this,t[4]),this.l=vt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.h=!1,this.i=new Et(null,this.h))}function ht(e){return new dt(e)}function ft(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function mt(e,t,n){t instanceof Et?(e.i=t,function(e,t){t&&!e.j&&(It(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),jt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=wt(t,St)),e.i=new Et(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(wt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(wt(t,xt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wt(n,"/"==n.charAt(0)?kt:_t,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",wt(n,Nt)),e.join("")};var xt=/[#\/\?@]/g,_t=/[#\?:]/g,kt=/[#\?]/g,St=/[#\?@]/g,Nt=/#/g;function Et(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function It(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Tt(e,t){It(e),t=At(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return It(e),t=At(e,t),e.g.has(t)}function jt(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(At(e,t),h(n)),e.h+=n.length)}function At(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Be){}}function Dt(){this.g=new fe}function Pt(e,t,n){const r=n||"";try{ct(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Re){throw t.push(r+"type="+encodeURIComponent("_badmap")),Re}}function Ot(e){this.l=e.Ub||null,this.j=e.eb||!1}function Lt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ut(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ft(e)}function Ft(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Vt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function qt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Et.prototype).add=function(e,t){It(this),this.i=null,e=At(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){It(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){It(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){It(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(At(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return It(this),this.i=null,Ct(this,e=At(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Ot,pe),Ot.prototype.g=function(){return new Lt(this.l,this.j)},Ot.prototype.i=function(e){return function(){return e}}({}),d(Lt,ne),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ft(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ut(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ft(this)),this.g&&(this.readyState=3,Ft(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ut(this):Ft(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ut(this))},e.Qa=function(e){this.g&&(this.response=e,Ut(this))},e.ga=function(){this.g&&Ut(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(qt,ne);var Bt=/^https?$/i,$t=["POST","PUT"];function Ht(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Wt(e),Gt(e)}function Wt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Yt(e)||2!=e.Z()))if(e.u&&4==Yt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(ut)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Bt.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Yt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Wt(e)}}finally{Gt(e)}}}function Gt(e,t){if(e.g){Qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Re){}}}function Qt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Yt(e){return e.g?e.g.readyState:0}function Jt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xt("baseRetryDelayMs",5e3,e),this.cb=Xt("retryDelaySeedMs",1e4,e),this.Wa=Xt("forwardChannelMaxRetries",2,e),this.wa=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(e&&e.concurrentRequestLimit),this.Da=new Dt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function en(e){if(nn(e),3==e.G){var t=e.U++,n=ht(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new Fe(e,e.j,t)).L=2,t.v=yt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(qe){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Qe(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.u&&(s.clearTimeout(e.u),e.u=null),hn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function rn(e){if(!rt(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||j(),T||(I(),T=!0),C.add(t,e),e.B=0}}function sn(e,t){var n;n=t?t.l:e.U++;const r=ht(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),an(e,r),e.m&&e.o&&zt(r,e.m,e.o),n=new Fe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=on(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),He(n,r,t)}function an(e,t){e.H&&v(e.H,function(e,n){gt(t,n,e)}),e.l&&ct({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Pt(o,e,"req"+n+"_")}catch(Fl){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function ln(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||j(),T||(I(),T=!0),C.add(t,e),e.v=0}}function cn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),pn(e,e.v)),e.v++,!0)}function un(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function dn(e){e.g=new Fe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),an(e,t),e.m&&e.o&&zt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=yt(ht(t)),n.m=null,n.P=!0,We(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!it(e.h,t))return;n=t.D,ot(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=_e(),new Ie(r,n)),rn(e)}else ln(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(st(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&cn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),yt(r),t?function(e,t){const n=new Ce;if(s.Image){const r=new Image;r.onload=u(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Rt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Rt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Rt(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),gn(e),nn(e)}function gn(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new dt(null);r&&ft(a,r),t&&(a.g=t),i&&pt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),an(e,r),r}function vn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new qt(new Ot({eb:n})):new qt(e.pa)).Ha(e.J),t}function wn(){}function bn(){}function xn(e,t){ne.call(this),this.g=new Zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sn(this)}function _n(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){we.call(this),this.status=1}function Sn(e){this.g=e}(e=qt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Be){return void Ht(this,Be)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call($t,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Be){Ht(this,Be)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Gt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gt(this,!0)),qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Kt(this):this.bb())},e.bb=function(){Kt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch(Oe){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Oe){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Zt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=yn(this,null,this.W),rn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Fe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=w(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,s,t),gt(n=ht(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),an(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Vt(i)))+"&"+t:this.m&&zt(n,this.m,i)),at(this.h,s),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),s.T=!0,He(s,n,null)):He(s,n,t),this.G=2}}else 3==this.G&&(e?sn(this,e):0==this.i.length||rt(this.h)||sn(this))},e.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),tn(this),dn(this))},e.Za=function(){null!=this.C&&(this.C=null,tn(this),cn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},bn.prototype.g=function(e,t){return new xn(e,t)},d(xn,ne),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){en(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new tt(t.Ya++,e)),3==t.G&&rn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,xn.aa.N.call(this)},d(_n,ve),d(kn,we),d(Sn,wn),Sn.prototype.ua=function(){re(this.g,"a")},Sn.prototype.ta=function(e){re(this.g,new _n(e))},Sn.prototype.sa=function(e){re(this.g,new kn)},Sn.prototype.ra=function(){re(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Ll=Ul.createWebChannelTransport=function(){return new bn},Ol=Ul.getStatEventTarget=function(){return _e()},Pl=Ul.Event=be,Dl=Ul.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Rl=Ul.ErrorCode=De,Le.COMPLETE="complete",Al=Ul.EventType=Le,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,jl=Ul.WebChannel=ge,Ul.FetchXmlHttpFactory=Ot,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,Cl=Ul.XhrIo=qt}).apply("undefined"!==typeof Ml?Ml:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Fl="@firebase/firestore";class Vl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vl.UNAUTHENTICATED=new Vl(null),Vl.GOOGLE_CREDENTIALS=new Vl("google-credentials-uid"),Vl.FIRST_PARTY=new Vl("first-party-uid"),Vl.MOCK_USER=new Vl("mock-user");let zl="10.14.0";const ql=new En("@firebase/firestore");function Bl(){return ql.logLevel}function $l(e){if(ql.logLevel<=xn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Kl);ql.debug(`Firestore (${zl}): ${e}`,...s)}}function Hl(e){if(ql.logLevel<=xn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Kl);ql.error(`Firestore (${zl}): ${e}`,...s)}}function Wl(e){if(ql.logLevel<=xn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Kl);ql.warn(`Firestore (${zl}): ${e}`,...s)}}function Kl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(De){return e}}function Gl(){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Hl(e),new Error(e)}function Ql(e,t){e||Gl()}function Yl(e,t){return e}const Jl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xl extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ec{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vl.UNAUTHENTICATED))}shutdown(){}}class nc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rc{constructor(e){this.t=e,this.currentUser=Vl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ql(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Zl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zl,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{$l("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):($l("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zl)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?($l("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ql("string"==typeof t.accessToken),new ec(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ql(null===e||"string"==typeof e),new Vl(e)}}class sc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Vl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ic{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new sc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Vl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ac{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ql(void 0===this.o);const n=e=>{null!=e.error&&$l("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,$l("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{$l("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):$l("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ql("string"==typeof e.token),this.R=e.token,new ac(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=lc(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function uc(e,t){return e<t?-1:e>t?1:0}function dc(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class hc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xl(Jl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xl(Jl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xl(Jl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xl(Jl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hc.fromMillis(Date.now())}static fromDate(e){return hc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?uc(this.nanoseconds,e.nanoseconds):uc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fc(e)}static min(){return new fc(new hc(0,0))}static max(){return new fc(new hc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Gl(),void 0===n?n=e.length-t:n>e.length-t&&Gl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mc extends pc{construct(e,t,n){return new mc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Xl(Jl.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new mc(e)}static emptyPath(){return new mc([])}}const gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yc extends pc{construct(e,t,n){return new yc(e,t,n)}static isValidIdentifier(e){return gc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Xl(Jl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xl(Jl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xl(Jl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Xl(Jl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yc(t)}static emptyPath(){return new yc([])}}class vc{constructor(e){this.path=e}static fromPath(e){return new vc(mc.fromString(e))}static fromName(e){return new vc(mc.fromString(e).popFirst(5))}static empty(){return new vc(mc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vc(new mc(e.slice()))}}class wc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}wc.UNKNOWN_ID=-1;function bc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=fc.fromTimestamp(1e9===r?new hc(n+1,0):new hc(n,r));return new _c(s,vc.empty(),t)}function xc(e){return new _c(e.readTime,e.key,-1)}class _c{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _c(fc.min(),vc.empty(),-1)}static max(){return new _c(fc.max(),vc.empty(),-1)}}function kc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=vc.comparator(e.documentKey,t.documentKey),0!==n?n:uc(e.largestBatchId,t.largestBatchId))}const Sc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ec(e){if(e.code!==Jl.FAILED_PRECONDITION||e.message!==Sc)throw e;$l("LocalStore","Unexpectedly lost primary lease")}class Ic{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Gl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ic((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ic?t:Ic.resolve(t)}catch(e){return Ic.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ic.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ic.reject(t)}static resolve(e){return new Ic((t,n)=>{t(e)})}static reject(e){return new Ic((t,n)=>{n(e)})}static waitFor(e){return new Ic((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ic.resolve(!1);for(const n of e)t=t.next(e=>e?Ic.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ic((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ic((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Tc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cc(e){return"IndexedDbTransactionError"===e.name}class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ac(e){return null==e}function Rc(e){return 0===e&&1/e==-1/0}function Dc(e){return"number"==typeof e&&Number.isInteger(e)&&!Rc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}jc.oe=-1;const Pc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lc=Oc,Mc=[...Lc,"indexConfiguration","indexState","indexEntries"];function Uc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class zc{constructor(e,t){this.comparator=e,this.root=t||Bc.EMPTY}insert(e,t){return new zc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bc.BLACK,null,null))}remove(e){return new zc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bc{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Bc.RED,this.left=null!=r?r:Bc.EMPTY,this.right=null!=s?s:Bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Bc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Bc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Gl();if(this.right.isRed())throw Gl();const e=this.left.check();if(e!==this.right.check())throw Gl();return e+(this.isRed()?0:1)}}Bc.EMPTY=null,Bc.RED=!0,Bc.BLACK=!1,Bc.EMPTY=new class{constructor(){this.size=0}get key(){throw Gl()}get value(){throw Gl()}get color(){throw Gl()}get left(){throw Gl()}get right(){throw Gl()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Bc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $c{constructor(e){this.comparator=e,this.data=new zc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hc(this.data.getIterator())}getIteratorFrom(e){return new Hc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof $c))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $c(this.comparator);return t.data=e,t}}class Hc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Wc{constructor(e){this.fields=e,e.sort(yc.comparator)}static empty(){return new Wc([])}unionWith(e){let t=new $c(yc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Wc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Kc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Kc("Invalid base64 string: "+e):e}}(e);return new Gc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Gc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return uc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gc.EMPTY_BYTE_STRING=new Gc("");const Qc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(e){if(Ql(!!e),"string"==typeof e){let t=0;const n=Qc.exec(e);if(Ql(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jc(e.seconds),nanos:Jc(e.nanos)}}function Jc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xc(e){return"string"==typeof e?Gc.fromBase64String(e):Gc.fromUint8Array(e)}function Zc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eu(e){const t=e.mapValue.fields.__previous_value__;return Zc(t)?eu(t):t}function tu(e){const t=Yc(e.mapValue.fields.__local_write_time__.timestampValue);return new hc(t.seconds,t.nanos)}class nu{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class ru{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ru("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}const su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function iu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zc(e)?4:xu(e)?9007199254740991:wu(e)?10:11:Gl()}function au(e,t){if(e===t)return!0;const n=iu(e);if(n!==iu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tu(e).isEqual(tu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Yc(e.timestampValue),r=Yc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xc(e.bytesValue).isEqual(Xc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jc(e.geoPointValue.latitude)===Jc(t.geoPointValue.latitude)&&Jc(e.geoPointValue.longitude)===Jc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jc(e.integerValue)===Jc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jc(e.doubleValue),r=Jc(t.doubleValue);return n===r?Rc(n)===Rc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dc(e.arrayValue.values||[],t.arrayValue.values||[],au);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uc(n)!==Uc(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!au(n[s],r[s])))return!1;return!0}(e,t);default:return Gl()}}function ou(e,t){return void 0!==(e.values||[]).find(e=>au(e,t))}function lu(e,t){if(e===t)return 0;const n=iu(e),r=iu(t);if(n!==r)return uc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return uc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jc(e.integerValue||e.doubleValue),r=Jc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return cu(e.timestampValue,t.timestampValue);case 4:return cu(tu(e),tu(t));case 5:return uc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xc(e),r=Xc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=uc(n[s],r[s]);if(0!==e)return e}return uc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=uc(Jc(e.latitude),Jc(t.latitude));return 0!==n?n:uc(Jc(e.longitude),Jc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return uu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=uc((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:uu(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===su.mapValue&&t===su.mapValue)return 0;if(e===su.mapValue)return 1;if(t===su.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=uc(r[a],i[a]);if(0!==e)return e;const t=lu(n[r[a]],s[i[a]]);if(0!==t)return t}return uc(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Gl()}}function cu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return uc(e,t);const n=Yc(e),r=Yc(t),s=uc(n.seconds,r.seconds);return 0!==s?s:uc(n.nanos,r.nanos)}function uu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=lu(n[s],r[s]);if(e)return e}return uc(n.length,r.length)}function du(e){return hu(e)}function hu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Yc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return vc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${hu(e.fields[s])}`;return n+"}"}(e.mapValue):Gl()}function fu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function pu(e){return!!e&&"integerValue"in e}function mu(e){return!!e&&"arrayValue"in e}function gu(e){return!!e&&"nullValue"in e}function yu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vu(e){return!!e&&"mapValue"in e}function wu(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=bu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class _u{constructor(e){this.value=e}static empty(){return new _u({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(t)}setAll(e){let t=yc.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=bu(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());vu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return au(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new _u(bu(this.value))}}function ku(e){const t=[];return Fc(e.fields,(e,n)=>{const r=new yc([e]);if(vu(n)){const e=ku(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Wc(t)}class Su{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Su(e,0,fc.min(),fc.min(),fc.min(),_u.empty(),0)}static newFoundDocument(e,t,n,r){return new Su(e,1,t,fc.min(),n,r,0)}static newNoDocument(e,t){return new Su(e,2,t,fc.min(),fc.min(),_u.empty(),0)}static newUnknownDocument(e,t){return new Su(e,3,t,fc.min(),fc.min(),_u.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_u.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_u.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Su&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Su(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}function Eu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?vc.comparator(vc.fromName(a.referenceValue),n.key):lu(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Iu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!au(e.position[n],t.position[n]))return!1;return!0}class Tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Cu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ju{}class Au extends ju{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fu(e,t,n):"array-contains"===t?new Bu(e,n):"in"===t?new $u(e,n):"not-in"===t?new Hu(e,n):"array-contains-any"===t?new Wu(e,n):new Au(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Vu(e,n):new zu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lu(t,this.value)):null!==t&&iu(this.value)===iu(t)&&this.matchesComparison(lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Gl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ru extends ju{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ru(e,t)}matches(e){return Du(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Du(e){return"and"===e.op}function Pu(e){return Ou(e)&&Du(e)}function Ou(e){for(const t of e.filters)if(t instanceof Ru)return!1;return!0}function Lu(e){if(e instanceof Au)return e.field.canonicalString()+e.op.toString()+du(e.value);if(Pu(e))return e.filters.map(e=>Lu(e)).join(",");{const t=e.filters.map(e=>Lu(e)).join(",");return`${e.op}(${t})`}}function Mu(e,t){return e instanceof Au?function(e,t){return t instanceof Au&&e.op===t.op&&e.field.isEqual(t.field)&&au(e.value,t.value)}(e,t):e instanceof Ru?function(e,t){return t instanceof Ru&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Mu(n,t.filters[r]),!0)}(e,t):void Gl()}function Uu(e){return e instanceof Au?function(e){return`${e.field.canonicalString()} ${e.op} ${du(e.value)}`}(e):e instanceof Ru?function(e){return e.op.toString()+" {"+e.getFilters().map(Uu).join(" ,")+"}"}(e):"Filter"}class Fu extends Au{constructor(e,t,n){super(e,t,n),this.key=vc.fromName(n.referenceValue)}matches(e){const t=vc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vu extends Au{constructor(e,t){super(e,"in",t),this.keys=qu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zu extends Au{constructor(e,t){super(e,"not-in",t),this.keys=qu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>vc.fromName(e.referenceValue))}class Bu extends Au{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mu(t)&&ou(t.arrayValue,this.value)}}class $u extends Au{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ou(this.value.arrayValue,t)}}class Hu extends Au{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ou(this.value.arrayValue,t)}}class Wu extends Au{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ou(this.value.arrayValue,e))}}class Ku{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Gu(e){return new Ku(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Qu(e){const t=Yl(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Lu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ac(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>du(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>du(e)).join(",")),t.ue=e}return t.ue}function Yu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Cu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Iu(e.startAt,t.startAt)&&Iu(e.endAt,t.endAt)}function Ju(e){return vc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Xu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zu(e,t,n,r,s,i,a,o){return new Xu(e,t,n,r,s,i,a,o)}function ed(e){return new Xu(e)}function td(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nd(e){return null!==e.collectionGroup}function rd(e){const t=Yl(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new $c(yc.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Tu(r,n))}),e.has(yc.keyField().canonicalString())||t.ce.push(new Tu(yc.keyField(),n))}return t.ce}function sd(e){const t=Yl(e);return t.le||(t.le=id(t,rd(e))),t.le}function id(e,t){if("F"===e.limitType)return Gu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Tu(e.field,t)});const n=e.endAt?new Nu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nu(e.startAt.position,e.startAt.inclusive):null;return Gu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ad(e,t){const n=e.filters.concat([t]);return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function od(e,t,n){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ld(e,t){return Yu(sd(e),sd(t))&&e.limitType===t.limitType}function cd(e){return`${Qu(sd(e))}|lt:${e.limitType}`}function ud(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Uu(e)).join(", ")}]`),Ac(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>du(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>du(e)).join(",")),`Target(${t})`}(sd(e))}; limitType=${e.limitType})`}function dd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of rd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Eu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,rd(e),t))&&!(e.endAt&&!function(e,t,n){const r=Eu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,rd(e),t))}(e,t)}function hd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fd(e){return(t,n)=>{let r=!1;for(const s of rd(e)){const e=pd(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function pd(e,t,n){const r=e.field.isKeyField()?vc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?lu(r,s):Gl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Gl()}}class md{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fc(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Vc(this.inner)}size(){return this.innerSize}}const gd=new zc(vc.comparator);function yd(){return gd}const vd=new zc(vc.comparator);function wd(){let e=vd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function bd(e){let t=vd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function xd(){return kd()}function _d(){return kd()}function kd(){return new md(e=>e.toString(),(e,t)=>e.isEqual(t))}const Sd=new zc(vc.comparator),Nd=new $c(vc.comparator);function Ed(){let e=Nd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Id=new $c(uc);function Td(){return Id}function Cd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(t)?"-0":t}}function jd(e){return{integerValue:""+e}}function Ad(e,t){return Dc(t)?jd(t):Cd(e,t)}class Rd{constructor(){this._=void 0}}function Dd(e,t,n){return e instanceof Ld?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zc(t)&&(t=eu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Md?Ud(e,t):e instanceof Fd?Vd(e,t):function(e,t){const n=Od(e,t),r=qd(n)+qd(e.Pe);return pu(n)&&pu(e.Pe)?jd(r):Cd(e.serializer,r)}(e,t)}function Pd(e,t,n){return e instanceof Md?Ud(e,t):e instanceof Fd?Vd(e,t):n}function Od(e,t){return e instanceof zd?function(e){return pu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ld extends Rd{}class Md extends Rd{constructor(e){super(),this.elements=e}}function Ud(e,t){const n=Bd(t);for(const r of e.elements)n.some(e=>au(e,r))||n.push(r);return{arrayValue:{values:n}}}class Fd extends Rd{constructor(e){super(),this.elements=e}}function Vd(e,t){let n=Bd(t);for(const r of e.elements)n=n.filter(e=>!au(e,r));return{arrayValue:{values:n}}}class zd extends Rd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function qd(e){return Jc(e.integerValue||e.doubleValue)}function Bd(e){return mu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $d{constructor(e,t){this.field=e,this.transform=t}}class Hd{constructor(e,t){this.version=e,this.transformResults=t}}class Wd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wd}static exists(e){return new Wd(void 0,e)}static updateTime(e){return new Wd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Gd{}function Qd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ih(e.key,Wd.none()):new eh(e.key,e.data,Wd.none());{const n=e.data,r=_u.empty();let s=new $c(yc.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new th(e.key,r,new Wc(s.toArray()),Wd.none())}}function Yd(e,t,n){e instanceof eh?function(e,t,n){const r=e.value.clone(),s=rh(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof th?function(e,t,n){if(!Kd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rh(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(nh(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Jd(e,t,n,r){return e instanceof eh?function(e,t,n,r){if(!Kd(e.precondition,t))return n;const s=e.value.clone(),i=sh(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof th?function(e,t,n,r){if(!Kd(e.precondition,t))return n;const s=sh(e.fieldTransforms,r,t),i=t.data;return i.setAll(nh(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Kd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Od(r.transform,e||null);null!=s&&(null===n&&(n=_u.empty()),n.set(r.field,s))}return n||null}function Zd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&dc(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Md&&t instanceof Md||e instanceof Fd&&t instanceof Fd?dc(e.elements,t.elements,au):e instanceof zd&&t instanceof zd?au(e.Pe,t.Pe):e instanceof Ld&&t instanceof Ld}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class eh extends Gd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class th extends Gd{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function nh(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function rh(e,t,n){const r=new Map;Ql(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Pd(a,o,n[s]))}return r}function sh(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Dd(e,i,t))}return r}class ih extends Gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ah extends Gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Yd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Jd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Jd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_d();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Qd(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(fc.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ed())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,(e,t)=>Zd(e,t))&&dc(this.baseMutations,e.baseMutations,(e,t)=>Zd(e,t))}}class lh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ql(e.mutations.length===n.length);let r=Sd;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new lh(e,t,n,r)}}class ch{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uh{constructor(e,t){this.count=e,this.unchangedNames=t}}var dh,hh;function fh(e){switch(e){default:return Gl();case Jl.CANCELLED:case Jl.UNKNOWN:case Jl.DEADLINE_EXCEEDED:case Jl.RESOURCE_EXHAUSTED:case Jl.INTERNAL:case Jl.UNAVAILABLE:case Jl.UNAUTHENTICATED:return!1;case Jl.INVALID_ARGUMENT:case Jl.NOT_FOUND:case Jl.ALREADY_EXISTS:case Jl.PERMISSION_DENIED:case Jl.FAILED_PRECONDITION:case Jl.ABORTED:case Jl.OUT_OF_RANGE:case Jl.UNIMPLEMENTED:case Jl.DATA_LOSS:return!0}}function ph(e){if(void 0===e)return Hl("GRPC error has no .code"),Jl.UNKNOWN;switch(e){case dh.OK:return Jl.OK;case dh.CANCELLED:return Jl.CANCELLED;case dh.UNKNOWN:return Jl.UNKNOWN;case dh.DEADLINE_EXCEEDED:return Jl.DEADLINE_EXCEEDED;case dh.RESOURCE_EXHAUSTED:return Jl.RESOURCE_EXHAUSTED;case dh.INTERNAL:return Jl.INTERNAL;case dh.UNAVAILABLE:return Jl.UNAVAILABLE;case dh.UNAUTHENTICATED:return Jl.UNAUTHENTICATED;case dh.INVALID_ARGUMENT:return Jl.INVALID_ARGUMENT;case dh.NOT_FOUND:return Jl.NOT_FOUND;case dh.ALREADY_EXISTS:return Jl.ALREADY_EXISTS;case dh.PERMISSION_DENIED:return Jl.PERMISSION_DENIED;case dh.FAILED_PRECONDITION:return Jl.FAILED_PRECONDITION;case dh.ABORTED:return Jl.ABORTED;case dh.OUT_OF_RANGE:return Jl.OUT_OF_RANGE;case dh.UNIMPLEMENTED:return Jl.UNIMPLEMENTED;case dh.DATA_LOSS:return Jl.DATA_LOSS;default:return Gl()}}(hh=dh||(dh={}))[hh.OK=0]="OK",hh[hh.CANCELLED=1]="CANCELLED",hh[hh.UNKNOWN=2]="UNKNOWN",hh[hh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hh[hh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hh[hh.NOT_FOUND=5]="NOT_FOUND",hh[hh.ALREADY_EXISTS=6]="ALREADY_EXISTS",hh[hh.PERMISSION_DENIED=7]="PERMISSION_DENIED",hh[hh.UNAUTHENTICATED=16]="UNAUTHENTICATED",hh[hh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hh[hh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hh[hh.ABORTED=10]="ABORTED",hh[hh.OUT_OF_RANGE=11]="OUT_OF_RANGE",hh[hh.UNIMPLEMENTED=12]="UNIMPLEMENTED",hh[hh.INTERNAL=13]="INTERNAL",hh[hh.UNAVAILABLE=14]="UNAVAILABLE",hh[hh.DATA_LOSS=15]="DATA_LOSS";let mh=null;function gh(){return new TextEncoder}const yh=new Nl([4294967295,4294967295],0);function vh(e){const t=gh().encode(e),n=new El;return n.update(t),new Uint8Array(n.digest())}function wh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Nl([n,r],0),new Nl([s,i],0)]}class bh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xh(`Invalid padding: ${t}`);if(n<0)throw new xh(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new xh(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new xh(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Nl.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Nl.fromNumber(n)));return 1===r.compare(yh)&&(r=new Nl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=vh(e),[n,r]=wh(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new bh(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=vh(e),[n,r]=wh(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _h{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new _h(fc.min(),r,new zc(uc),yd(),Ed())}}class kh{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new kh(n,t,Ed(),Ed(),Ed())}}class Sh{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Nh{constructor(e,t){this.targetId=e,this.me=t}}class Eh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ih{constructor(){this.fe=0,this.ge=jh(),this.pe=Gc.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ed(),t=Ed(),n=Ed();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Gl()}}),new kh(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=jh()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ql(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Th{constructor(e){this.Le=e,this.Be=new Map,this.ke=yd(),this.qe=Ch(),this.Qe=new zc(uc)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Gl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Ju(s))if(0===n){const e=new vc(s.path);this.Ue(t,e,Su.newNoDocument(e,fc.min()))}else Ql(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==mh||mh.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Xc(n).toUint8Array()}catch(e){if(e instanceof Kc)return Wl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new bh(i,r,s)}catch(e){return Wl(e instanceof xh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Ju(s.target)){const t=new vc(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Su.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Ed();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new _h(e,t,this.Qe,this.ke,n);return this.ke=yd(),this.qe=Ch(),this.Qe=new zc(uc),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ih,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $c(uc),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||$l("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ih),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ch(){return new zc(vc.comparator)}function jh(){return new zc(vc.comparator)}const Ah={asc:"ASCENDING",desc:"DESCENDING"},Rh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dh={and:"AND",or:"OR"};class Ph{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Oh(e,t){return e.useProto3Json||Ac(t)?t:{value:t}}function Lh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Uh(e,t){return Lh(e,t.toTimestamp())}function Fh(e){return Ql(!!e),fc.fromTimestamp(function(e){const t=Yc(e);return new hc(t.seconds,t.nanos)}(e))}function Vh(e,t){return zh(e,t).canonicalString()}function zh(e,t){const n=function(e){return new mc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function qh(e){const t=mc.fromString(e);return Ql(cf(t)),t}function Bh(e,t){return Vh(e.databaseId,t.path)}function $h(e,t){const n=qh(t);if(n.get(1)!==e.databaseId.projectId)throw new Xl(Jl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xl(Jl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vc(Gh(n))}function Hh(e,t){return Vh(e.databaseId,t)}function Wh(e){const t=qh(e);return 4===t.length?mc.emptyPath():Gh(t)}function Kh(e){return new mc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gh(e){return Ql(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qh(e,t,n){return{name:Bh(e,t),fields:n.value.mapValue.fields}}function Yh(e,t){let n;if(t instanceof eh)n={update:Qh(e,t.key,t.value)};else if(t instanceof ih)n={delete:Bh(e,t.key)};else if(t instanceof th)n={update:Qh(e,t.key,t.data),updateMask:lf(t.fieldMask)};else{if(!(t instanceof ah))return Gl();n={verify:Bh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ld)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Md)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zd)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Gl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Gl()}(e,t.precondition)),n}function Jh(e,t){return{documents:[Hh(e,t.path)]}}function Xh(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hh(e,s);const i=function(e){if(0!==e.length)return of(Ru.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:sf(e.field),direction:tf(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Oh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Zh(e){let t=Wh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ql(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=ef(e);return t instanceof Ru&&Pu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Tu(af(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ac(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Nu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Nu(n,t)}(n.endAt)),Zu(t,s,a,i,o,"F",l,c)}function ef(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=af(e.unaryFilter.field);return Au.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=af(e.unaryFilter.field);return Au.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=af(e.unaryFilter.field);return Au.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=af(e.unaryFilter.field);return Au.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Gl()}}(e):void 0!==e.fieldFilter?function(e){return Au.create(af(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ru.create(e.compositeFilter.filters.map(e=>ef(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Gl()}}(e.compositeFilter.op))}(e):Gl()}function tf(e){return Ah[e]}function nf(e){return Rh[e]}function rf(e){return Dh[e]}function sf(e){return{fieldPath:e.canonicalString()}}function af(e){return yc.fromServerFormat(e.fieldPath)}function of(e){return e instanceof Au?function(e){if("=="===e.op){if(yu(e.value))return{unaryFilter:{field:sf(e.field),op:"IS_NAN"}};if(gu(e.value))return{unaryFilter:{field:sf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yu(e.value))return{unaryFilter:{field:sf(e.field),op:"IS_NOT_NAN"}};if(gu(e.value))return{unaryFilter:{field:sf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sf(e.field),op:nf(e.op),value:e.value}}}(e):e instanceof Ru?function(e){const t=e.getFilters().map(e=>of(e));return 1===t.length?t[0]:{compositeFilter:{op:rf(e.op),filters:t}}}(e):Gl()}function lf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function cf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class uf{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fc.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fc.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new uf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new uf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class df{constructor(e){this.ct=e}}function hf(e){const t=Zh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?od(t,t.limit,"L"):t}class ff{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Jc(e.integerValue));else if("doubleValue"in e){const n=Jc(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Rc(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Yc(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?xu(e)?this.dt(t,Number.MAX_SAFE_INTEGER):wu(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Gl()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Jc(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),vc.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}ff.vt=new ff;class pf{constructor(){this.un=new mf}addToCollectionParentIndex(e,t){return this.un.add(t),Ic.resolve()}getCollectionParents(e,t){return Ic.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Ic.resolve()}deleteFieldIndex(e,t){return Ic.resolve()}deleteAllFieldIndexes(e){return Ic.resolve()}createTargetIndexes(e,t){return Ic.resolve()}getDocumentsMatchingTarget(e,t){return Ic.resolve(null)}getIndexType(e,t){return Ic.resolve(0)}getFieldIndexes(e,t){return Ic.resolve([])}getNextCollectionGroupToUpdate(e){return Ic.resolve(null)}getMinOffset(e,t){return Ic.resolve(_c.min())}getMinOffsetFromCollectionGroup(e,t){return Ic.resolve(_c.min())}updateCollectionGroup(e,t,n){return Ic.resolve()}updateIndexEntries(e,t){return Ic.resolve()}}class mf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $c(mc.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new $c(mc.comparator)).toArray()}}new Uint8Array(0);class gf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new gf(e,gf.DEFAULT_COLLECTION_PERCENTILE,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}gf.DEFAULT_COLLECTION_PERCENTILE=10,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gf.DEFAULT=new gf(41943040,gf.DEFAULT_COLLECTION_PERCENTILE,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gf.DISABLED=new gf(-1,0,0);class yf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yf(0)}static kn(){return new yf(-1)}}class vf{constructor(){this.changes=new md(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Su.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ic.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Jd(n.mutation,e,Wc.empty(),hc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ed()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ed();const r=xd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=wd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=xd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ed()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=yd();const i=kd(),a=kd();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof th)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Jd(a.mutation,t,a.mutation.getFieldMask(),hc.now())):i.set(t.key,Wc.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new wf(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=kd();let r=new zc((e,t)=>e-t),s=Ed();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Wc.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Ed()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=_d();l.forEach(e=>{if(!s.has(e)){const r=Qd(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Ic.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return vc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ic.resolve(xd());let a=-1,o=s;return i.next(t=>Ic.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Ic.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Ed())).next(e=>({batchId:a,changes:bd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vc(t)).next(e=>{let t=wd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=wd();return this.indexManager.getCollectionParents(e,s).next(a=>Ic.forEach(a,a=>{const o=function(e,t){return new Xu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Su.newInvalidDocument(r)))});let n=wd();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Jd(i.mutation,r,Wc.empty(),hc.now()),dd(t,r)&&(n=n.insert(e,r))}),n})}}class xf{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Ic.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Fh(e.createTime)}}(t)),Ic.resolve()}getNamedQuery(e,t){return Ic.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:hf(e.bundledQuery),readTime:Fh(e.readTime)}}(t)),Ic.resolve()}}class _f{constructor(){this.overlays=new zc(vc.comparator),this.Ir=new Map}getOverlay(e,t){return Ic.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xd();return Ic.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Ic.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Ic.resolve()}getOverlaysForCollection(e,t,n){const r=xd(),s=t.length+1,i=new vc(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ic.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new zc((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=xd(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=xd(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Ic.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ch(t,n));let s=this.Ir.get(t);void 0===s&&(s=Ed(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class kf{constructor(){this.sessionToken=Gc.EMPTY_BYTE_STRING}getSessionToken(e){return Ic.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ic.resolve()}}class Sf{constructor(){this.Tr=new $c(Nf.Er),this.dr=new $c(Nf.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Nf(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Nf(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new vc(new mc([])),n=new Nf(t,e),r=new Nf(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new vc(new mc([])),n=new Nf(t,e),r=new Nf(t,e+1);let s=Ed();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Nf(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Nf{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return vc.comparator(e.key,t.key)||uc(e.wr,t.wr)}static Ar(e,t){return uc(e.wr,t.wr)||vc.comparator(e.key,t.key)}}class Ef{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $c(Nf.Er)}checkEmpty(e){return Ic.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new oh(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Nf(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ic.resolve(i)}lookupMutationBatch(e,t){return Ic.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return Ic.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ic.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Ic.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Nf(t,0),r=new Nf(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),Ic.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $c(uc);return t.forEach(e=>{const t=new Nf(e,0),r=new Nf(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Ic.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;vc.isDocumentKey(s)||(s=s.child(""));const i=new Nf(new vc(s),0);let a=new $c(uc);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),Ic.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ql(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Ic.forEach(t.mutations,r=>{const s=new Nf(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Nf(t,0),r=this.br.firstAfterOrEqual(n);return Ic.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ic.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class If{constructor(e){this.Mr=e,this.docs=new zc(vc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ic.resolve(n?n.document.mutableCopy():Su.newInvalidDocument(t))}getEntries(e,t){let n=yd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Su.newInvalidDocument(e))}),Ic.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=yd();const i=t.path,a=new vc(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||kc(xc(a),n)<=0||(r.has(a.key)||dd(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Ic.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Gl()}Or(e,t){return Ic.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Tf(this)}getSize(e){return Ic.resolve(this.size)}}class Tf extends vf{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Ic.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Cf{constructor(e){this.persistence=e,this.Nr=new md(e=>Qu(e),Yu),this.lastRemoteSnapshotVersion=fc.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sf,this.targetCount=0,this.kr=yf.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Ic.resolve()}getLastRemoteSnapshotVersion(e){return Ic.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ic.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ic.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Ic.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new yf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Ic.resolve()}updateTargetData(e,t){return this.Kn(t),Ic.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Ic.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ic.waitFor(s).next(()=>r)}getTargetCount(e){return Ic.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Ic.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Ic.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ic.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Ic.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Ic.resolve(n)}containsKey(e,t){return Ic.resolve(this.Br.containsKey(t))}}class jf{constructor(e,t){this.qr={},this.overlays={},this.Qr=new jc(0),this.Kr=!1,this.Kr=!0,this.$r=new kf,this.referenceDelegate=e(this),this.Ur=new Cf(this),this.indexManager=new pf,this.remoteDocumentCache=function(e){return new If(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new df(t),this.Gr=new xf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _f,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Ef(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){$l("MemoryPersistence","Starting transaction:",e);const r=new Af(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Ic.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Af extends Nc{constructor(e){super(),this.currentSequenceNumber=e}}class Rf{constructor(e){this.persistence=e,this.Jr=new Sf,this.Yr=null}static Zr(e){return new Rf(e)}get Xr(){if(this.Yr)return this.Yr;throw Gl()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Ic.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Ic.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Ic.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ic.forEach(this.Xr,n=>{const r=vc.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,fc.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Ic.or([()=>Ic.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Df{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Ed(),r=Ed();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Df(e,t.fromCache,n,r)}}class Pf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Of{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=en()?8:Tc(Xt())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Pf;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Bl()<=xn.DEBUG&&$l("QueryEngine","SDK will not create cache indexes for query:",ud(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ic.resolve()):(Bl()<=xn.DEBUG&&$l("QueryEngine","Query:",ud(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Bl()<=xn.DEBUG&&$l("QueryEngine","The SDK decides to create cache indexes for query:",ud(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sd(t))):Ic.resolve())}Yi(e,t){if(td(t))return Ic.resolve(null);let n=sd(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=od(t,null,"F"),n=sd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Ed(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,od(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return td(t)||r.isEqual(fc.min())?Ic.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?Ic.resolve(null):(Bl()<=xn.DEBUG&&$l("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ud(t)),this.rs(e,i,t,bc(r,-1)).next(e=>e))})}ts(e,t){let n=new $c(fd(e));return t.forEach((t,r)=>{dd(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Bl()<=xn.DEBUG&&$l("QueryEngine","Using full collection scan to execute query:",ud(t)),this.Ji.getDocumentsMatchingQuery(e,t,_c.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Lf{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new zc(uc),this._s=new md(e=>Qu(e),Yu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Mf(e,t,n,r){return new Lf(e,t,n,r)}async function Uf(e,t){const n=Yl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Ed();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Ff(e){const t=Yl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Vf(e,t,n){let r=Ed(),s=Ed();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=yd();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(fc.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):$l("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function zf(e,t){const n=Yl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function qf(e,t){const n=Yl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,Ic.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new uf(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Bf(e,t,n){const r=Yl(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Cc(e))throw e;$l("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function $f(e,t,n){const r=Yl(e);let s=fc.min(),i=Ed();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Yl(e),s=r._s.get(n);return void 0!==s?Ic.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,sd(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:fc.min(),n?i:Ed())).next(e=>(Hf(r,hd(t),e),{documents:e,Ts:i})))}function Hf(e,t,n){let r=e.us.get(t)||fc.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Wf{constructor(){this.activeTargetIds=Td()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kf{constructor(){this.so=new Wf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gf{_o(e){}shutdown(){}}class Qf{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$l("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$l("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yf=null;function Jf(){return null===Yf?Yf=268435456+Math.round(2147483648*Math.random()):Yf++,"0x"+Yf.toString(16)}const Xf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zf{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ep="WebChannelConnection";class tp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,s){const i=Jf(),a=this.xo(e,t.toUriEncodedString());$l("RestConnection",`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>($l("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw Wl("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Xf[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=Jf();return new Promise((i,a)=>{const o=new Cl;o.setWithCredentials(!0),o.listenOnce(Al.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Rl.NO_ERROR:const t=o.getResponseJson();$l(ep,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Rl.TIMEOUT:$l(ep,`RPC '${e}' ${s} timed out`),a(new Xl(Jl.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const n=o.getStatus();if($l(ep,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jl).indexOf(t)>=0?t:Jl.UNKNOWN}(t.status);a(new Xl(e,t.message))}else a(new Xl(Jl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Xl(Jl.UNAVAILABLE,"Connection failed."));break;default:Gl()}}finally{$l(ep,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);$l(ep,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Jf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ll(),a=Ol(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");$l(ep,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new Zf({Io:t=>{h?$l(ep,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||($l(ep,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),$l(ep,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,jl.EventType.OPEN,()=>{h||($l(ep,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,jl.EventType.CLOSE,()=>{h||(h=!0,$l(ep,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,jl.EventType.ERROR,t=>{h||(h=!0,Wl(ep,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Xl(Jl.UNAVAILABLE,"The operation could not be completed")))}),p(u,jl.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Ql(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){$l(ep,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=dh[e];if(void 0!==t)return ph(t)}(t),s=a.message;void 0===n&&(n=Jl.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Xl(n,s)),u.close()}else $l(ep,`RPC '${e}' stream ${r} received:`,s),f.bo(s)}}),p(a,Pl.STAT_EVENT,t=>{t.stat===Dl.PROXY?$l(ep,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Dl.NOPROXY&&$l(ep,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function np(){return"undefined"!=typeof document?document:null}function rp(e){return new Ph(e,!0)}class sp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&$l("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ip{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sp(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Jl.RESOURCE_EXHAUSTED?(Hl(t.toString()),Hl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Jl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Xl(Jl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $l("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($l("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ap extends ip{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Gl()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Ql(void 0===t||"string"==typeof t),Gc.fromBase64String(t||"")):(Ql(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Gc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Jl.UNKNOWN:ph(e.code);return new Xl(t,e.message||"")}(a);n=new Eh(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=$h(e,r.document.name),i=Fh(r.document.updateTime),a=r.document.createTime?Fh(r.document.createTime):fc.min(),o=new _u({mapValue:{fields:r.document.fields}}),l=Su.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Sh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=$h(e,r.document),i=r.readTime?Fh(r.readTime):fc.min(),a=Su.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Sh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=$h(e,r.document),i=r.removedTargetIds||[];n=new Sh([],i,s,null)}else{if(!("filter"in t))return Gl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new uh(r,s),a=e.targetId;n=new Nh(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return fc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?fc.min():t.readTime?Fh(t.readTime):fc.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Kh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ju(r)?{documents:Jh(e,r)}:{query:Xh(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mh(e,t.resumeToken);const r=Oh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(fc.min())>0){n.readTime=Lh(e,t.snapshotVersion.toTimestamp());const r=Oh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Kh(this.serializer),t.removeTarget=e,this.a_(t)}}class op extends ip{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ql(!!e.streamToken),this.lastStreamToken=e.streamToken,Ql(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ql(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Ql(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Fh(e.updateTime):Fh(t);return n.isEqual(fc.min())&&(n=Fh(t)),new Hd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Fh(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Kh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Yh(this.serializer,e))};this.a_(t)}}class lp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Xl(Jl.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,zh(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Jl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xl(Jl.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,zh(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Jl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xl(Jl.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class cp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hl(t),this.D_=!1):$l("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class up{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{wp(this)&&($l("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Yl(e);t.L_.add(4),await hp(t),t.q_.set("Unknown"),t.L_.delete(4),await dp(t)}(this))})}),this.q_=new cp(n,r)}}async function dp(e){if(wp(e))for(const t of e.B_)await t(!0)}async function hp(e){for(const t of e.B_)await t(!1)}function fp(e,t){const n=Yl(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),vp(n)?yp(n):Up(n).r_()&&mp(n,t))}function pp(e,t){const n=Yl(e),r=Up(n);n.N_.delete(t),r.r_()&&gp(n,t),0===n.N_.size&&(r.r_()?r.o_():wp(n)&&n.q_.set("Unknown"))}function mp(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Up(e).A_(t)}function gp(e,t){e.Q_.xe(t),Up(e).R_(t)}function yp(e){e.Q_=new Th({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Up(e).start(),e.q_.v_()}function vp(e){return wp(e)&&!Up(e).n_()&&e.N_.size>0}function wp(e){return 0===Yl(e).L_.size}function bp(e){e.Q_=void 0}async function xp(e){e.q_.set("Online")}async function _p(e){e.N_.forEach((t,n)=>{mp(e,t)})}async function kp(e,t){bp(e),vp(e)?(e.q_.M_(t),yp(e)):e.q_.set("Unknown")}async function Sp(e,t,n){if(e.q_.set("Online"),t instanceof Eh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){$l("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Np(e,n)}else if(t instanceof Sh?e.Q_.Ke(t):t instanceof Nh?e.Q_.He(t):e.Q_.We(t),!n.isEqual(fc.min()))try{const t=await Ff(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Gc.EMPTY_BYTE_STRING,r.snapshotVersion)),gp(e,t);const s=new uf(r.target,t,n,r.sequenceNumber);mp(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){$l("RemoteStore","Failed to raise snapshot:",t),await Np(e,t)}}async function Np(e,t,n){if(!Cc(t))throw t;e.L_.add(1),await hp(e),e.q_.set("Offline"),n||(n=()=>Ff(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{$l("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await dp(e)})}function Ep(e,t){return t().catch(n=>Np(e,n,t))}async function Ip(e){const t=Yl(e),n=Fp(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Tp(t);)try{const e=await zf(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Cp(t,e)}catch(e){await Np(t,e)}jp(t)&&Ap(t)}function Tp(e){return wp(e)&&e.O_.length<10}function Cp(e,t){e.O_.push(t);const n=Fp(e);n.r_()&&n.V_&&n.m_(t.mutations)}function jp(e){return wp(e)&&!Fp(e).n_()&&e.O_.length>0}function Ap(e){Fp(e).start()}async function Rp(e){Fp(e).p_()}async function Dp(e){const t=Fp(e);for(const n of e.O_)t.m_(n.mutations)}async function Pp(e,t,n){const r=e.O_.shift(),s=lh.from(r,t,n);await Ep(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Ip(e)}async function Op(e,t){t&&Fp(e).V_&&await async function(e,t){if(function(e){return fh(e)&&e!==Jl.ABORTED}(t.code)){const n=e.O_.shift();Fp(e).s_(),await Ep(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ip(e)}}(e,t),jp(e)&&Ap(e)}async function Lp(e,t){const n=Yl(e);n.asyncQueue.verifyOperationInProgress(),$l("RemoteStore","RemoteStore received new credentials");const r=wp(n);n.L_.add(3),await hp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await dp(n)}async function Mp(e,t){const n=Yl(e);t?(n.L_.delete(2),await dp(n)):t||(n.L_.add(2),await hp(n),n.q_.set("Unknown"))}function Up(e){return e.K_||(e.K_=function(e,t,n){const r=Yl(e);return r.w_(),new ap(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:xp.bind(null,e),Ro:_p.bind(null,e),mo:kp.bind(null,e),d_:Sp.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),vp(e)?yp(e):e.q_.set("Unknown")):(await e.K_.stop(),bp(e))})),e.K_}function Fp(e){return e.U_||(e.U_=function(e,t,n){const r=Yl(e);return r.w_(),new op(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Rp.bind(null,e),mo:Op.bind(null,e),f_:Dp.bind(null,e),g_:Pp.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Ip(e)):(await e.U_.stop(),e.O_.length>0&&($l("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class Vp{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Zl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Vp(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xl(Jl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(e,t){if(Hl("AsyncQueue",`${t}: ${e}`),Cc(e))return new Xl(Jl.UNAVAILABLE,`${t}: ${e}`);throw e}class qp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||vc.comparator(t.key,n.key):(e,t)=>vc.comparator(e.key,t.key),this.keyedMap=wd(),this.sortedSet=new zc(this.comparator)}static emptySet(e){return new qp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Bp{constructor(){this.W_=new zc(vc.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Gl():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class $p{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new $p(e,t,qp.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Hp{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Wp{constructor(){this.queries=Kp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Yl(e),r=n.queries;n.queries=Kp(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Xl(Jl.ABORTED,"Firestore shutting down"))}}function Kp(){return new md(e=>cd(e),ld)}async function Gp(e,t){const n=Yl(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new Hp,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=zp(e,`Initialization of query '${ud(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Xp(n)}async function Qp(e,t){const n=Yl(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Yp(e,t){const n=Yl(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Xp(n)}function Jp(e,t,n){const r=Yl(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Xp(e){e.Y_.forEach(e=>{e.next()})}var Zp,em;(em=Zp||(Zp={})).ea="default",em.Cache="cache";class tm{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new $p(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=$p.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zp.Cache}}class nm{constructor(e){this.key=e}}class rm{constructor(e){this.key=e}}class sm{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ed(),this.mutatedKeys=Ed(),this.Aa=fd(e),this.Ra=new qp(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Bp,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=dd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gl()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new $p(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Bp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ed(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new rm(e))}),this.da.forEach(n=>{e.has(n)||t.push(new nm(n))}),t}ba(e){this.Ta=e.Ts,this.da=Ed();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return $p.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class im{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class am{constructor(e){this.key=e,this.va=!1}}class om{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new md(e=>cd(e),ld),this.Ma=new Map,this.xa=new Set,this.Oa=new zc(vc.comparator),this.Na=new Map,this.La=new Sf,this.Ba={},this.ka=new Map,this.qa=yf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function lm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Cm(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await um(r,t,n,!0),s}async function cm(e,t){const n=Cm(e);await um(n,t,!0,!1)}async function um(e,t,n,r){const s=await qf(e.localStore,sd(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await dm(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&fp(e.remoteStore,s),o}async function dm(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await $f(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return km(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await $f(e.localStore,t,!0),a=new sm(t,i.Ts),o=a.ma(i.documents),l=kh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);km(e,n,c.wa);const u=new im(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function hm(e,t,n){const r=Yl(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!ld(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pp(r.remoteStore,s.targetId),xm(r,s.targetId)}).catch(Ec)):(xm(r,s.targetId),await Bf(r.localStore,s.targetId,!0))}async function fm(e,t){const n=Yl(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pp(n.remoteStore,r.targetId))}async function pm(e,t){const n=Yl(e);try{const e=await function(e,t){const n=Yl(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Gc.EMPTY_BYTE_STRING,fc.min()).withLastLimboFreeSnapshotVersion(fc.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=yd(),l=Ed();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Vf(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(fc.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Ic.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Ql(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Ql(r.va):e.removedDocuments.size>0&&(Ql(r.va),r.va=!1))}),await Em(n,e,t)}catch(e){await Ec(e)}}function mm(e,t,n){const r=Yl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Yl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Xp(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function gm(e,t,n){const r=Yl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new zc(vc.comparator);e=e.insert(i,Su.newNoDocument(i,fc.min()));const n=Ed().add(i),s=new _h(fc.min(),new Map,new zc(uc),e,n);await pm(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),Nm(r)}else await Bf(r.localStore,t,!1).then(()=>xm(r,t,n)).catch(Ec)}async function ym(e,t){const n=Yl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Ic.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Ql(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ed();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);bm(n,r,null),wm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Em(n,e)}catch(e){await Ec(e)}}async function vm(e,t,n){const r=Yl(e);try{const e=await function(e,t){const n=Yl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ql(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);bm(r,t,n),wm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Em(r,e)}catch(n){await Ec(n)}}function wm(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function bm(e,t,n){const r=Yl(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||_m(e,t)})}function _m(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(pp(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Nm(e))}function km(e,t,n){for(const r of n)r instanceof nm?(e.La.addReference(r.key,t),Sm(e,r)):r instanceof rm?($l("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||_m(e,r.key)):Gl()}function Sm(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||($l("SyncEngine","New document in limbo: "+n),e.xa.add(r),Nm(e))}function Nm(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new vc(mc.fromString(t)),r=e.qa.next();e.Na.set(r,new am(n)),e.Oa=e.Oa.insert(n,r),fp(e.remoteStore,new uf(sd(ed(n.path)),r,"TargetPurposeLimboResolution",jc.oe))}}async function Em(e,t,n){const r=Yl(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Df.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=Yl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ic.forEach(t,t=>Ic.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ic.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Cc(e))throw e;$l("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function Im(e,t){const n=Yl(e);if(!n.currentUser.isEqual(t)){$l("SyncEngine","User change. New user:",t.toKey());const e=await Uf(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Xl(Jl.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Em(n,e.hs)}}function Tm(e,t){const n=Yl(e),r=n.Na.get(t);if(r&&r.va)return Ed().add(r.key);{let e=Ed();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Cm(e){const t=Yl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gm.bind(null,t),t.Ca.d_=Yp.bind(null,t.eventManager),t.Ca.$a=Jp.bind(null,t.eventManager),t}function jm(e){const t=Yl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ym.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vm.bind(null,t),t}class Am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Mf(this.persistence,new Of,e.initialUser,this.serializer)}Ga(e){return new jf(Rf.Zr,this.serializer)}Wa(e){return new Kf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Am.provider={build:()=>new Am};class Rm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>mm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Im.bind(null,this.syncEngine),await Mp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Wp}createDatastore(e){const t=rp(e.databaseInfo.databaseId),n=function(e){return new tp(e)}(e.databaseInfo);return function(e,t,n,r){return new lp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new up(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>mm(this.syncEngine,e,0),Qf.D()?new Qf:new Gf)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new om(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Yl(e);$l("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await hp(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Rm.provider={build:()=>new Rm};class Dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hl("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Pm{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vl.UNAUTHENTICATED,this.clientId=cc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{$l("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>($l("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(De){const n=zp(De,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Om(e,t){e.asyncQueue.verifyOperationInProgress(),$l("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Uf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Lm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Mm(e);$l("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Lp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Lp(t.remoteStore,n)),e._onlineComponents=t}async function Mm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){$l("FirestoreClient","Using user provided OfflineComponentProvider");try{await Om(e,e._uninitializedComponentsProvider._offline)}catch(De){const n=De;if(!function(e){return"FirebaseError"===e.name?e.code===Jl.FAILED_PRECONDITION||e.code===Jl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Wl("Error using user provided cache. Falling back to memory cache: "+n),await Om(e,new Am)}}else $l("FirestoreClient","Using default OfflineComponentProvider"),await Om(e,new Am);return e._offlineComponents}async function Um(e){return e._onlineComponents||(e._uninitializedComponentsProvider?($l("FirestoreClient","Using user provided OnlineComponentProvider"),await Lm(e,e._uninitializedComponentsProvider._online)):($l("FirestoreClient","Using default OnlineComponentProvider"),await Lm(e,new Rm))),e._onlineComponents}function Fm(e){return Um(e).then(e=>e.syncEngine)}async function Vm(e){const t=await Um(e),n=t.eventManager;return n.onListen=lm.bind(null,t.syncEngine),n.onUnlisten=hm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fm.bind(null,t.syncEngine),n}function zm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Dm({next:o=>{i.Za(),t.enqueueAndForget(()=>Qp(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Xl(Jl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Xl(Jl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new tm(ed(n.path),i,{includeMetadataChanges:!0,_a:!0});return Gp(e,a)}(await Vm(e),e.asyncQueue,t,n,r)),r.promise}function qm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Dm({next:n=>{i.Za(),t.enqueueAndForget(()=>Qp(e,a)),n.fromCache&&"server"===r.source?s.reject(new Xl(Jl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new tm(n,i,{includeMetadataChanges:!0,_a:!0});return Gp(e,a)}(await Vm(e),e.asyncQueue,t,n,r)),r.promise}function Bm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const $m=new Map;function Hm(e,t,n){if(!n)throw new Xl(Jl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Wm(e){if(!vc.isDocumentKey(e))throw new Xl(Jl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Km(e){if(vc.isDocumentKey(e))throw new Xl(Jl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Gm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Gl()}function Qm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xl(Jl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gm(e);throw new Xl(Jl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ym(e,t){if(t<=0)throw new Xl(Jl.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Jm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xl(Jl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xl(Jl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xl(Jl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xl(Jl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Xl(Jl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Xl(Jl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xl(Jl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xl(Jl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tc;switch(e.type){case"firstParty":return new ic(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xl(Jl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$m.get(e);t&&($l("ComponentProvider","Removing Datastore"),$m.delete(e),t.terminate())}(this),Promise.resolve()}}class Zm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zm(this.firestore,e,this._query)}}class eg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new eg(this.firestore,e,this._key)}}class tg extends Zm{constructor(e,t,n){super(e,t,ed(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new eg(this.firestore,null,new vc(e))}withConverter(e){return new tg(this.firestore,e,this._path)}}function ng(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=mn(e),Hm("collection","path",t),e instanceof Xm){const n=mc.fromString(t,...r);return Km(n),new tg(e,null,n)}{if(!(e instanceof eg||e instanceof tg))throw new Xl(Jl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(mc.fromString(t,...r));return Km(n),new tg(e.firestore,null,n)}}function rg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=mn(e),1===arguments.length&&(t=cc.newId()),Hm("doc","path",t),e instanceof Xm){const n=mc.fromString(t,...r);return Wm(n),new eg(e,null,new vc(n))}{if(!(e instanceof eg||e instanceof tg))throw new Xl(Jl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(mc.fromString(t,...r));return Wm(n),new eg(e.firestore,e instanceof tg?e.converter:null,new vc(n))}}class sg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sp(this,"async_queue_retry"),this.Vu=()=>{const e=np();e&&$l("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=np();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=np();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Zl;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Re){if(!Cc(Re))throw Re;$l("AsyncQueue","Operation failed with retryable error: "+Re)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Hl("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Vp.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Gl()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function ig(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ag extends Xm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new sg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sg(e),this._firestoreClient=void 0,await e}}}function og(e){if(e._terminated)throw new Xl(Jl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||lg(e),e._firestoreClient}function lg(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new nu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Bm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Pm(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class cg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cg(Gc.fromBase64String(e))}catch(e){throw new Xl(Jl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new cg(Gc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ug{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xl(Jl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dg{constructor(e){this._methodName=e}}class hg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xl(Jl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xl(Jl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return uc(this._lat,e._lat)||uc(this._long,e._long)}}class fg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const pg=/^__.*__$/;class mg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new th(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}}class gg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new th(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gl()}}class vg{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(yg(this.Cu)&&pg.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||rp(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new vg({Cu:e,methodName:t,qu:n,path:yc.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bg(e){const t=e._freezeSettings(),n=rp(e._databaseId);return new wg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xg(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);jg("Data must be an object, but it was:",a,r);const o=Tg(r,a);let l,c;if(i.merge)l=new Wc(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Ag(t,r,n);if(!a.contains(s))throw new Xl(Jl.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Og(e,s)||e.push(s)}l=new Wc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new mg(new _u(o),l,c)}class _g extends dg{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _g}}class kg extends dg{_toFieldTransform(e){return new $d(e.path,new Ld)}isEqual(e){return e instanceof kg}}function Sg(e,t,n,r){const s=e.Qu(1,t,n);jg("Data must be an object, but it was:",s,r);const i=[],a=_u.empty();Fc(r,(e,r)=>{const o=Dg(t,e,n);r=mn(r);const l=s.Nu(o);if(r instanceof _g)i.push(o);else{const e=Ig(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new Wc(i);return new gg(a,o,s.fieldTransforms)}function Ng(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[Ag(t,r,n)],l=[s];if(i.length%2!=0)throw new Xl(Jl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(Ag(t,i[h])),l.push(i[h+1]);const c=[],u=_u.empty();for(let h=o.length-1;h>=0;--h)if(!Og(c,o[h])){const e=o[h];let t=l[h];t=mn(t);const n=a.Nu(e);if(t instanceof _g)c.push(e);else{const r=Ig(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Wc(c);return new gg(u,d,a.fieldTransforms)}function Eg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ig(n,e.Qu(r?4:3,t))}function Ig(e,t){if(Cg(e=mn(e)))return jg("Unsupported field value:",t,e),Tg(e,t);if(e instanceof dg)return function(e,t){if(!yg(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Ig(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=mn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ad(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hc.fromDate(e);return{timestampValue:Lh(t.serializer,n)}}if(e instanceof hc){const n=new hc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lh(t.serializer,n)}}if(e instanceof hg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cg)return{bytesValue:Mh(t.serializer,e._byteString)};if(e instanceof eg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Vh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof fg)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Cd(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Gm(e)}`)}(e,t)}function Tg(e,t){const n={};return Vc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fc(e,(e,r)=>{const s=Ig(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Cg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hc||e instanceof hg||e instanceof cg||e instanceof eg||e instanceof dg||e instanceof fg)}function jg(e,t,n){if(!Cg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Gm(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Ag(e,t,n){if((t=mn(t))instanceof ug)return t._internalPath;if("string"==typeof t)return Dg(e,t);throw Pg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Rg=new RegExp("[~\\*/\\[\\]]");function Dg(e,t,n){if(t.search(Rg)>=0)throw Pg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ug(...t.split("."))._internalPath}catch(r){throw Pg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pg(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Xl(Jl.INVALID_ARGUMENT,o+e+l)}function Og(e,t){return e.some(e=>e.isEqual(t))}class Lg{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new eg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mg extends Lg{data(){return super.data()}}function Ug(e,t){return"string"==typeof t?Dg(e,t):t instanceof ug?t._internalPath:t._delegate._internalPath}function Fg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xl(Jl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class zg extends Vg{}function qg(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Vg&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Hg).length,n=e.filter(e=>e instanceof Bg).length;if(t>1||t>0&&n>0)throw new Xl(Jl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Bg extends zg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Bg(e,t,n)}_apply(e){const t=this._parse(e);return Xg(e._query,t),new Zm(e.firestore,e.converter,ad(e._query,t))}_parse(e){const t=bg(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Xl(Jl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Jg(a,i);const t=[];for(const n of a)t.push(Yg(r,e,n));o={arrayValue:{values:t}}}else o=Yg(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Jg(a,i),o=Eg(n,t,a,"in"===i||"not-in"===i);return Au.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function $g(e,t,n){const r=t,s=Ug("where",e);return Bg._create(s,r,n)}class Hg extends Vg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hg(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ru.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Xg(n,s),n=ad(n,s)}(e._query,t),new Zm(e.firestore,e.converter,ad(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wg extends zg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xl(Jl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xl(Jl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(t,n)}(e._query,this._field,this._direction);return new Zm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Kg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ug("orderBy",e);return Wg._create(n,t)}class Gg extends zg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Gg(e,t,n)}_apply(e){return new Zm(e.firestore,e.converter,od(e._query,this._limit,this._limitType))}}function Qg(e){return Ym("limit",e),Gg._create("limit",e,"F")}function Yg(e,t,n){if("string"==typeof(n=mn(n))){if(""===n)throw new Xl(Jl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nd(t)&&-1!==n.indexOf("/"))throw new Xl(Jl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(mc.fromString(n));if(!vc.isDocumentKey(r))throw new Xl(Jl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fu(e,new vc(r))}if(n instanceof eg)return fu(e,n._key);throw new Xl(Jl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gm(n)}.`)}function Jg(e,t){if(!Array.isArray(e)||0===e.length)throw new Xl(Jl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Xg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xl(Jl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xl(Jl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Zg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Gl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Jc(e.doubleValue));return new fg(s)}convertGeoPoint(e){return new hg(Jc(e.latitude),Jc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=eu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new hc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=mc.fromString(e);Ql(cf(n));const r=new ru(n.get(1),n.get(3)),s=new vc(n.popFirst(5));return r.isEqual(t)||Hl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function ey(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ty{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ny extends Lg{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ry extends ny{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ty(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ry(this._firestore,this._userDataWriter,n.key,n,new ty(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xl(Jl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ry(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ty(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ry(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ty(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:iy(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function iy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gl()}}function ay(e){e=Qm(e,eg);const t=Qm(e.firestore,ag);return zm(og(t),e._key).then(n=>py(t,e,n))}class oy extends Zg{constructor(e){super(),this.firestore=e}convertBytes(e){return new cg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new eg(this.firestore,null,t)}}function ly(e){e=Qm(e,Zm);const t=Qm(e.firestore,ag),n=og(t),r=new oy(t);return Fg(e._query),qm(n,e._query).then(n=>new sy(t,r,e,n))}function cy(e,t,n){e=Qm(e,eg);const r=Qm(e.firestore,ag),s=ey(e.converter,t,n);return fy(r,[xg(bg(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Wd.none())])}function uy(e,t,n){e=Qm(e,eg);const r=Qm(e.firestore,ag),s=bg(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=mn(t))||t instanceof ug?Ng(s,"updateDoc",e._key,t,n,o):Sg(s,"updateDoc",e._key,t),fy(r,[i.toMutation(e._key,Wd.exists(!0))])}function dy(e,t){const n=Qm(e.firestore,ag),r=rg(e),s=ey(e.converter,t);return fy(n,[xg(bg(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Wd.exists(!1))]).then(()=>r)}function hy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=mn(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||ig(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ig(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof eg)d=Qm(e.firestore,ag),h=ed(e._key.path),u={next:t=>{n[l]&&n[l](py(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Qm(e,Zm);d=Qm(t.firestore,ag),h=t._query;const r=new oy(d);u={next:e=>{n[l]&&n[l](new sy(d,r,t,e))},error:n[l+1],complete:n[l+2]},Fg(e._query)}return function(e,t,n,r){const s=new Dm(r),i=new tm(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Gp(await Vm(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>Qp(await Vm(e),i))}}(og(d),h,c,u)}function fy(e,t){return function(e,t){const n=new Zl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=jm(e);try{const e=await function(e,t){const n=Yl(e),r=hc.now(),s=t.reduce((e,t)=>e.add(t.key),Ed());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=yd(),l=Ed();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Xd(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new th(e.key,t,ku(t.value.mapValue),Wd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:bd(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new zc(uc)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Em(r,e.changes),await Ip(r.remoteStore)}catch(e){const t=zp(e,"Failed to persist write");n.reject(t)}}(await Fm(e),t,n)),n.promise}(og(e),t)}function py(e,t,n){const r=n.docs.get(t._key),s=new oy(e);return new ny(e,s,t._key,r,new ty(n.hasPendingWrites,n.fromCache),t.converter)}class my{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bg(e)}set(e,t,n){this._verifyNotCommitted();const r=gy(e,this._firestore),s=ey(r.converter,t,n),i=xg(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Wd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=gy(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=mn(t))||t instanceof ug?Ng(this._dataReader,"WriteBatch.update",r._key,t,n,a):Sg(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Wd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gy(e,this._firestore);return this._mutations=this._mutations.concat(new ih(t._key,Wd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xl(Jl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gy(e,t){if((e=mn(e)).firestore!==t)throw new Xl(Jl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function yy(){return new kg("serverTimestamp")}function vy(e){return og(e=Qm(e,ag)),new my(e,t=>fy(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zl=e}(Ar),Er(new gn("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new ag(new rc(e.getProvider("auth-internal")),new oc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xl(Jl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pr(Fl,"4.7.3",e),Pr(Fl,"4.7.3","esm2017")}();const wy="firebasestorage.googleapis.com",by="storageBucket";class xy extends rn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Sy(e),`Firebase Storage: ${t} (${Sy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var _y,ky;function Sy(e){return"storage/"+e}function Ny(){return new xy(_y.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ey(){return new xy(_y.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Iy(){return new xy(_y.CANCELED,"User canceled the upload/download.")}function Ty(e){return new xy(_y.INVALID_ARGUMENT,e)}function Cy(){return new xy(_y.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(_y||(_y={}));class jy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=jy.makeFromUrl(e,t)}catch(Re){return new jy(e,"")}if(""===n.path)return n;throw r=e,new xy(_y.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===wy?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new jy(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new xy(_y.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Ay{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ry(e,t,n,r){if(r<t)throw Ty(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Ty(`Invalid value for '${e}'. Expected ${n} or less.`)}function Dy(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Py(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ky||(ky={}));class Oy{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ly(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ky.NO_ERROR,s=n.getStatus();if(!t||Py(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ky.ABORT;return void e(!1,new Ly(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new Ly(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Re){r(Re)}else if(null!==s){const e=Ny();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Cy():Iy())}else{r(Ey())}};this.canceled_?t(0,new Ly(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ly{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function My(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Uy{constructor(e,t){this._service=e,this._location=t instanceof jy?t:jy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Uy(e,t)}get root(){const e=new jy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return My(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new jy(this._location.bucket,e);return new Uy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new xy(_y.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Fy(e,t){const n=null===t||void 0===t?void 0:t[by];return null==n?null:jy.makeFromBucketSpec(n,e)}class Vy{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=wy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?jy.makeFromBucketSpec(r,this._host):Fy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=jy.makeFromBucketSpec(this._url,e):this._bucket=Fy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ry("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ry("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Uy(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Ay(Cy());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=Dy(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Oy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const zy="@firebase/storage",qy="0.13.2",By="storage";function $y(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Vy(r,s,i,n,Ar)}Er(new gn(By,$y,"PUBLIC").setMultipleInstances(!0)),Pr(zy,qy,""),Pr(zy,qy,"esm2017");const Hy=Rr({apiKey:"AIzaSyAYbNCbiVjgkhY86hLz3LB68tN8IyvqJFs",authDomain:"skill-swap-37874.firebaseapp.com",projectId:"skill-swap-37874",storageBucket:"skill-swap-37874.appspot.com",messagingSenderId:"542224518584",appId:"1:542224518584:web:729eddd4dc0ae3eee8534d",measurementId:"G-VZS83MFW58"});let Wy;"undefined"!==typeof window&&"localhost"!==window.location.hostname&&(Wy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();e=mn(e);const t=Ir(e,Ps);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ir(e,Ps);if(n.isInitialized()){const e=n.getImmediate();if(on(t,n.getOptions()))return e;throw Ms.create("already-initialized")}return n.initialize({options:t})}(e)}(Hy));const Ky=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();const t=Ir(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ir(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(on(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;vi(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:vl,persistence:[jo,fo,mo]}),r=Qt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>_l)return;const r=null===t||void 0===t?void 0:t.token;kl!==r&&(kl=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){mn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){mn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=Wt("auth");return i&&Da(n,`http://${i}`),n}(Hy),Gy=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ir("object"==typeof e?e:Dr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Kt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Qm(e,Xm))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Vl.MOCK_USER;else{t=Jt(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Xl(Jl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vl(i)}e._authCredentials=new nc(new ec(t,n))}}(r,...e)}return r}(Hy),Qy=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr(),t=arguments.length>1?arguments[1]:void 0;e=mn(e);const n=Ir(e,By).getImmediate({identifier:t}),r=Kt("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:Jt(s,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Hy),Ut((e,t)=>({user:null,firebaseUser:null,loading:!0,error:null,isAuthenticated:!1,signIn:async(t,n)=>{try{e({loading:!0,error:null});const s=await function(e,t,n){return Tr(e.app)?Promise.reject(xi(e)):ao(mn(e),Ha.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&oo(e),t})}(Ky,t,n),i=s.user,a=await ay(rg(Gy,"users",i.uid));if(a.exists()){const t=a.data();e({user:{...t,id:i.uid},firebaseUser:i,isAuthenticated:!0,loading:!1})}else{var r;const t={name:i.displayName||(null===(r=i.email)||void 0===r?void 0:r.split("@")[0])||"User",email:i.email||"",skillsOffered:[],skillsWanted:[],availability:{weekends:!1,evenings:!1},isPublic:!0,trustScore:100,points:0,badges:[],createdAt:new Date,updatedAt:new Date,role:"user"};await cy(rg(Gy,"users",i.uid),{...t,createdAt:yy(),updatedAt:yy()}),e({user:{...t,id:i.uid},firebaseUser:i,isAuthenticated:!0,loading:!1})}}catch(s){let t="Failed to sign in";throw"auth/user-not-found"===s.code?t="No account found with this email. Please register first.":"auth/wrong-password"===s.code?t="Incorrect password. Please try again.":"auth/invalid-email"===s.code?t="Invalid email address.":"auth/too-many-requests"===s.code?t="Too many failed attempts. Please try again later.":"auth/user-disabled"===s.code?t="This account has been disabled.":s.message&&(t=s.message),e({error:t,loading:!1}),new Error(t)}},signUp:async(t,n,r)=>{try{e({loading:!0,error:null});const s=(await lo(Ky,t,n)).user,i={name:r,email:t,skillsOffered:[],skillsWanted:[],availability:{weekends:!1,evenings:!1},isPublic:!0,trustScore:100,points:0,badges:[],createdAt:new Date,updatedAt:new Date,role:"user"};await cy(rg(Gy,"users",s.uid),{...i,createdAt:yy(),updatedAt:yy()}),console.log("\u2705 User profile created in Firebase:",{userId:s.uid,userData:i});const a={...i,id:s.uid,createdAt:new Date,updatedAt:new Date};e({user:a,firebaseUser:s,isAuthenticated:!0,loading:!1})}catch(s){let t="Failed to create account";throw"auth/email-already-in-use"===s.code?t="An account with this email already exists. Please sign in instead.":"auth/invalid-email"===s.code?t="Invalid email address.":"auth/weak-password"===s.code?t="Password is too weak. Please choose a stronger password.":"auth/operation-not-allowed"===s.code?t="Email/password accounts are not enabled. Please contact support.":s.message&&(t=s.message),e({error:t,loading:!1}),new Error(t)}},signOut:async()=>{try{await function(e){return mn(e).signOut()}(Ky),e({user:null,firebaseUser:null,isAuthenticated:!1,loading:!1})}catch(t){e({error:t.message})}},setUser:t=>{e({user:t,isAuthenticated:!!t})},setLoading:t=>{e({loading:t})},setError:t=>{e({error:t})},updateUserProfile:async n=>{const{user:r}=t();if(r)try{const t=rg(Gy,"users",r.id);await uy(t,{...n,updatedAt:yy()}),e({user:{...r,...n,updatedAt:new Date}})}catch(s){e({error:s.message})}},initializeAuth:()=>{!function(e,t,n,r){mn(e).onAuthStateChanged(t,n,r)}(Ky,async t=>{if(t)try{const n=await ay(rg(Gy,"users",t.uid));if(n.exists()){const r=n.data();e({user:{...r,id:t.uid},firebaseUser:t,isAuthenticated:!0,loading:!1})}else e({loading:!1})}catch(n){e({loading:!1})}else e({user:null,firebaseUser:null,isAuthenticated:!1,loading:!1})})},createDemoUser:async()=>{try{e({loading:!0,error:null});const t="demo@example.com",n="demo123",r="Demo User",s=(await lo(Ky,t,n)).user;if(!s)throw new Error("Failed to create demo user: Firebase user is null");const i={name:r,email:t,skillsOffered:[{id:"demo-skill-1",name:"JavaScript",category:"Programming",level:"intermediate"},{id:"demo-skill-2",name:"React",category:"Frontend",level:"intermediate"}],skillsWanted:[{id:"demo-skill-3",name:"Python",category:"Programming",level:"beginner"},{id:"demo-skill-4",name:"UI/UX Design",category:"Design",level:"beginner"}],availability:{weekends:!0,evenings:!0},isPublic:!0,trustScore:100,points:0,badges:[],createdAt:new Date,updatedAt:new Date,role:"user"};await cy(rg(Gy,"users",s.uid),{...i,createdAt:yy(),updatedAt:yy()}),console.log("\u2705 User profile created in Firebase:",{userId:s.uid,userData:i});const a={...i,id:s.uid,createdAt:new Date,updatedAt:new Date};e({user:a,firebaseUser:s,isAuthenticated:!0,loading:!1})}catch(t){let n="Failed to create demo user";throw"auth/email-already-in-use"===t.code?n="Demo user already exists. Please sign in.":t.message&&(n=t.message),e({error:n,loading:!1}),new Error(n)}}})));var Yy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var Jy=(e,t)=>{const n=(0,s.forwardRef)((n,r)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c,...u}=n;return(0,s.createElement)("svg",{ref:r,...Yy,width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:`lucide lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...u},[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var d});return n.displayName=`${e}`,n};const Xy=Jy("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Zy=Jy("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ev=Jy("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tv=Jy("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),nv=Jy("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),rv=Jy("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sv=Jy("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var iv=n(579);const av=e=>{let{size:t="md",className:n=""}=e;return(0,iv.jsx)("div",{className:`flex justify-center items-center ${n}`,children:(0,iv.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]} animate-spin rounded-full border-2 border-gray-300 border-t-primary-600`})})},ov=e=>{let{variant:t="primary",size:n="md",loading:r=!1,disabled:s,children:i,className:a="",...o}=e;const l=`inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",success:"bg-success-600 text-white hover:bg-success-700 focus:ring-success-500",warning:"bg-warning-600 text-white hover:bg-warning-700 focus:ring-warning-500",error:"bg-error-600 text-white hover:bg-error-700 focus:ring-error-500",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500"}[t]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]} ${a}`;return(0,iv.jsxs)("button",{className:l,disabled:s||r,...o,children:[r&&(0,iv.jsx)(av,{size:"sm",className:"mr-2"}),i]})},lv=Jy("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),cv=Jy("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),uv=Ut((e,t)=>({notifications:[],unreadCount:0,loading:!1,error:null,fetchNotifications:t=>{e({loading:!0});const n=hy(qg(ng(Gy,"notifications"),$g("userId","==",t),Kg("createdAt","desc")),t=>{const n=[];let r=0;t.forEach(e=>{var t;const s=e.data(),i={id:e.id,userId:s.userId,type:s.type,title:s.title,message:s.message,isRead:s.isRead||!1,relatedId:s.relatedId,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date};n.push(i),i.isRead||r++}),e({notifications:n,unreadCount:r,loading:!1})},t=>{e({error:t.message,loading:!1})});return n},markAsRead:async t=>{try{await uy(rg(Gy,"notifications",t),{isRead:!0})}catch(n){e({error:n.message})}},markAllAsRead:async n=>{try{const{notifications:e}=t(),r=e.filter(e=>!e.isRead&&e.userId===n),s=r.map(e=>uy(rg(Gy,"notifications",e.id),{isRead:!0}));await Promise.all(s)}catch(r){e({error:r.message})}},createNotification:async t=>{try{await dy(ng(Gy,"notifications"),{...t,createdAt:yy()})}catch(n){e({error:n.message})}},clearNotifications:()=>{e({notifications:[],unreadCount:0})}})),dv=()=>{const{user:e}=Qy(),{notifications:t,unreadCount:n,loading:r,fetchNotifications:i,markAsRead:a,markAllAsRead:o}=uv(),[l,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(null!==e&&void 0!==e&&e.id){return i(e.id)}},[null===e||void 0===e?void 0:e.id,i]);const u=e=>{switch(e){case"swap_request":return"\ud83e\udd1d";case"swap_accepted":return"\u2705";case"swap_rejected":return"\u274c";case"feedback_received":return"\u2b50";case"system":return"\ud83d\udd14";default:return"\ud83d\udce2"}},d=e=>{const t=new Date,n=Math.floor((t.getTime()-e.getTime())/6e4);return n<1?"Just now":n<60?`${n}m ago`:n<1440?`${Math.floor(n/60)}h ago`:`${Math.floor(n/1440)}d ago`};return e?(0,iv.jsxs)("div",{className:"relative",children:[(0,iv.jsxs)("button",{onClick:()=>c(!l),className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,iv.jsx)(lv,{className:"w-5 h-5"}),n>0&&(0,iv.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n>9?"9+":n})]}),l&&(0,iv.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden",children:[(0,iv.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n>0&&(0,iv.jsx)(ov,{size:"sm",variant:"outline",onClick:async()=>{null!==e&&void 0!==e&&e.id&&await o(e.id)},children:"Mark all read"})]})}),(0,iv.jsx)("div",{className:"max-h-64 overflow-y-auto",children:r?(0,iv.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading notifications..."}):0===t.length?(0,iv.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No notifications yet"}):(0,iv.jsx)("div",{className:"divide-y divide-gray-100",children:t.map(e=>(0,iv.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors "+(e.isRead?"":"bg-blue-50"),children:(0,iv.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,iv.jsx)("div",{className:"text-xl",children:u(e.type)}),(0,iv.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),!e.isRead&&(0,iv.jsx)("button",{onClick:()=>(async e=>{await a(e)})(e.id),className:"text-gray-400 hover:text-gray-600",children:(0,iv.jsx)(cv,{className:"w-4 h-4"})})]}),(0,iv.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,iv.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:d(e.createdAt)})]})]})},e.id))})})]})]}):null},hv=()=>{var e,t;const{user:n,isAuthenticated:r,signOut:i}=Qy(),a=ee(),o=X(),[l,c]=(0,s.useState)(!1),u=async()=>{try{await i(),a("/")}catch(e){console.error("Logout failed:",e)}},d=e=>o.pathname===e,h=[{path:"/",label:"Home",icon:null},{path:"/search",label:"Search",icon:(0,iv.jsx)(Xy,{className:"w-4 h-4"})},{path:"/swaps",label:"Swaps",icon:(0,iv.jsx)(Zy,{className:"w-4 h-4"})},{path:"/profile",label:"Profile",icon:(0,iv.jsx)(ev,{className:"w-4 h-4"})}];return"admin"===(null===n||void 0===n?void 0:n.role)&&h.push({path:"/admin",label:"Admin",icon:(0,iv.jsx)(tv,{className:"w-4 h-4"})}),(0,iv.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,iv.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,iv.jsxs)("div",{className:"flex justify-between h-16",children:[(0,iv.jsx)("div",{className:"flex items-center",children:(0,iv.jsxs)(Ce,{to:"/",className:"flex items-center space-x-2",children:[(0,iv.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-white font-bold text-sm",children:"S"})}),(0,iv.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Skill Swap"})]})}),(0,iv.jsx)("div",{className:"hidden md:flex items-center space-x-8",children:r?(0,iv.jsxs)(iv.Fragment,{children:[(0,iv.jsx)("div",{className:"flex items-center space-x-6",children:h.map(e=>(0,iv.jsxs)(Ce,{to:e.path,className:"flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors "+(d(e.path)?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[e.icon,(0,iv.jsx)("span",{children:e.label})]},e.path))}),(0,iv.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,iv.jsx)(dv,{}),(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[null!==n&&void 0!==n&&n.photoURL?(0,iv.jsx)("img",{src:n.photoURL,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):(0,iv.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-primary-600 font-semibold text-sm",children:null===n||void 0===n||null===(e=n.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),(0,iv.jsxs)("div",{className:"hidden lg:block",children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===n||void 0===n?void 0:n.name}),(0,iv.jsx)("p",{className:"text-xs text-gray-500",children:null===n||void 0===n?void 0:n.email})]}),(0,iv.jsxs)(ov,{variant:"outline",size:"sm",onClick:u,className:"flex items-center space-x-1",children:[(0,iv.jsx)(nv,{className:"w-4 h-4"}),(0,iv.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})]}):(0,iv.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,iv.jsx)(Ce,{to:"/login",children:(0,iv.jsx)(ov,{variant:"outline",size:"sm",children:"Sign In"})}),(0,iv.jsx)(Ce,{to:"/register",children:(0,iv.jsx)(ov,{size:"sm",children:"Join Skill Swap"})})]})}),(0,iv.jsxs)("div",{className:"md:hidden flex items-center",children:[r&&(0,iv.jsx)(dv,{}),(0,iv.jsx)("button",{onClick:()=>c(!l),className:"ml-2 p-2 text-gray-600 hover:text-gray-900",children:l?(0,iv.jsx)(rv,{className:"w-6 h-6"}):(0,iv.jsx)(sv,{className:"w-6 h-6"})})]})]})}),l&&(0,iv.jsx)("div",{className:"md:hidden border-t border-gray-200",children:(0,iv.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:r?(0,iv.jsxs)(iv.Fragment,{children:[h.map(e=>(0,iv.jsxs)(Ce,{to:e.path,onClick:()=>c(!1),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium "+(d(e.path)?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[e.icon,(0,iv.jsx)("span",{children:e.label})]},e.path)),(0,iv.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3 px-3 py-2",children:[null!==n&&void 0!==n&&n.photoURL?(0,iv.jsx)("img",{src:n.photoURL,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):(0,iv.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-primary-600 font-semibold text-sm",children:null===n||void 0===n||null===(t=n.name)||void 0===t?void 0:t.charAt(0).toUpperCase()})}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===n||void 0===n?void 0:n.name}),(0,iv.jsx)("p",{className:"text-xs text-gray-500",children:null===n||void 0===n?void 0:n.email})]})]}),(0,iv.jsxs)("button",{onClick:()=>{u(),c(!1)},className:"flex items-center space-x-2 w-full px-3 py-2 text-left text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md",children:[(0,iv.jsx)(nv,{className:"w-4 h-4"}),(0,iv.jsx)("span",{children:"Logout"})]})]})]}):(0,iv.jsxs)("div",{className:"space-y-2",children:[(0,iv.jsx)(Ce,{to:"/login",onClick:()=>c(!1),className:"block px-3 py-2 text-base font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md",children:"Sign In"}),(0,iv.jsx)(Ce,{to:"/register",onClick:()=>c(!1),className:"block px-3 py-2 text-base font-medium text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-md",children:"Join Skill Swap"})]})})})]})},fv=Jy("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),pv=Jy("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),mv=Jy("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),gv=()=>{const{isAuthenticated:e}=Qy(),t=ee(),n=[{icon:(0,iv.jsx)(Xy,{className:"w-6 h-6"}),title:"Find Skills",description:"Search and discover people with the skills you need"},{icon:(0,iv.jsx)(Zy,{className:"w-6 h-6"}),title:"Easy Swapping",description:"Request skill swaps with a simple click"},{icon:(0,iv.jsx)(fv,{className:"w-6 h-6"}),title:"Rate & Review",description:"Build trust through feedback and ratings"},{icon:(0,iv.jsx)(pv,{className:"w-6 h-6"}),title:"Quick Learning",description:"Learn new skills from experts in your community"}];return(0,iv.jsxs)("div",{className:"min-h-screen",children:[(0,iv.jsx)("section",{className:"bg-gradient-to-br from-primary-50 to-secondary-50 py-20",children:(0,iv.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,iv.jsxs)("div",{className:"text-center",children:[(0,iv.jsxs)("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["Swap Skills,"," ",(0,iv.jsx)("span",{className:"text-gradient",children:"Grow Together"})]}),(0,iv.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Connect with people who have the skills you need and offer your expertise in return. Build meaningful relationships while learning and teaching."}),(0,iv.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e?(0,iv.jsx)(Ce,{to:"/search",children:(0,iv.jsxs)(ov,{size:"lg",className:"text-lg px-8 py-4",children:["Find Skills",(0,iv.jsx)(mv,{className:"w-5 h-5 ml-2"})]})}):(0,iv.jsxs)(iv.Fragment,{children:[(0,iv.jsx)(Ce,{to:"/register",children:(0,iv.jsxs)(ov,{size:"lg",className:"text-lg px-8 py-4",children:["Get Started",(0,iv.jsx)(mv,{className:"w-5 h-5 ml-2"})]})}),(0,iv.jsx)(Ce,{to:"/login",children:(0,iv.jsx)(ov,{variant:"outline",size:"lg",className:"text-lg px-8 py-4",children:"Sign In"})})]})})]})})}),(0,iv.jsx)("section",{className:"py-16 bg-white",children:(0,iv.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,iv.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[{number:"1,000+",label:"Active Users"},{number:"500+",label:"Skills Swapped"},{number:"4.8",label:"Average Rating"},{number:"50+",label:"Cities"}].map((e,t)=>(0,iv.jsxs)("div",{className:"text-center",children:[(0,iv.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-primary-600 mb-2",children:e.number}),(0,iv.jsx)("div",{className:"text-gray-600",children:e.label})]},t))})})}),(0,iv.jsx)("section",{className:"py-20 bg-gray-50",children:(0,iv.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,iv.jsxs)("div",{className:"text-center mb-16",children:[(0,iv.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose Skill Swap?"}),(0,iv.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Our platform makes it easy to connect, learn, and grow together through skill sharing."})]}),(0,iv.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((e,t)=>(0,iv.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 text-center",children:[(0,iv.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,iv.jsx)("div",{className:"text-primary-600",children:e.icon})}),(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,iv.jsx)("p",{className:"text-gray-600",children:e.description})]},t))})]})}),(0,iv.jsx)("section",{className:"py-20 bg-white",children:(0,iv.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,iv.jsxs)("div",{className:"text-center mb-16",children:[(0,iv.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"How It Works"}),(0,iv.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Get started in just a few simple steps"})]}),(0,iv.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,iv.jsxs)("div",{className:"text-center",children:[(0,iv.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,iv.jsx)("span",{className:"text-white text-2xl font-bold",children:"1"})}),(0,iv.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create Your Profile"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Sign up and add the skills you can offer and the skills you want to learn."})]}),(0,iv.jsxs)("div",{className:"text-center",children:[(0,iv.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,iv.jsx)("span",{className:"text-white text-2xl font-bold",children:"2"})}),(0,iv.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Find Matches"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Search for people with the skills you need and who want your skills."})]}),(0,iv.jsxs)("div",{className:"text-center",children:[(0,iv.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,iv.jsx)("span",{className:"text-white text-2xl font-bold",children:"3"})}),(0,iv.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Start Swapping"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Send swap requests, meet up, and exchange your knowledge and skills."})]})]})]})}),(0,iv.jsx)("section",{className:"py-20 bg-gradient-to-r from-primary-600 to-secondary-600",children:(0,iv.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,iv.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Swapping Skills?"}),(0,iv.jsx)("p",{className:"text-xl text-primary-100 mb-8 max-w-2xl mx-auto",children:"Join thousands of people who are already learning and teaching through skill swaps."}),!e&&(0,iv.jsx)(Ce,{to:"/register",children:(0,iv.jsxs)(ov,{size:"lg",className:"!bg-white !text-primary-600 hover:!bg-gray-100 !border-2 !border-white text-lg px-8 py-4",children:["Join Skill Swap",(0,iv.jsx)(mv,{className:"w-5 h-5 ml-2"})]})})]})}),!e&&(0,iv.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 py-8",children:(0,iv.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,iv.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 text-center",children:"\ud83e\uddea Testing Guide"}),(0,iv.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,iv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Quick Test Options"}),(0,iv.jsxs)("div",{className:"space-y-3",children:[(0,iv.jsx)(ov,{onClick:()=>t("/login"),className:"w-full",variant:"outline",children:"Try Demo Account"}),(0,iv.jsx)(ov,{onClick:()=>t("/register"),className:"w-full",variant:"outline",children:"Create Real Account"})]})]}),(0,iv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Test Features"}),(0,iv.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,iv.jsx)("li",{children:"\u2705 User Registration & Login"}),(0,iv.jsx)("li",{children:"\u2705 Profile Management"}),(0,iv.jsx)("li",{children:"\u2705 Skill Search & Browse"}),(0,iv.jsx)("li",{children:"\u2705 Swap Request System"}),(0,iv.jsx)("li",{children:"\u2705 Feedback & Ratings"}),(0,iv.jsx)("li",{children:"\u2705 Admin Dashboard"})]})]})]})]})}),(0,iv.jsx)("footer",{className:"bg-gray-900 text-white py-12",children:(0,iv.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,iv.jsxs)("div",{className:"grid md:grid-cols-4 gap-8",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,iv.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-white font-bold text-lg",children:"S"})}),(0,iv.jsx)("span",{className:"text-xl font-bold",children:"Skill Swap"})]}),(0,iv.jsx)("p",{className:"text-gray-400",children:"Connecting people through skill sharing and mutual learning."})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Platform"}),(0,iv.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,iv.jsx)("li",{children:(0,iv.jsx)(Ce,{to:"/search",className:"hover:text-white",children:"Search Skills"})}),(0,iv.jsx)("li",{children:(0,iv.jsx)(Ce,{to:"/about",className:"hover:text-white",children:"About Us"})}),(0,iv.jsx)("li",{children:(0,iv.jsx)(Ce,{to:"/contact",className:"hover:text-white",children:"Contact"})})]})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Support"}),(0,iv.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,iv.jsx)("li",{children:(0,iv.jsx)(Ce,{to:"/help",className:"hover:text-white",children:"Help Center"})}),(0,iv.jsx)("li",{children:(0,iv.jsx)(Ce,{to:"/safety",className:"hover:text-white",children:"Safety Tips"})}),(0,iv.jsx)("li",{children:(0,iv.jsx)(Ce,{to:"/terms",className:"hover:text-white",children:"Terms of Service"})})]})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Connect"}),(0,iv.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,iv.jsx)("li",{children:(0,iv.jsx)("button",{type:"button",className:"hover:text-white",onClick:()=>Ct.error("Social links not implemented yet"),children:"Twitter"})}),(0,iv.jsx)("li",{children:(0,iv.jsx)("button",{type:"button",className:"hover:text-white",onClick:()=>Ct.error("Social links not implemented yet"),children:"LinkedIn"})}),(0,iv.jsx)("li",{children:(0,iv.jsx)("button",{type:"button",className:"hover:text-white",onClick:()=>Ct.error("Social links not implemented yet"),children:"Instagram"})})]})]})]}),(0,iv.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:(0,iv.jsx)("p",{children:"\xa9 2024 Skill Swap. All rights reserved."})})]})})]})};var yv=e=>"checkbox"===e.type,vv=e=>e instanceof Date,wv=e=>null==e;const bv=e=>"object"===typeof e;var xv=e=>!wv(e)&&!Array.isArray(e)&&bv(e)&&!vv(e),_v=e=>xv(e)&&e.target?yv(e.target)?e.target.checked:e.target.value:e,kv=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Sv="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Nv(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Sv&&(e instanceof Blob||r)||!n&&!xv(e))return e;if(t=n?[]:{},n||(e=>{const t=e.constructor&&e.constructor.prototype;return xv(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Nv(e[n]));else t=e}return t}var Ev=e=>/^\w*$/.test(e),Iv=e=>void 0===e,Tv=e=>Array.isArray(e)?e.filter(Boolean):[],Cv=e=>Tv(e.replace(/["|']|\]/g,"").split(/\.|\[/)),jv=(e,t,n)=>{if(!t||!xv(e))return n;const r=(Ev(t)?[t]:Cv(t)).reduce((e,t)=>wv(e)?e:e[t],e);return Iv(r)||r===e?Iv(e[t])?n:e[t]:r},Av=e=>"boolean"===typeof e,Rv=(e,t,n)=>{let r=-1;const s=Ev(t)?[t]:Cv(t),i=s.length,a=i-1;for(;++r<i;){const t=s[r];let i=n;if(r!==a){const n=e[t];i=xv(n)||Array.isArray(n)?n:isNaN(+s[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=i,e=e[t]}};const Dv="blur",Pv="focusout",Ov="onBlur",Lv="onChange",Mv="onSubmit",Uv="onTouched",Fv="all",Vv="max",zv="min",qv="maxLength",Bv="minLength",$v="pattern",Hv="required",Wv="validate",Kv=s.createContext(null);Kv.displayName="HookFormContext";var Gv=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const s=i;return t._proxyFormState[s]!==Fv&&(t._proxyFormState[s]=!r||Fv),n&&(n[s]=!0),e[s]}});return s};const Qv="undefined"!==typeof window?s.useLayoutEffect:s.useEffect;var Yv=e=>"string"===typeof e,Jv=(e,t,n,r,s)=>Yv(e)?(r&&t.watch.add(e),jv(n,e,s)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),jv(n,e))):(r&&(t.watchAll=!0),n);var Xv=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Zv=e=>Array.isArray(e)?e:[e],ew=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},tw=e=>wv(e)||!bv(e);function nw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(tw(e)||tw(t))return e===t;if(vv(e)&&vv(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const r=e[i];if(!s.includes(i))return!1;if("ref"!==i){const e=t[i];if(vv(r)&&vv(e)||xv(r)&&xv(e)||Array.isArray(r)&&Array.isArray(e)?!nw(r,e,n):r!==e)return!1}}return!0}var rw=e=>xv(e)&&!Object.keys(e).length,sw=e=>"file"===e.type,iw=e=>"function"===typeof e,aw=e=>{if(!Sv)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ow=e=>"select-multiple"===e.type,lw=e=>"radio"===e.type,cw=e=>aw(e)&&e.isConnected;function uw(e,t){const n=Array.isArray(t)?t:Ev(t)?[t]:Cv(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Iv(e)?r++:e[t[r++]];return e}(e,n),s=n.length-1,i=n[s];return r&&delete r[i],0!==s&&(xv(r)&&rw(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Iv(e[t]))return!1;return!0}(r))&&uw(e,n.slice(0,-1)),e}var dw=e=>{for(const t in e)if(iw(e[t]))return!0;return!1};function hw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(xv(e)||n)for(const r in e)Array.isArray(e[r])||xv(e[r])&&!dw(e[r])?(t[r]=Array.isArray(e[r])?[]:{},hw(e[r],t[r])):wv(e[r])||(t[r]=!0);return t}function fw(e,t,n){const r=Array.isArray(e);if(xv(e)||r)for(const s in e)Array.isArray(e[s])||xv(e[s])&&!dw(e[s])?Iv(t)||tw(n[s])?n[s]=Array.isArray(e[s])?hw(e[s],[]):{...hw(e[s])}:fw(e[s],wv(t)?{}:t[s],n[s]):n[s]=!nw(e[s],t[s]);return n}var pw=(e,t)=>fw(e,t,hw(t));const mw={value:!1,isValid:!1},gw={value:!0,isValid:!0};var yw=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Iv(e[0].attributes.value)?Iv(e[0].value)||""===e[0].value?gw:{value:e[0].value,isValid:!0}:gw:mw}return mw},vw=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:s}=t;return Iv(e)?e:n?""===e?NaN:e?+e:e:r&&Yv(e)?new Date(e):s?s(e):e};const ww={isValid:!1,value:null};var bw=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ww):ww;function xw(e){const t=e.ref;return sw(t)?t.files:lw(t)?bw(e.refs).value:ow(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):yv(t)?yw(e.refs).value:vw(Iv(t.value)?e.ref.value:t.value,e)}var _w=e=>e instanceof RegExp,kw=e=>Iv(e)?e:_w(e)?e.source:xv(e)?_w(e.value)?e.value.source:e.value:e,Sw=e=>({isOnSubmit:!e||e===Mv,isOnBlur:e===Ov,isOnChange:e===Lv,isOnAll:e===Fv,isOnTouch:e===Uv});const Nw="AsyncFunction";var Ew=e=>!!e&&!!e.validate&&!!(iw(e.validate)&&e.validate.constructor.name===Nw||xv(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Nw)),Iw=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Tw=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const n=jv(e,s);if(n){const{_f:e,...i}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(Tw(i,t))break}else if(xv(i)&&Tw(i,t))break}}};function Cw(e,t,n){const r=jv(e,n);if(r||Ev(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const r=s.join("."),i=jv(t,r),a=jv(e,r);if(i&&!Array.isArray(i)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};if(a&&a.root&&a.root.type)return{name:`${r}.root`,error:a.root};s.pop()}return{name:n}}var jw=(e,t,n)=>{const r=Zv(jv(e,n));return Rv(r,"root",t[n]),Rv(e,n,r),e},Aw=e=>Yv(e);function Rw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Aw(e)||Array.isArray(e)&&e.every(Aw)||Av(e)&&!e)return{type:n,message:Aw(e)?e:"",ref:t}}var Dw=e=>xv(e)&&!_w(e)?e:{value:e,message:""},Pw=async(e,t,n,r,s,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:f,validate:p,name:m,valueAsNumber:g,mount:y}=e._f,v=jv(n,m);if(!y||t.has(m))return{};const w=o?o[0]:a,b=e=>{s&&w.reportValidity&&(w.setCustomValidity(Av(e)?"":e||""),w.reportValidity())},x={},_=lw(a),k=yv(a),S=_||k,N=(g||sw(a))&&Iv(a.value)&&Iv(v)||aw(a)&&""===a.value||""===v||Array.isArray(v)&&!v.length,E=Xv.bind(null,m,r,x),I=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qv,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bv;const i=e?t:n;x[m]={type:e?r:s,message:i,ref:a,...E(e?r:s,i)}};if(i?!Array.isArray(v)||!v.length:l&&(!S&&(N||wv(v))||Av(v)&&!v||k&&!yw(o).isValid||_&&!bw(o).isValid)){const{value:e,message:t}=Aw(l)?{value:!!l,message:l}:Dw(l);if(e&&(x[m]={type:Hv,message:t,ref:w,...E(Hv,t)},!r))return b(t),x}if(!N&&(!wv(d)||!wv(h))){let e,t;const n=Dw(h),s=Dw(d);if(wv(v)||isNaN(v)){const r=a.valueAsDate||new Date(v),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==a.type,l="week"==a.type;Yv(n.value)&&v&&(e=o?i(v)>i(n.value):l?v>n.value:r>new Date(n.value)),Yv(s.value)&&v&&(t=o?i(v)<i(s.value):l?v<s.value:r<new Date(s.value))}else{const r=a.valueAsNumber||(v?+v:v);wv(n.value)||(e=r>n.value),wv(s.value)||(t=r<s.value)}if((e||t)&&(I(!!e,n.message,s.message,Vv,zv),!r))return b(x[m].message),x}if((c||u)&&!N&&(Yv(v)||i&&Array.isArray(v))){const e=Dw(c),t=Dw(u),n=!wv(e.value)&&v.length>+e.value,s=!wv(t.value)&&v.length<+t.value;if((n||s)&&(I(n,e.message,t.message),!r))return b(x[m].message),x}if(f&&!N&&Yv(v)){const{value:e,message:t}=Dw(f);if(_w(e)&&!v.match(e)&&(x[m]={type:$v,message:t,ref:a,...E($v,t)},!r))return b(t),x}if(p)if(iw(p)){const e=Rw(await p(v,n),w);if(e&&(x[m]={...e,...E(Wv,e.message)},!r))return b(e.message),x}else if(xv(p)){let e={};for(const t in p){if(!rw(e)&&!r)break;const s=Rw(await p[t](v,n),w,t);s&&(e={...s,...E(t,s.message)},b(s.message),r&&(x[m]=e))}if(!rw(e)&&(x[m]={ref:w,...e},!r))return x}return b(!0),x};const Ow={mode:Mv,reValidateMode:Lv,shouldFocusError:!0};function Lw(){let e,t={...Ow,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:iw(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=(xv(t.defaultValues)||xv(t.values))&&Nv(t.defaultValues||t.values)||{},i=t.shouldUnregister?{}:Nv(s),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...c};const d={array:ew(),state:ew()},h=t.criteriaMode===Fv,f=async e=>{if(!t.disabled&&(c.isValid||u.isValid||e)){const e=t.resolver?rw((await v()).errors):await w(r,!0);e!==n.isValid&&d.state.next({isValid:e})}},p=(e,r)=>{!t.disabled&&(c.isValidating||c.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(o.mount)).forEach(e=>{e&&(r?Rv(n.validatingFields,e,r):uw(n.validatingFields,e))}),d.state.next({validatingFields:n.validatingFields,isValidating:!rw(n.validatingFields)}))},m=(e,t,n,o)=>{const l=jv(r,e);if(l){const r=jv(i,e,Iv(n)?jv(s,e):n);Iv(r)||o&&o.defaultChecked||t?Rv(i,e,t?r:xw(l._f)):_(e,r),a.mount&&f()}},g=(e,r,i,a,o)=>{let l=!1,h=!1;const f={name:e};if(!t.disabled){if(!i||a){(c.isDirty||u.isDirty)&&(h=n.isDirty,n.isDirty=f.isDirty=b(),l=h!==f.isDirty);const t=nw(jv(s,e),r);h=!!jv(n.dirtyFields,e),t?uw(n.dirtyFields,e):Rv(n.dirtyFields,e,!0),f.dirtyFields=n.dirtyFields,l=l||(c.dirtyFields||u.dirtyFields)&&h!==!t}if(i){const t=jv(n.touchedFields,e);t||(Rv(n.touchedFields,e,i),f.touchedFields=n.touchedFields,l=l||(c.touchedFields||u.touchedFields)&&t!==i)}l&&o&&d.state.next(f)}return l?f:{}},y=(r,s,i,a)=>{const o=jv(n.errors,r),h=(c.isValid||u.isValid)&&Av(s)&&n.isValid!==s;if(t.delayError&&i?(e=(e=>t=>{clearTimeout(l),l=setTimeout(e,t)})(()=>((e,t)=>{Rv(n.errors,e,t),d.state.next({errors:n.errors})})(r,i)),e(t.delayError)):(clearTimeout(l),e=null,i?Rv(n.errors,r,i):uw(n.errors,r)),(i?!nw(o,i):o)||!rw(a)||h){const e={...a,...h&&Av(s)?{isValid:s}:{},errors:n.errors,name:r};n={...n,...e},d.state.next(e)}},v=async e=>{p(e,!0);const n=await t.resolver(i,t.context,((e,t,n,r)=>{const s={};for(const i of e){const e=jv(t,i);e&&Rv(s,i,e._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}})(e||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return p(e),n},w=async function(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const a in e){const l=e[a];if(l){const{_f:e,...u}=l;if(e){const u=o.array.has(e.name),d=l._f&&Ew(l._f);d&&c.validatingFields&&p([a],!0);const f=await Pw(l,o.disabled,i,h,t.shouldUseNativeValidation&&!r,u);if(d&&c.validatingFields&&p([a]),f[e.name]&&(s.valid=!1,r))break;!r&&(jv(f,e.name)?u?jw(n.errors,f,e.name):Rv(n.errors,e.name,f[e.name]):uw(n.errors,e.name))}!rw(u)&&await w(u,r,s)}}return s.valid},b=(e,n)=>!t.disabled&&(e&&n&&Rv(i,e,n),!nw(T(),s)),x=(e,t,n)=>Jv(e,o,{...a.mount?i:Iv(t)?s:Yv(e)?{[e]:t}:t},n,t),_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=jv(r,e);let a=t;if(s){const n=s._f;n&&(!n.disabled&&Rv(i,e,vw(t,n)),a=aw(n.ref)&&wv(t)?"":t,ow(n.ref)?[...n.ref.options].forEach(e=>e.selected=a.includes(e.value)):n.refs?yv(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(a)?e.checked=!!a.find(t=>t===e.value):e.checked=a===e.value||!!a)}):n.refs.forEach(e=>e.checked=e.value===a):sw(n.ref)?n.ref.value="":(n.ref.value=a,n.ref.type||d.state.next({name:e,values:Nv(i)})))}(n.shouldDirty||n.shouldTouch)&&g(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&I(e)},k=(e,t,n)=>{for(const s in t){if(!t.hasOwnProperty(s))return;const i=t[s],a=e+"."+s,l=jv(r,a);(o.array.has(e)||xv(i)||l&&!l._f)&&!vv(i)?k(a,i,n):_(a,i,n)}},S=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const h=jv(r,e),f=o.array.has(e),p=Nv(t);Rv(i,e,p),f?(d.array.next({name:e,values:Nv(i)}),(c.isDirty||c.dirtyFields||u.isDirty||u.dirtyFields)&&l.shouldDirty&&d.state.next({name:e,dirtyFields:pw(s,i),isDirty:b(e,p)})):!h||h._f||wv(p)?_(e,p,l):k(e,p,l),Iw(e,o)&&d.state.next({...n}),d.state.next({name:a.mount?e:void 0,values:Nv(i)})},N=async s=>{a.mount=!0;const l=s.target;let m=l.name,b=!0;const x=jv(r,m),_=e=>{b=Number.isNaN(e)||vv(e)&&isNaN(e.getTime())||nw(e,jv(i,m,e))},k=Sw(t.mode),S=Sw(t.reValidateMode);if(x){let a,E;const T=l.type?xw(x._f):_v(s),C=s.type===Dv||s.type===Pv,j=!((N=x._f).mount&&(N.required||N.min||N.max||N.maxLength||N.minLength||N.pattern||N.validate))&&!t.resolver&&!jv(n.errors,m)&&!x._f.deps||((e,t,n,r,s)=>!s.isOnAll&&(!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:!(n?r.isOnChange:s.isOnChange)||e))(C,jv(n.touchedFields,m),n.isSubmitted,S,k),A=Iw(m,o,C);Rv(i,m,T),C?(x._f.onBlur&&x._f.onBlur(s),e&&e(0)):x._f.onChange&&x._f.onChange(s);const R=g(m,T,C),D=!rw(R)||A;if(!C&&d.state.next({name:m,type:s.type,values:Nv(i)}),j)return(c.isValid||u.isValid)&&("onBlur"===t.mode?C&&f():C||f()),D&&d.state.next({name:m,...A?{}:R});if(!C&&A&&d.state.next({...n}),t.resolver){const{errors:e}=await v([m]);if(_(T),b){const t=Cw(n.errors,r,m),s=Cw(e,r,t.name||m);a=s.error,m=s.name,E=rw(e)}}else p([m],!0),a=(await Pw(x,o.disabled,i,h,t.shouldUseNativeValidation))[m],p([m]),_(T),b&&(a?E=!1:(c.isValid||u.isValid)&&(E=await w(r,!0)));b&&(x._f.deps&&I(x._f.deps),y(m,E,a,R))}var N},E=(e,t)=>{if(jv(n.errors,t)&&e.focus)return e.focus(),1},I=async function(e){let s,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=Zv(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await v(e);if(e)for(const r of e){const e=jv(t,r);e?Rv(n.errors,r,e):uw(n.errors,r)}else n.errors=t;return t})(Iv(e)?e:l);s=rw(t),i=e?!l.some(e=>jv(t,e)):s}else e?(i=(await Promise.all(l.map(async e=>{const t=jv(r,e);return await w(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||n.isValid)&&f()):i=s=await w(r);return d.state.next({...!Yv(e)||(c.isValid||u.isValid)&&s!==n.isValid?{}:{name:e},...t.resolver||!e?{isValid:s}:{},errors:n.errors}),a.shouldFocus&&!i&&Tw(r,E,e?l:o.mount),i},T=e=>{const t={...a.mount?i:s};return Iv(e)?t:Yv(e)?jv(t,e):e.map(e=>jv(t,e))},C=(e,t)=>({invalid:!!jv((t||n).errors,e),isDirty:!!jv((t||n).dirtyFields,e),error:jv((t||n).errors,e),isValidating:!!jv(n.validatingFields,e),isTouched:!!jv((t||n).touchedFields,e)}),j=(e,t,s)=>{const i=(jv(r,e,{_f:{}})._f||{}).ref,a=jv(n.errors,e)||{},{ref:o,message:l,type:c,...u}=a;Rv(n.errors,e,{...u,...t,ref:i}),d.state.next({name:e,errors:n.errors,isValid:!1}),s&&s.shouldFocus&&i&&i.focus&&i.focus()},A=e=>d.state.subscribe({next:t=>{var r,s,a;r=e.name,s=t.name,a=e.exact,r&&s&&r!==s&&!Zv(r).some(e=>e&&(a?e===s:e.startsWith(s)||s.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:s,...i}=e;return rw(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!r||Fv))})(t,e.formState||c,F,e.reRenderRoot)||e.callback({values:{...i},...n,...t})}}).unsubscribe,R=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const l of e?Zv(e):o.mount)o.mount.delete(l),o.array.delete(l),a.keepValue||(uw(r,l),uw(i,l)),!a.keepError&&uw(n.errors,l),!a.keepDirty&&uw(n.dirtyFields,l),!a.keepTouched&&uw(n.touchedFields,l),!a.keepIsValidating&&uw(n.validatingFields,l),!t.shouldUnregister&&!a.keepDefaultValue&&uw(s,l);d.state.next({values:Nv(i)}),d.state.next({...n,...a.keepDirty?{isDirty:b()}:{}}),!a.keepIsValid&&f()},D=e=>{let{disabled:t,name:n}=e;(Av(t)&&a.mount||t||o.disabled.has(n))&&(t?o.disabled.add(n):o.disabled.delete(n))},P=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=jv(r,e);const l=Av(n.disabled)||Av(t.disabled);return Rv(r,e,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:e}},name:e,mount:!0,...n}}),o.mount.add(e),i?D({disabled:Av(n.disabled)?n.disabled:t.disabled,name:e}):m(e,!0,n.value),{...l?{disabled:n.disabled||t.disabled}:{},...t.progressive?{required:!!n.required,min:kw(n.min),max:kw(n.max),minLength:kw(n.minLength),maxLength:kw(n.maxLength),pattern:kw(n.pattern)}:{},name:e,onChange:N,onBlur:N,ref:l=>{if(l){P(e,n),i=jv(r,e);const t=Iv(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,a=(e=>lw(e)||yv(e))(t),o=i._f.refs||[];if(a?o.find(e=>e===t):t===i._f.ref)return;Rv(r,e,{_f:{...i._f,...a?{refs:[...o.filter(cw),t,...Array.isArray(jv(s,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),m(e,!1,void 0,t)}else i=jv(r,e,{}),i._f&&(i._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&(!kv(o.array,e)||!a.action)&&o.unMount.add(e)}}},O=()=>t.shouldFocusError&&Tw(r,E,o.mount),L=(e,s)=>async a=>{let l;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=Nv(i);if(d.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await v();n.errors=e,c=Nv(t)}else await w(r);if(o.disabled.size)for(const e of o.disabled)uw(c,e);if(uw(n.errors,"root"),rw(n.errors)){d.state.next({errors:{}});try{await e(c,a)}catch(u){l=u}}else s&&await s({...n.errors},a),O(),setTimeout(O);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:rw(n.errors)&&!l,submitCount:n.submitCount+1,errors:n.errors}),l)throw l},M=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=e?Nv(e):s,h=Nv(u),f=rw(e),p=f?s:h;if(l.keepDefaultValues||(s=u),!l.keepValues){if(l.keepDirtyValues){const e=new Set([...o.mount,...Object.keys(pw(s,i))]);for(const t of Array.from(e))jv(n.dirtyFields,t)?Rv(p,t,jv(i,t)):S(t,jv(p,t))}else{if(Sv&&Iv(e))for(const e of o.mount){const t=jv(r,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(aw(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(l.keepFieldsRef)for(const e of o.mount)S(e,jv(p,e));else r={}}i=t.shouldUnregister?l.keepDefaultValues?Nv(s):{}:Nv(p),d.array.next({values:{...p}}),d.state.next({values:{...p}})}o={mount:l.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!c.isValid||!!l.keepIsValid||!!l.keepDirtyValues,a.watch=!!t.shouldUnregister,d.state.next({submitCount:l.keepSubmitCount?n.submitCount:0,isDirty:!f&&(l.keepDirty?n.isDirty:!(!l.keepDefaultValues||nw(e,s))),isSubmitted:!!l.keepIsSubmitted&&n.isSubmitted,dirtyFields:f?{}:l.keepDirtyValues?l.keepDefaultValues&&i?pw(s,i):n.dirtyFields:l.keepDefaultValues&&e?pw(s,e):l.keepDirty?n.dirtyFields:{},touchedFields:l.keepTouched?n.touchedFields:{},errors:l.keepErrors?n.errors:{},isSubmitSuccessful:!!l.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},U=(e,t)=>M(iw(e)?e(i):e,t),F=e=>{n={...n,...e}},V={control:{register:P,unregister:R,getFieldState:C,handleSubmit:L,setError:j,_subscribe:A,_runSchema:v,_focusError:O,_getWatch:x,_getDirty:b,_setValid:f,_setFieldArray:function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,h=arguments.length>3?arguments[3]:void 0,f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(h&&l&&!t.disabled){if(a.action=!0,p&&Array.isArray(jv(r,e))){const t=l(jv(r,e),h.argA,h.argB);f&&Rv(r,e,t)}if(p&&Array.isArray(jv(n.errors,e))){const t=l(jv(n.errors,e),h.argA,h.argB);f&&Rv(n.errors,e,t),((e,t)=>{!Tv(jv(e,t)).length&&uw(e,t)})(n.errors,e)}if((c.touchedFields||u.touchedFields)&&p&&Array.isArray(jv(n.touchedFields,e))){const t=l(jv(n.touchedFields,e),h.argA,h.argB);f&&Rv(n.touchedFields,e,t)}(c.dirtyFields||u.dirtyFields)&&(n.dirtyFields=pw(s,i)),d.state.next({name:e,isDirty:b(e,o),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Rv(i,e,o)},_setDisabledField:D,_setErrors:e=>{n.errors=e,d.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>Tv(jv(a.mount?i:s,e,t.shouldUnregister?jv(s,e,[]):[])),_reset:M,_resetDefaultValues:()=>iw(t.defaultValues)&&t.defaultValues().then(e=>{U(e,t.resetOptions),d.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of o.unMount){const t=jv(r,e);t&&(t._f.refs?t._f.refs.every(e=>!cw(e)):!cw(t._f.ref))&&R(e)}o.unMount=new Set},_disableForm:e=>{Av(e)&&(d.state.next({disabled:e}),Tw(r,(t,n)=>{const s=jv(r,n);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:d,_proxyFormState:c,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(e){a=e},get _defaultValues(){return s},get _names(){return o},set _names(e){o=e},get _formState(){return n},get _options(){return t},set _options(e){t={...t,...e}}},subscribe:e=>(a.mount=!0,u={...u,...e.formState},A({...e,formState:u})),trigger:I,register:P,handleSubmit:L,watch:(e,t)=>iw(e)?d.state.subscribe({next:n=>e(x(void 0,t),n)}):x(e,t,!0),setValue:S,getValues:T,reset:U,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jv(r,e)&&(Iv(t.defaultValue)?S(e,Nv(jv(s,e))):(S(e,t.defaultValue),Rv(s,e,Nv(t.defaultValue))),t.keepTouched||uw(n.touchedFields,e),t.keepDirty||(uw(n.dirtyFields,e),n.isDirty=t.defaultValue?b(e,Nv(jv(s,e))):b()),t.keepError||(uw(n.errors,e),c.isValid&&f()),d.state.next({...n}))},clearErrors:e=>{e&&Zv(e).forEach(e=>uw(n.errors,e)),d.state.next({errors:e?n.errors:{}})},unregister:R,setError:j,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=jv(r,e),s=n&&n._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&iw(e.select)&&e.select())}},getFieldState:C};return{...V,formControl:V}}function Mw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=s.useRef(void 0),n=s.useRef(void 0),[r,i]=s.useState({isDirty:!1,isValidating:!1,isLoading:iw(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:iw(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!iw(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:n,...s}=Lw(e);t.current={...s,formState:r}}const a=t.current.control;return a._options=e,Qv(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),a._formState.isReady=!0,e},[a]),s.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),s.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),s.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),s.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),s.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==r.isDirty&&a._subjects.state.next({isDirty:e})}},[a,r.isDirty]),s.useEffect(()=>{e.values&&!nw(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=e.values,i(e=>({...e}))):a._resetDefaultValues()},[a,e.values]),s.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=Gv(r,a),t.current}const Uw=Jy("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Fw=Jy("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Vw=Jy("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),zw=Jy("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qw=(0,s.forwardRef)((e,t)=>{let{label:n,error:r,helperText:s,leftIcon:i,rightIcon:a,className:o="",id:l,...c}=e;const u=l||`input-${Math.random().toString(36).substr(2,9)}`;return(0,iv.jsxs)("div",{className:"w-full",children:[n&&(0,iv.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,iv.jsxs)("div",{className:"relative",children:[i&&(0,iv.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,iv.jsx)("div",{className:"h-5 w-5 text-gray-400",children:i})}),(0,iv.jsx)("input",{ref:t,id:u,className:`\n            w-full px-3 py-2 border rounded-lg transition-colors duration-200\n            focus:outline-none focus:ring-2 focus:ring-offset-0\n            ${i?"pl-10":""}\n            ${a?"pr-10":""}\n            ${r?"border-error-300 focus:ring-error-500 focus:border-error-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}\n            ${o}\n          `,...c}),a&&(0,iv.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,iv.jsx)("div",{className:"h-5 w-5 text-gray-400",children:a})})]}),r&&(0,iv.jsx)("p",{className:"mt-1 text-sm text-error-600",children:r}),s&&!r&&(0,iv.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s})]})});qw.displayName="Input";const Bw=qw,$w=()=>{var e,t;const{signIn:n,loading:r,error:i,createDemoUser:a}=Qy(),o=ee(),[l,c]=(0,s.useState)(!1),{register:u,handleSubmit:d,formState:{errors:h}}=Mw();return(0,iv.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,iv.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("div",{className:"mx-auto h-12 w-12 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-white font-bold text-xl",children:"S"})}),(0,iv.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,iv.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,iv.jsx)(Ce,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a new account"})]})]}),(0,iv.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:d(async e=>{try{await n(e.email,e.password),Ct.success("Successfully signed in!"),o("/")}catch(i){Ct.error(i.message||"Failed to sign in")}}),children:[(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsx)(Bw,{label:"Email Address",type:"email",leftIcon:(0,iv.jsx)(Uw,{className:"w-5 h-5"}),error:null===(e=h.email)||void 0===e?void 0:e.message,...u("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),(0,iv.jsx)(Bw,{label:"Password",type:l?"text":"password",leftIcon:(0,iv.jsx)(Fw,{className:"w-5 h-5"}),rightIcon:(0,iv.jsx)("button",{type:"button",onClick:()=>c(!l),className:"text-gray-400 hover:text-gray-600",children:l?(0,iv.jsx)(Vw,{className:"w-5 h-5"}):(0,iv.jsx)(zw,{className:"w-5 h-5"})}),error:null===(t=h.password)||void 0===t?void 0:t.message,...u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})})]}),i&&(0,iv.jsx)("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:(0,iv.jsx)("p",{className:"text-sm text-error-600",children:i})}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,iv.jsx)("div",{className:"text-sm",children:(0,iv.jsx)("button",{type:"button",className:"font-medium text-primary-600 hover:text-primary-500",onClick:()=>Ct.error("Password reset not implemented yet"),children:"Forgot your password?"})})]}),(0,iv.jsx)(ov,{type:"submit",className:"w-full",loading:r,children:"Sign in"}),(0,iv.jsx)(ov,{type:"button",variant:"outline",className:"w-full",onClick:async()=>{try{await a(),Ct.success("Demo user created and signed in!"),o("/")}catch(i){Ct.error(i.message||"Failed to create demo user")}},disabled:r,children:"Try Demo Account"})]}),(0,iv.jsxs)("div",{className:"mt-6",children:[(0,iv.jsxs)("div",{className:"relative",children:[(0,iv.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,iv.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,iv.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,iv.jsx)("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),(0,iv.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,iv.jsxs)(ov,{variant:"outline",className:"w-full",onClick:()=>Ct.error("Google sign-in not implemented yet"),children:[(0,iv.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,iv.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,iv.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,iv.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,iv.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,iv.jsx)("span",{className:"ml-2",children:"Google"})]}),(0,iv.jsxs)(ov,{variant:"outline",className:"w-full",onClick:()=>Ct.error("GitHub sign-in not implemented yet"),children:[(0,iv.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,iv.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),(0,iv.jsx)("span",{className:"ml-2",children:"GitHub"})]})]})]})]})})},Hw=()=>{var e,t,n,r;const{signUp:i,loading:a,error:o}=Qy(),l=ee(),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),{register:f,handleSubmit:p,watch:m,formState:{errors:g,isValid:y,isDirty:v}}=Mw({mode:"onChange"}),w=m("password"),b=m();console.log("Form values:",b),console.log("Form errors:",g),console.log("Form is valid:",y),console.log("Form is dirty:",v);return(0,iv.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,iv.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("div",{className:"mx-auto h-12 w-12 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-white font-bold text-xl",children:"S"})}),(0,iv.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,iv.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,iv.jsx)(Ce,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your existing account"})]})]}),(0,iv.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p(async e=>{console.log("Form data:",e);try{await i(e.email,e.password,e.name),Ct.success("Account created successfully!"),l("/")}catch(o){Ct.error(o.message||"Failed to create account")}}),children:[(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsx)(Bw,{label:"Full Name",type:"text",leftIcon:(0,iv.jsx)(ev,{className:"w-5 h-5"}),error:null===(e=g.name)||void 0===e?void 0:e.message,...f("name",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),(0,iv.jsx)(Bw,{label:"Email Address",type:"email",leftIcon:(0,iv.jsx)(Uw,{className:"w-5 h-5"}),error:null===(t=g.email)||void 0===t?void 0:t.message,...f("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),(0,iv.jsx)(Bw,{label:"Password",type:c?"text":"password",leftIcon:(0,iv.jsx)(Fw,{className:"w-5 h-5"}),rightIcon:(0,iv.jsx)("button",{type:"button",onClick:()=>u(!c),className:"text-gray-400 hover:text-gray-600",children:c?(0,iv.jsx)(Vw,{className:"w-5 h-5"}):(0,iv.jsx)(zw,{className:"w-5 h-5"})}),error:null===(n=g.password)||void 0===n?void 0:n.message,helperText:"Must be at least 6 characters long",...f("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),(0,iv.jsx)(Bw,{label:"Confirm Password",type:d?"text":"password",leftIcon:(0,iv.jsx)(Fw,{className:"w-5 h-5"}),rightIcon:(0,iv.jsx)("button",{type:"button",onClick:()=>h(!d),className:"text-gray-400 hover:text-gray-600",children:d?(0,iv.jsx)(Vw,{className:"w-5 h-5"}):(0,iv.jsx)(zw,{className:"w-5 h-5"})}),error:null===(r=g.confirmPassword)||void 0===r?void 0:r.message,...f("confirmPassword",{required:"Please confirm your password",validate:e=>e===w||"Passwords do not match"})})]}),o&&(0,iv.jsx)("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:(0,iv.jsx)("p",{className:"text-sm text-error-600",children:o})}),(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("input",{id:"agree-terms",name:"agree-terms",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsxs)("label",{htmlFor:"agree-terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",(0,iv.jsx)("button",{type:"button",className:"text-primary-600 hover:text-primary-500",onClick:()=>Ct.error("Terms of Service not implemented yet"),children:"Terms of Service"})," ","and"," ",(0,iv.jsx)("button",{type:"button",className:"text-primary-600 hover:text-primary-500",onClick:()=>Ct.error("Privacy Policy not implemented yet"),children:"Privacy Policy"})]})]}),(0,iv.jsx)(ov,{type:"submit",className:"w-full",loading:a,children:"Create Account"}),(0,iv.jsx)(ov,{type:"button",variant:"outline",className:"w-full",onClick:()=>{console.log("Current form errors:",g),console.log("Current form values:",m())},children:"Debug Form"})]}),(0,iv.jsxs)("div",{className:"mt-6",children:[(0,iv.jsxs)("div",{className:"relative",children:[(0,iv.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,iv.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,iv.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,iv.jsx)("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),(0,iv.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,iv.jsxs)(ov,{variant:"outline",className:"w-full",onClick:()=>Ct.error("Google sign-in not implemented yet"),children:[(0,iv.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,iv.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,iv.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,iv.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,iv.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,iv.jsx)("span",{className:"ml-2",children:"Google"})]}),(0,iv.jsxs)(ov,{variant:"outline",className:"w-full",onClick:()=>Ct.error("GitHub sign-in not implemented yet"),children:[(0,iv.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,iv.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),(0,iv.jsx)("span",{className:"ml-2",children:"GitHub"})]})]})]})]})})},Ww=Jy("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Kw=Jy("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Gw=Jy("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Qw=Jy("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Yw=Jy("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Jw=()=>{const{user:e,updateUserProfile:t,loading:n}=Qy(),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)("offered"),[u,d]=(0,s.useState)({name:"",category:"",level:"intermediate"}),[h,f]=(0,s.useState)((null===e||void 0===e?void 0:e.availability)||{weekends:!1,evenings:!1}),[p,m]=(0,s.useState)((null===e||void 0===e?void 0:e.isPublic)||!0);if(!e)return(0,iv.jsx)(av,{});const g=async(n,r)=>{const s="offered"===r?e.skillsOffered.filter(e=>e.id!==n):e.skillsWanted.filter(e=>e.id!==n);try{await t({["offered"===r?"skillsOffered":"skillsWanted"]:s}),Ct.success("Skill removed successfully!")}catch(i){Ct.error(i.message||"Failed to remove skill")}},y=e=>{switch(e){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-orange-100 text-orange-800";case"expert":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,iv.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Manage your skills and preferences"})]}),(0,iv.jsx)(ov,{variant:r?"outline":"primary",onClick:()=>i(!r),loading:n,children:r?(0,iv.jsxs)(iv.Fragment,{children:[(0,iv.jsx)(rv,{className:"w-4 h-4 mr-2"}),"Cancel"]}):(0,iv.jsxs)(iv.Fragment,{children:[(0,iv.jsx)(Ww,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),(0,iv.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,iv.jsx)("div",{className:"lg:col-span-1",children:(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsxs)("div",{className:"text-center mb-6",children:[e.photoURL?(0,iv.jsx)("img",{src:e.photoURL,alt:e.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}):(0,iv.jsx)("div",{className:"w-24 h-24 bg-primary-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-primary-600 font-bold text-2xl",children:e.name.charAt(0).toUpperCase()})}),(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),(0,iv.jsx)("p",{className:"text-gray-600",children:e.email})]}),(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(fv,{className:"w-4 h-4 text-warning-500 mr-2"}),(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Trust Score"})]}),(0,iv.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.trustScore,"/100"]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(Kw,{className:"w-4 h-4 text-primary-500 mr-2"}),(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Points"})]}),(0,iv.jsx)("span",{className:"font-semibold text-gray-900",children:e.points})]}),e.location&&(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(Gw,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:e.location})]})]}),e.badges.length>0&&(0,iv.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,iv.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Badges"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2",children:e.badges.map(e=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-primary-100 text-primary-800 rounded-full",title:e.description,children:e.name},e.id))})]})]})}),(0,iv.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Skills Offered"}),r&&(0,iv.jsxs)(ov,{size:"sm",onClick:()=>{c("offered"),o(!0)},children:[(0,iv.jsx)(Qw,{className:"w-4 h-4 mr-2"}),"Add Skill"]})]}),(0,iv.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.skillsOffered.map(e=>(0,iv.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full bg-primary-50 border border-primary-200",children:[(0,iv.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${y(e.level)}`,children:e.name}),r&&(0,iv.jsx)("button",{onClick:()=>g(e.id,"offered"),className:"text-primary-600 hover:text-primary-800",children:(0,iv.jsx)(rv,{className:"w-3 h-3"})})]},e.id)),0===e.skillsOffered.length&&(0,iv.jsx)("p",{className:"text-gray-500 text-sm",children:"No skills offered yet"})]})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Skills Wanted"}),r&&(0,iv.jsxs)(ov,{size:"sm",onClick:()=>{c("wanted"),o(!0)},children:[(0,iv.jsx)(Qw,{className:"w-4 h-4 mr-2"}),"Add Skill"]})]}),(0,iv.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.skillsWanted.map(e=>(0,iv.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full bg-secondary-50 border border-secondary-200",children:[(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-secondary-100 text-secondary-800 rounded-full",children:e.name}),r&&(0,iv.jsx)("button",{onClick:()=>g(e.id,"wanted"),className:"text-secondary-600 hover:text-secondary-800",children:(0,iv.jsx)(rv,{className:"w-3 h-3"})})]},e.id)),0===e.skillsWanted.length&&(0,iv.jsx)("p",{className:"text-gray-500 text-sm",children:"No skills wanted yet"})]})]}),r&&(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Settings"}),(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Availability"}),(0,iv.jsxs)("div",{className:"space-y-2",children:[(0,iv.jsxs)("label",{className:"flex items-center",children:[(0,iv.jsx)("input",{type:"checkbox",checked:h.weekends,onChange:e=>f({...h,weekends:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Weekends"})]}),(0,iv.jsxs)("label",{className:"flex items-center",children:[(0,iv.jsx)("input",{type:"checkbox",checked:h.evenings,onChange:e=>f({...h,evenings:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Evenings"})]})]})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Profile Visibility"}),(0,iv.jsxs)("label",{className:"flex items-center",children:[(0,iv.jsx)("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Public Profile"})]})]})]}),(0,iv.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,iv.jsxs)(ov,{onClick:async()=>{try{await t({availability:h,isPublic:p}),i(!1),Ct.success("Profile updated successfully!")}catch(e){Ct.error(e.message||"Failed to update profile")}},loading:n,className:"w-full",children:[(0,iv.jsx)(Yw,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]}),a&&(0,iv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,iv.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,iv.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add ","offered"===l?"Offered":"Wanted"," Skill"]}),(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsx)(Bw,{label:"Skill Name",value:u.name,onChange:e=>d({...u,name:e.target.value}),placeholder:"e.g., JavaScript, Cooking, Guitar"}),(0,iv.jsx)(Bw,{label:"Category",value:u.category,onChange:e=>d({...u,category:e.target.value}),placeholder:"e.g., Technology, Arts, Sports"}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level"}),(0,iv.jsxs)("select",{value:u.level,onChange:e=>d({...u,level:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,iv.jsx)("option",{value:"beginner",children:"Beginner"}),(0,iv.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,iv.jsx)("option",{value:"advanced",children:"Advanced"}),(0,iv.jsx)("option",{value:"expert",children:"Expert"})]})]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[(0,iv.jsx)(ov,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),(0,iv.jsx)(ov,{onClick:async()=>{if(!u.name.trim())return;const n={id:Date.now().toString(),name:u.name,category:u.category,level:u.level},r="offered"===l?[...e.skillsOffered,n]:[...e.skillsWanted,n];try{await t({["offered"===l?"skillsOffered":"skillsWanted"]:r}),d({name:"",category:"",level:"intermediate"}),o(!1),Ct.success("Skill added successfully!")}catch(s){Ct.error(s.message||"Failed to add skill")}},disabled:!u.name.trim(),children:"Add Skill"})]})]})})]})},Xw=Jy("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Zw=Jy("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eb=Ut((e,t)=>({swapRequests:[],loading:!1,error:null,createSwapRequest:async(t,n,r,s)=>{try{e({loading:!0,error:null});const{user:i}=Qy.getState();if(!i)throw new Error("User not authenticated");const a={fromUserId:i.id,toUserId:t,fromUser:i,toUser:n,skillsExchanged:r,status:"pending",message:s,createdAt:new Date,updatedAt:new Date},o=await dy(ng(Gy,"swapRequests"),{...a,createdAt:yy(),updatedAt:yy()});console.log("\u2705 Swap request created in Firebase:",{requestData:a});const{createNotification:l}=uv.getState();await l({userId:t,type:"swap_request",title:"New Swap Request",message:`${i.name} wants to swap skills with you!`,isRead:!1,relatedId:o.id});const c={...a,id:o.id,createdAt:new Date,updatedAt:new Date};e(e=>({swapRequests:[...e.swapRequests,c]})),e({loading:!1})}catch(i){e({error:i.message,loading:!1})}},acceptSwapRequest:async(n,r)=>{try{e({loading:!0,error:null});const{user:s}=Qy.getState();if(!s)throw new Error("User not authenticated");console.log("\ud83d\udd04 Accepting swap request:",n),console.log("\ud83d\udc64 Current user:",s.id);const i=t().swapRequests.find(e=>e.id===n);console.log("\ud83d\udccb Current request in state:",i);const a=rg(Gy,"swapRequests",n);if(console.log("\ud83d\udcc4 Firebase document reference:",a.path),console.log("\ud83d\udd04 Testing Firebase update..."),await uy(a,{status:"accepted",responseMessage:r,updatedAt:yy()}),console.log("\u2705 Firebase updated successfully"),i){const{createNotification:e}=uv.getState();await e({userId:i.fromUserId,type:"swap_accepted",title:"Swap Request Accepted",message:`${s.name} accepted your swap request!`,isRead:!1,relatedId:n}),console.log("\u2705 Notification created")}console.log("\ud83d\udd04 Updating local state..."),e(e=>{const t=e.swapRequests.map(e=>e.id===n?{...e,status:"accepted",responseMessage:r,updatedAt:new Date}:e);return console.log("\ud83d\udcca Updated requests:",t.map(e=>({id:e.id,status:e.status}))),{swapRequests:t}}),console.log("\u2705 Local state updated successfully"),e({loading:!1})}catch(s){console.error("\u274c Error accepting swap request:",s),console.error("\u274c Error details:",{code:s.code,message:s.message,stack:s.stack}),e({error:s.message,loading:!1})}},rejectSwapRequest:async(n,r)=>{try{e({loading:!0,error:null});const{user:s}=Qy.getState();if(!s)throw new Error("User not authenticated");console.log("\ud83d\udd04 Rejecting swap request:",n);const i=rg(Gy,"swapRequests",n);await uy(i,{status:"rejected",responseMessage:r,updatedAt:yy()}),console.log("\u2705 Firebase updated successfully");const a=t().swapRequests.find(e=>e.id===n);if(a){const{createNotification:e}=uv.getState();await e({userId:a.fromUserId,type:"swap_rejected",title:"Swap Request Rejected",message:`${s.name} declined your swap request.`,isRead:!1,relatedId:n})}e(e=>({swapRequests:e.swapRequests.map(e=>e.id===n?{...e,status:"rejected",responseMessage:r,updatedAt:new Date}:e)})),console.log("\u2705 Local state updated, waiting for real-time sync..."),e({loading:!1})}catch(s){console.error("\u274c Error rejecting swap request:",s),e({error:s.message,loading:!1})}},completeSwapRequest:async(t,n)=>{try{e({loading:!0,error:null});const r=rg(Gy,"swapRequests",t);await uy(r,{status:"completed",completedAt:yy(),notes:n,updatedAt:yy()}),e(e=>({swapRequests:e.swapRequests.map(e=>e.id===t?{...e,status:"completed",completedAt:new Date,notes:n,updatedAt:new Date}:e)})),e({loading:!1})}catch(r){e({error:r.message,loading:!1})}},cancelSwapRequest:async t=>{try{e({loading:!0,error:null});const n=rg(Gy,"swapRequests",t);await uy(n,{status:"cancelled",updatedAt:yy()}),e(e=>({swapRequests:e.swapRequests.map(e=>e.id===t?{...e,status:"cancelled",updatedAt:new Date}:e)})),e({loading:!1})}catch(n){e({error:n.message,loading:!1})}},deleteSwapRequest:async t=>{try{e({loading:!0,error:null});const n=rg(Gy,"swapRequests",t);await uy(n,{status:"deleted",updatedAt:yy()}),e(e=>({swapRequests:e.swapRequests.filter(e=>e.id!==t)})),e({loading:!1})}catch(n){e({error:n.message,loading:!1})}},fetchSwapRequests:t=>{e({loading:!0}),console.log("\ud83d\udd04 Fetching swap requests for user:",t);const n=hy(qg(ng(Gy,"swapRequests"),Kg("createdAt","desc")),n=>{console.log("\ud83d\udce1 Real-time update received, documents count:",n.docs.length);const r=[];n.forEach(e=>{var n,s,i,a,o;const l=e.data();console.log("\ud83d\udcc4 Document data:",{id:e.id,status:l.status,fromUserId:l.fromUserId,toUserId:l.toUserId,updatedAt:(null===(n=l.updatedAt)||void 0===n||null===(s=n.toDate)||void 0===s?void 0:s.call(n))||"no date"});const c={id:e.id,fromUserId:l.fromUserId,toUserId:l.toUserId,fromUser:l.fromUser,toUser:l.toUser,skillsExchanged:l.skillsExchanged,status:l.status||"pending",message:l.message,responseMessage:l.responseMessage,notes:l.notes,createdAt:(null===(i=l.createdAt)||void 0===i?void 0:i.toDate())||new Date,updatedAt:(null===(a=l.updatedAt)||void 0===a?void 0:a.toDate())||new Date,completedAt:null===(o=l.completedAt)||void 0===o?void 0:o.toDate()};c.fromUserId===t||c.toUserId===t?(r.push(c),console.log("\u2705 Including request:",{id:c.id,status:c.status,fromUserId:c.fromUserId,toUserId:c.toUserId,isCurrentUserSender:c.fromUserId===t,isCurrentUserReceiver:c.toUserId===t})):console.log("\u274c Excluding request (user not involved):",{id:c.id,fromUserId:c.fromUserId,toUserId:c.toUserId,currentUserId:t})}),console.log("\ud83d\udcca Final filtered requests:",r.map(e=>({id:e.id,status:e.status,fromUserId:e.fromUserId,toUserId:e.toUserId}))),e({swapRequests:[...r],loading:!1})},t=>{console.error("\u274c Error fetching swap requests:",t),e({error:t.message,loading:!1})});return n},refreshSwapRequests:async n=>{try{console.log("\ud83d\udd04 Manual refresh triggered for user:",n),e({loading:!0});const{fetchSwapRequests:r}=t();r(n),await new Promise(e=>setTimeout(e,500)),e({loading:!1})}catch(r){console.error("\u274c Error refreshing swap requests:",r),e({error:r.message,loading:!1})}},testFirebaseConnection:async()=>{try{console.log("\ud83d\udd04 Testing Firebase connection...");const e=await dy(ng(Gy,"test"),{message:"Test message",timestamp:yy()});console.log("\u2705 Test document created:",e.id);rg(Gy,"test",e.id);console.log("\u2705 Firebase connection test successful")}catch(e){throw console.error("\u274c Firebase connection test failed:",e),e}},setLoading:t=>{e({loading:t})},setError:t=>{e({error:t})}})),tb=Jy("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),nb=Jy("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),rb=Jy("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),sb=e=>{let{user:t,onClose:n,onSubmit:r,loading:i}=e;const{user:a}=Qy(),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[d,h]=(0,s.useState)(""),f=(e,t,n)=>{const r=t.some(t=>t.id===e.id);n(r?t.filter(t=>t.id!==e.id):[...t,e])},p=o.length>0&&c.length>0;return(0,iv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,iv.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,iv.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)(Zy,{className:"w-5 h-5 text-primary-600"})}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Request Skill Swap"}),(0,iv.jsxs)("p",{className:"text-sm text-gray-600",children:["with ",t.name]})]})]}),(0,iv.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,iv.jsx)(rv,{className:"w-6 h-6"})})]}),(0,iv.jsxs)("div",{className:"p-6 space-y-6",children:[(0,iv.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Your Skills (What you'll teach)"}),(0,iv.jsx)("div",{className:"space-y-2",children:null===a||void 0===a?void 0:a.skillsOffered.map(e=>(0,iv.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,iv.jsx)("input",{type:"checkbox",checked:o.some(t=>t.id===e.id),onChange:()=>f(e,o,l),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsxs)("div",{className:"flex-1",children:[(0,iv.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,iv.jsx)("div",{className:"text-sm text-gray-500 capitalize",children:e.level})]})]},e.id))})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:[t.name,"'s Skills (What you'll learn)"]}),(0,iv.jsx)("div",{className:"space-y-2",children:t.skillsOffered.map(e=>(0,iv.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,iv.jsx)("input",{type:"checkbox",checked:c.some(t=>t.id===e.id),onChange:()=>f(e,c,u),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,iv.jsxs)("div",{className:"flex-1",children:[(0,iv.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,iv.jsx)("div",{className:"text-sm text-gray-500 capitalize",children:e.level})]})]},e.id))})]})]}),(o.length>0||c.length>0)&&(0,iv.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,iv.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Swap Summary"}),(0,iv.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"You'll teach:"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(e=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-primary-100 text-primary-800 rounded-full",children:e.name},e.id))})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"You'll learn:"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map(e=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-secondary-100 text-secondary-800 rounded-full",children:e.name},e.id))})]})]})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (Optional)"}),(0,iv.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:"Introduce yourself and suggest how you'd like to arrange the skill swap...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,iv.jsx)(ov,{variant:"outline",onClick:n,disabled:i,children:"Cancel"}),(0,iv.jsxs)(ov,{onClick:async()=>{0!==o.length&&0!==c.length&&await r({offered:o,wanted:c},d)},disabled:!p||i,loading:i,children:["Send Request",(0,iv.jsx)(mv,{className:"w-4 h-4 ml-2"})]})]})]})})},ib=Ut((e,t)=>({users:[],reports:[],loading:!1,error:null,fetchAllUsers:async()=>{try{e({loading:!0,error:null});const t=qg(ng(Gy,"users"),Kg("createdAt","desc")),n=await ly(t),r=[];n.forEach(e=>{var t,n;const s=e.data();r.push({id:e.id,...s,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(n=s.updatedAt)||void 0===n?void 0:n.toDate())||new Date})}),e({users:r,loading:!1})}catch(t){e({error:t.message,loading:!1})}},banUser:async(n,r)=>{try{e({loading:!0,error:null});const s=vy(Gy),i=rg(Gy,"users",n);s.update(i,{isBanned:!0,banReason:r,bannedAt:yy(),updatedAt:yy()});const a=rg(ng(Gy,"notifications"));s.set(a,{userId:n,type:"system",title:"Account Suspended",message:`Your account has been suspended for: ${r}. Please contact support if you believe this is an error.`,isRead:!1,createdAt:yy()}),await s.commit(),await t().fetchAllUsers(),e({loading:!1})}catch(s){e({error:s.message,loading:!1})}},unbanUser:async n=>{try{e({loading:!0,error:null});const r=vy(Gy),s=rg(Gy,"users",n);r.update(s,{isBanned:!1,banReason:null,bannedAt:null,updatedAt:yy()});const i=rg(ng(Gy,"notifications"));r.set(i,{userId:n,type:"system",title:"Account Restored",message:"Your account has been restored. You can now use the platform normally.",isRead:!1,createdAt:yy()}),await r.commit(),await t().fetchAllUsers(),e({loading:!1})}catch(r){e({error:r.message,loading:!1})}},updateUserRole:async(n,r)=>{try{e({loading:!0,error:null});const s=rg(Gy,"users",n);await uy(s,{role:r,updatedAt:yy()}),await t().fetchAllUsers(),e({loading:!1})}catch(s){e({error:s.message,loading:!1})}},fetchReports:async()=>{try{e({loading:!0,error:null});const t=qg(ng(Gy,"reports"),Kg("createdAt","desc")),n=await ly(t),r=[];n.forEach(e=>{var t,n;const s=e.data();r.push({id:e.id,...s,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,resolvedAt:null===(n=s.resolvedAt)||void 0===n?void 0:n.toDate()})}),e({reports:r,loading:!1})}catch(t){e({error:t.message,loading:!1})}},resolveReport:async(n,r,s)=>{try{e({loading:!0,error:null});const i=rg(Gy,"reports",n);await uy(i,{status:r,resolvedAt:yy(),resolvedBy:s}),await t().fetchReports(),e({loading:!1})}catch(i){e({error:i.message,loading:!1})}},createReport:async(t,n,r,s,i)=>{try{e({loading:!0,error:null});const a={reporterId:t,reportedUserId:s,reportedSwapId:i,reason:n,description:r,status:"pending",createdAt:yy()};await dy(ng(Gy,"reports"),a),e({loading:!1})}catch(a){e({error:a.message,loading:!1})}},rejectSkillDescription:async(t,n,r)=>{try{e({loading:!0,error:null});const s=rg(Gy,"users",t);await uy(s,{[`skillDescriptions.${n}.status`]:"rejected",[`skillDescriptions.${n}.rejectionReason`]:r,updatedAt:yy()}),e({loading:!1})}catch(s){e({error:s.message,loading:!1})}},approveSkillDescription:async(t,n)=>{try{e({loading:!0,error:null});const r=rg(Gy,"users",t);await uy(r,{[`skillDescriptions.${n}.status`]:"approved",updatedAt:yy()}),e({loading:!1})}catch(r){e({error:r.message,loading:!1})}},sendPlatformMessage:async(t,n,r)=>{try{e({loading:!0,error:null});const s=vy(Gy);if(r&&r.length>0)r.forEach(e=>{const r=rg(ng(Gy,"notifications"));s.set(r,{userId:e,type:"system",title:t,message:n,isRead:!1,createdAt:yy()})});else{(await ly(ng(Gy,"users"))).forEach(e=>{const r=rg(ng(Gy,"notifications"));s.set(r,{userId:e.id,type:"system",title:t,message:n,isRead:!1,createdAt:yy()})})}await s.commit(),e({loading:!1})}catch(s){e({error:s.message,loading:!1})}},exportUserData:async()=>{try{e({loading:!0,error:null});const t=await ly(ng(Gy,"users")),n=[];t.forEach(e=>{var t,r,s,i;const a=e.data();n.push({id:e.id,name:a.name,email:a.email,location:a.location,role:a.role,isPublic:a.isPublic,isBanned:a.isBanned||!1,trustScore:a.trustScore,points:a.points,skillsOffered:(null===(t=a.skillsOffered)||void 0===t?void 0:t.length)||0,skillsWanted:(null===(r=a.skillsWanted)||void 0===r?void 0:r.length)||0,createdAt:(null===(s=a.createdAt)||void 0===s?void 0:s.toDate())||new Date,updatedAt:(null===(i=a.updatedAt)||void 0===i?void 0:i.toDate())||new Date})});const r=ab(n);return e({loading:!1}),r}catch(t){return e({error:t.message,loading:!1}),""}},exportSwapData:async()=>{try{e({loading:!0,error:null});const t=await ly(ng(Gy,"swap_requests")),n=[];t.forEach(e=>{var t,r,s,i,a,o,l;const c=e.data();n.push({id:e.id,fromUserId:c.fromUserId,toUserId:c.toUserId,status:c.status,skillsOffered:(null===(t=c.skillsExchanged)||void 0===t||null===(r=t.offered)||void 0===r?void 0:r.length)||0,skillsWanted:(null===(s=c.skillsExchanged)||void 0===s||null===(i=s.wanted)||void 0===i?void 0:i.length)||0,createdAt:(null===(a=c.createdAt)||void 0===a?void 0:a.toDate())||new Date,updatedAt:(null===(o=c.updatedAt)||void 0===o?void 0:o.toDate())||new Date,completedAt:(null===(l=c.completedAt)||void 0===l?void 0:l.toDate())||null})});const r=ab(n);return e({loading:!1}),r}catch(t){return e({error:t.message,loading:!1}),""}},setLoading:t=>{e({loading:t})},setError:t=>{e({error:t})}}));function ab(e){if(0===e.length)return"";const t=Object.keys(e[0]),n=[t.join(",")];for(const r of e){const e=t.map(e=>{const t=r[e];return null===t||void 0===t?"":"string"===typeof t&&t.includes(",")?`"${t}"`:t});n.push(e.join(","))}return n.join("\n")}const ob=Jy("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),lb=Jy("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),cb=e=>{let{reportedUser:t,reportedSwapId:n,onClose:r,onSubmit:i}=e;const{user:a}=Qy(),{createReport:o,loading:l}=ib(),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)("");return(0,iv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,iv.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,iv.jsx)("div",{className:"w-10 h-10 bg-error-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)(ob,{className:"w-5 h-5 text-error-600"})}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Report Issue"}),(0,iv.jsx)("p",{className:"text-sm text-gray-600",children:t?`Report ${t.name}`:"Report content"})]})]}),(0,iv.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,iv.jsx)(rv,{className:"w-6 h-6"})})]}),(0,iv.jsxs)("div",{className:"p-6 space-y-6",children:[t&&(0,iv.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Reporting User"}),(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[t.photoURL?(0,iv.jsx)("img",{src:t.photoURL,alt:t.name,className:"w-8 h-8 rounded-full object-cover"}):(0,iv.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-primary-600 font-semibold text-sm",children:t.name.charAt(0).toUpperCase()})}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,iv.jsx)("p",{className:"text-xs text-gray-600",children:t.email})]})]})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Reason for Report *"}),(0,iv.jsx)("div",{className:"space-y-2",children:["Inappropriate behavior","Spam or misleading content","Harassment or bullying","Fake profile or impersonation","Inappropriate skill descriptions","No-show or ghosting","Other"].map(e=>(0,iv.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,iv.jsx)("input",{type:"radio",name:"reason",value:e,checked:c===e,onChange:e=>u(e.target.value),className:"h-4 w-4 text-error-600 focus:ring-error-500 border-gray-300"}),(0,iv.jsx)("span",{className:"text-sm text-gray-900",children:e})]},e))})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,iv.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:"Please provide specific details about the issue...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-error-500 focus:border-transparent"}),(0,iv.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Provide as much detail as possible to help us understand the issue."})]}),(0,iv.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,iv.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,iv.jsx)(ob,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Important"}),(0,iv.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"False reports may result in account suspension. Please only report genuine violations of our community guidelines."})]})]})})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,iv.jsx)(ov,{variant:"outline",onClick:r,disabled:l,children:"Cancel"}),(0,iv.jsxs)(ov,{onClick:async()=>{if(c.trim())if(d.trim())if(a)try{await o(a.id,c,d,null===t||void 0===t?void 0:t.id,n),Ct.success("Report submitted successfully. We will review it shortly."),null===i||void 0===i||i(),r()}catch(e){Ct.error(e.message||"Failed to submit report")}else Ct.error("You must be logged in to submit a report");else Ct.error("Please provide a description");else Ct.error("Please select a reason")},disabled:!c.trim()||!d.trim()||l,loading:l,variant:"error",children:[(0,iv.jsx)(lb,{className:"w-4 h-4 mr-2"}),"Submit Report"]})]})]})})},ub=e=>{let{user:t,isAIMatch:n=!1}=e;const{user:r}=Qy(),{createSwapRequest:i,loading:a}=eb(),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),f=e=>{switch(e){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-orange-100 text-orange-800";case"expert":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,iv.jsxs)(iv.Fragment,{children:[(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200 "+(n?"ring-2 ring-warning-200":""),children:[(0,iv.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[t.photoURL?(0,iv.jsx)("img",{src:t.photoURL,alt:t.name,className:"w-12 h-12 rounded-full object-cover"}):(0,iv.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-primary-600 font-semibold text-lg",children:t.name.charAt(0).toUpperCase()})}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),t.location&&(0,iv.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,iv.jsx)(Gw,{className:"w-4 h-4 mr-1"}),t.location]})]})]}),(0,iv.jsxs)("div",{className:"flex items-center space-x-2",children:[n&&(0,iv.jsxs)("div",{className:"flex items-center text-warning-600",children:[(0,iv.jsx)(pv,{className:"w-4 h-4 mr-1"}),(0,iv.jsx)("span",{className:"text-xs font-medium",children:"AI Match"})]}),r&&r.id!==t.id&&(0,iv.jsxs)("div",{className:"relative",children:[(0,iv.jsx)("button",{onClick:()=>h(!d),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:(0,iv.jsx)(tb,{className:"w-4 h-4"})}),d&&(0,iv.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:(0,iv.jsxs)("button",{onClick:()=>{u(!0),h(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,iv.jsx)(nb,{className:"w-4 h-4 mr-2"}),"Report User"]})})]})]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsxs)("div",{className:"flex items-center mr-4",children:[(0,iv.jsx)(fv,{className:"w-4 h-4 text-warning-500 mr-1"}),(0,iv.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[t.trustScore,"/100"]})]}),(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(Kw,{className:"w-4 h-4 text-primary-500 mr-1"}),(0,iv.jsxs)("span",{className:"text-sm text-gray-600",children:[t.points," points"]})]})]}),(0,iv.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,iv.jsx)(rb,{className:"w-4 h-4 mr-1"}),(e=>{const t=[];return e.weekends&&t.push("Weekends"),e.evenings&&t.push("Evenings"),e.custom&&t.push(e.custom),t.length>0?t.join(", "):"Not specified"})(t.availability)]})]}),(0,iv.jsxs)("div",{className:"mb-4",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Skills Offered"}),(0,iv.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(t.skillsOffered||[]).slice(0,3).map((e,t)=>(0,iv.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${f(e.level)}`,children:e.name},t)),(t.skillsOffered||[]).length>3&&(0,iv.jsxs)("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",(t.skillsOffered||[]).length-3," more"]})]})]}),(0,iv.jsxs)("div",{className:"mb-6",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Skills Wanted"}),(0,iv.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(t.skillsWanted||[]).slice(0,3).map((e,t)=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:e.name},t)),(t.skillsWanted||[]).length>3&&(0,iv.jsxs)("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",(t.skillsWanted||[]).length-3," more"]})]})]}),(t.badges||[]).length>0&&(0,iv.jsxs)("div",{className:"mb-6",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Badges"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2",children:(t.badges||[]).slice(0,3).map(e=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-primary-100 text-primary-800 rounded-full",title:e.description,children:e.name},e.id))})]}),r&&r.id!==t.id&&(0,iv.jsxs)(ov,{onClick:()=>l(!0),className:"w-full",loading:a,children:[(0,iv.jsx)(Zy,{className:"w-4 h-4 mr-2"}),"Request Swap"]})]}),o&&(0,iv.jsx)(sb,{user:t,onClose:()=>l(!1),onSubmit:async(e,n)=>{try{await i(t.id,t,e,n),l(!1),Ct.success("Swap request sent successfully!")}catch(r){Ct.error(r.message||"Failed to send swap request")}},loading:a}),c&&(0,iv.jsx)(cb,{reportedUser:t,onClose:()=>u(!1)})]})},db=()=>{const{user:e}=Qy(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(""),[h,f]=(0,s.useState)(!1),[p,m]=(0,s.useState)([]),g=(0,s.useCallback)(async()=>{i(!0);try{let t=qg(ng(Gy,"users"),$g("isPublic","==",!0),Kg("trustScore","desc"),Qg(20));l&&(t=qg(t,$g("skillsOffered","array-contains",l))),u&&(t=qg(t,$g("location","==",u)));const r=await ly(t),s=[];r.forEach(t=>{const n=t.data();var r,i;t.id!==(null===e||void 0===e?void 0:e.id)&&s.push({id:t.id,...n,createdAt:(null===(r=n.createdAt)||void 0===r?void 0:r.toDate())||new Date,updatedAt:(null===(i=n.updatedAt)||void 0===i?void 0:i.toDate())||new Date})}),n(s)}catch(t){console.error("Error fetching users:",t),Ct.error("Failed to load users")}finally{i(!1)}},[l,u,e]),y=(0,s.useCallback)(async()=>{if(e)try{const t=qg(ng(Gy,"users"),$g("isPublic","==",!0),Qg(5)),n=await ly(t),r=[];n.forEach(t=>{const n=t.data();var s,i;t.id!==e.id&&r.push({id:t.id,...n,createdAt:(null===(s=n.createdAt)||void 0===s?void 0:s.toDate())||new Date,updatedAt:(null===(i=n.updatedAt)||void 0===i?void 0:i.toDate())||new Date})}),m(r.slice(0,3))}catch(t){console.error("Error fetching AI matches:",t)}},[e]);(0,s.useEffect)(()=>{g(),e&&y()},[e,g,y]);const v=()=>{g()},w=()=>{g()},b=t.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.skillsOffered.some(e=>e.name.toLowerCase().includes(a.toLowerCase()))||e.skillsWanted.some(e=>e.name.toLowerCase().includes(a.toLowerCase())));return(0,iv.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,iv.jsxs)("div",{className:"mb-8",children:[(0,iv.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Find Skills"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Discover people with the skills you need and offer your expertise in return"})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,iv.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,iv.jsx)("div",{className:"flex-1",children:(0,iv.jsx)(Bw,{placeholder:"Search by name, skill, or location...",value:a,onChange:e=>o(e.target.value),leftIcon:(0,iv.jsx)(Xy,{className:"w-5 h-5"}),onKeyPress:e=>"Enter"===e.key&&v()})}),(0,iv.jsxs)(ov,{variant:"outline",onClick:()=>f(!h),className:"lg:w-auto",children:[(0,iv.jsx)(Xw,{className:"w-4 h-4 mr-2"}),"Filters"]}),(0,iv.jsx)(ov,{onClick:v,className:"lg:w-auto",children:"Search"})]}),h&&(0,iv.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,iv.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Category"}),(0,iv.jsxs)("select",{value:l,onChange:e=>{c(e.target.value),w()},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,iv.jsx)("option",{value:"",children:"All Skills"}),["Technology","Design","Language","Music","Sports","Cooking","Art","Business","Education","Health"].map(e=>(0,iv.jsx)("option",{value:e,children:e},e))]})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,iv.jsxs)("select",{value:u,onChange:e=>{d(e.target.value),w()},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,iv.jsx)("option",{value:"",children:"All Locations"}),["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose"].map(e=>(0,iv.jsx)("option",{value:e,children:e},e))]})]})]})})]}),e&&p.length>0&&(0,iv.jsxs)("div",{className:"mb-8",children:[(0,iv.jsxs)("div",{className:"flex items-center mb-4",children:[(0,iv.jsx)(pv,{className:"w-5 h-5 text-warning-600 mr-2"}),(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"AI Recommended Matches"})]}),(0,iv.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:p.map(e=>(0,iv.jsx)(ub,{user:e,isAIMatch:!0},e.id))})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Loading...":`${b.length} users found`}),(0,iv.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(Zw,{className:"w-4 h-4 mr-1"}),t.length," total users"]}),(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(fv,{className:"w-4 h-4 mr-1"}),"High trust score"]})]})]}),r?(0,iv.jsx)("div",{className:"flex justify-center py-12",children:(0,iv.jsx)(av,{size:"lg"})}):0===b.length?(0,iv.jsxs)("div",{className:"text-center py-12",children:[(0,iv.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,iv.jsx)(Xy,{className:"w-8 h-8 text-gray-400"})}),(0,iv.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters to find more users."})]}):(0,iv.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>(0,iv.jsx)(ub,{user:e},e.id))})]})]})},hb=Jy("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),fb=Jy("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),pb=Jy("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),mb=Jy("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),gb=Ut((e,t)=>({feedbacks:[],loading:!1,error:null,submitFeedback:async(n,r,s,i,a)=>{try{var o,l;e({loading:!0,error:null});const c=vy(Gy),u=await ly(qg(ng(Gy,"users"),$g("id","==",n))),d=await ly(qg(ng(Gy,"users"),$g("id","==",r))),h=null===(o=u.docs[0])||void 0===o?void 0:o.data(),f=null===(l=d.docs[0])||void 0===l?void 0:l.data();if(!h||!f)throw new Error("User data not found");const p=rg(ng(Gy,"feedbacks")),m={fromUserId:n,toUserId:r,fromUser:h,toUser:f,swapRequestId:s,rating:i,comment:a,createdAt:yy()};c.set(p,m);const g=yb(f.trustScore,i),y=rg(Gy,"users",r);c.update(y,{trustScore:g,updatedAt:yy()});const v=function(e){switch(e){case 5:return 10;case 4:return 8;case 3:return 5;case 2:return 2;case 1:return 1;default:return 0}}(i),w=f.points||0;c.update(y,{points:w+v});const b=rg(ng(Gy,"notifications"));c.set(b,{userId:r,type:"feedback_received",title:"New Feedback Received",message:`You received ${i}/5 stars from ${h.name} for your skill swap!`,isRead:!1,relatedId:p.id,createdAt:yy()}),await c.commit(),await t().checkAndAwardBadges(r),e({loading:!1})}catch(c){e({error:c.message,loading:!1})}},fetchUserFeedbacks:async t=>{try{e({loading:!0,error:null});const n=qg(ng(Gy,"feedbacks"),$g("toUserId","==",t),Kg("createdAt","desc")),r=await ly(n),s=[];r.forEach(e=>{var t;const n=e.data();s.push({id:e.id,...n,createdAt:(null===(t=n.createdAt)||void 0===t?void 0:t.toDate())||new Date})}),e({feedbacks:s,loading:!1})}catch(n){e({error:n.message,loading:!1})}},fetchSwapFeedbacks:async t=>{try{e({loading:!0,error:null});const n=qg(ng(Gy,"feedbacks"),$g("swapRequestId","==",t),Kg("createdAt","desc")),r=await ly(n),s=[];r.forEach(e=>{var t;const n=e.data();s.push({id:e.id,...n,createdAt:(null===(t=n.createdAt)||void 0===t?void 0:t.toDate())||new Date})}),e({feedbacks:s,loading:!1})}catch(n){e({error:n.message,loading:!1})}},updateUserTrustScore:async(e,t)=>{try{var n;const r=null===(n=(await ly(qg(ng(Gy,"users"),$g("id","==",e)))).docs[0])||void 0===n?void 0:n.data();if(!r)return;const s=yb(r.trustScore,t),i=rg(Gy,"users",e);await uy(i,{trustScore:s,updatedAt:yy()})}catch(r){console.error("Error updating trust score:",r)}},awardPoints:async(e,t,n)=>{try{var r;const s=null===(r=(await ly(qg(ng(Gy,"users"),$g("id","==",e)))).docs[0])||void 0===r?void 0:r.data();if(!s)return;const i=vy(Gy),a=rg(Gy,"users",e),o=s.points||0;i.update(a,{points:o+t,updatedAt:yy()});const l=rg(ng(Gy,"notifications"));i.set(l,{userId:e,type:"system",title:"Points Awarded",message:`You earned ${t} points for: ${n}`,isRead:!1,createdAt:yy()}),await i.commit()}catch(s){console.error("Error awarding points:",s)}},checkAndAwardBadges:async e=>{try{var t,n,r;const s=null===(t=(await ly(qg(ng(Gy,"users"),$g("id","==",e)))).docs[0])||void 0===t?void 0:t.data();if(!s)return;const i=vy(Gy),a=[],o=(null===(n=s.badges)||void 0===n?void 0:n.map(e=>e.name))||[];if(s.points>=10&&!o.includes("First Swap")&&a.push({id:`badge_${Date.now()}_1`,name:"First Swap",description:"Completed your first skill swap",icon:"\ud83c\udfaf",earnedAt:new Date}),s.trustScore>=90&&!o.includes("Trusted User")&&a.push({id:`badge_${Date.now()}_2`,name:"Trusted User",description:"Maintained a high trust score",icon:"\u2b50",earnedAt:new Date}),((null===(r=s.skillsOffered)||void 0===r?void 0:r.length)||0)>=5&&!o.includes("Skill Master")&&a.push({id:`badge_${Date.now()}_3`,name:"Skill Master",description:"Offered 5 or more skills",icon:"\ud83c\udfc6",earnedAt:new Date}),s.points>=100&&!o.includes("Community Helper")&&a.push({id:`badge_${Date.now()}_4`,name:"Community Helper",description:"Earned 100+ points helping others",icon:"\ud83e\udd1d",earnedAt:new Date}),a.length>0){const t=rg(Gy,"users",e),n=[...s.badges||[],...a];i.update(t,{badges:n,updatedAt:yy()}),a.forEach(t=>{const n=rg(ng(Gy,"notifications"));i.set(n,{userId:e,type:"system",title:"New Badge Earned!",message:`Congratulations! You earned the "${t.name}" badge: ${t.description}`,isRead:!1,createdAt:yy()})}),await i.commit()}}catch(s){console.error("Error checking badges:",s)}},setLoading:t=>{e({loading:t})},setError:t=>{e({error:t})}}));function yb(e,t){const n=.7*e,r=20*t*.3;return Math.round(n+r)}const vb=e=>{var t,n;let{swapRequestId:r,fromUser:i,toUser:a,onClose:o,onSubmit:l}=e;const{submitFeedback:c,loading:u}=gb(),[d,h]=(0,s.useState)(0),[f,p]=(0,s.useState)(0),[m,g]=(0,s.useState)("");return(0,iv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,iv.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,iv.jsx)("div",{className:"w-10 h-10 bg-warning-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)(fv,{className:"w-5 h-5 text-warning-600"})}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Rate Your Experience"}),(0,iv.jsxs)("p",{className:"text-sm text-gray-600",children:["with ",a.name]})]})]}),(0,iv.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,iv.jsx)(rv,{className:"w-6 h-6"})})]}),(0,iv.jsxs)("div",{className:"p-6 space-y-6",children:[(0,iv.jsxs)("div",{className:"text-center",children:[(0,iv.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"How was your skill swap experience?"}),(0,iv.jsx)("div",{className:"flex justify-center space-x-2 mb-4",children:[1,2,3,4,5].map(e=>(0,iv.jsx)("button",{type:"button",onClick:()=>h(e),onMouseEnter:()=>p(e),onMouseLeave:()=>p(0),className:"text-2xl transition-colors duration-200 focus:outline-none",children:(0,iv.jsx)(fv,{className:"w-8 h-8 "+(e<=(f||d)?"text-yellow-400 fill-current":"text-gray-300")})},e))}),(0,iv.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(()=>{if(0===d)return"Select a rating";return{1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"}[d]||""})()})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Comments (Optional)"}),(0,iv.jsx)("textarea",{value:m,onChange:e=>g(e.target.value),placeholder:"Share your experience, what went well, or suggestions for improvement...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-warning-500 focus:border-transparent"})]}),(0,iv.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Swap Details"}),(0,iv.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,iv.jsxs)("p",{children:[(0,iv.jsx)("strong",{children:"Partner:"})," ",a.name]}),(0,iv.jsxs)("p",{children:[(0,iv.jsx)("strong",{children:"Skills Offered:"})," ",(null===(t=a.skillsOffered)||void 0===t?void 0:t.length)||0]}),(0,iv.jsxs)("p",{children:[(0,iv.jsx)("strong",{children:"Skills Wanted:"})," ",(null===(n=a.skillsWanted)||void 0===n?void 0:n.length)||0]})]})]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,iv.jsx)(ov,{variant:"outline",onClick:o,disabled:u,children:"Cancel"}),(0,iv.jsxs)(ov,{onClick:async()=>{if(0!==d)try{await c(i.id,a.id,r,d,m),Ct.success("Feedback submitted successfully!"),null===l||void 0===l||l(),o()}catch(e){Ct.error(e.message||"Failed to submit feedback")}else Ct.error("Please select a rating")},disabled:0===d||u,loading:u,className:"bg-warning-600 hover:bg-warning-700",children:[(0,iv.jsx)(lb,{className:"w-4 h-4 mr-2"}),"Submit Feedback"]})]})]})})},wb=e=>{let{swapRequestId:t,onClose:n,onSubmit:r,loading:i=!1}=e;const[a,o]=(0,s.useState)("");return(0,iv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,iv.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Complete Swap"}),(0,iv.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,iv.jsx)(rv,{className:"w-5 h-5"})})]}),(0,iv.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await r(a),n()},className:"p-6",children:[(0,iv.jsxs)("div",{className:"mb-4",children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Completion Notes (Optional)"}),(0,iv.jsx)("textarea",{value:a,onChange:e=>o(e.target.value),placeholder:"How did the swap go? Any feedback or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:4})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,iv.jsx)(ov,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancel"}),(0,iv.jsx)(ov,{type:"submit",loading:i,children:"Complete Swap"})]})]})]})})},bb=()=>{const{user:e}=Qy(),{swapRequests:t,loading:n,acceptSwapRequest:r,rejectSwapRequest:i,completeSwapRequest:a,cancelSwapRequest:o,deleteSwapRequest:l,fetchSwapRequests:c,refreshSwapRequests:u,testFirebaseConnection:d}=eb(),[h,f]=(0,s.useState)("all"),[p,m]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[b,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(console.log("\ud83d\udd04 Fetching swap requests for user:",e.id),c(e.id))},[e,c]),console.log("\ud83d\udcca Current swap requests:",t),console.log("\ud83d\udc64 Current user:",e),console.log("\ud83d\udd0d Current filter:",h);const _=t.filter(e=>{if("all"===h)return!0;const t=e.status===h;return console.log(`\ud83d\udd0d Request ${e.id}: status=${e.status}, filter=${h}, matches=${t}`),t});console.log("\ud83d\udccb Filtered requests:",_.map(e=>({id:e.id,status:e.status})));const k=async(t,n)=>{console.log("\ud83d\udd04 Handling action:",t,"for swap:",n);try{switch(t){case"accept":console.log("\u2705 Accepting swap request:",n),await r(n),Ct.success("Swap request accepted!"),e&&(console.log("\ud83d\udd04 Refreshing swap requests after accept..."),await u(e.id));break;case"reject":console.log("\u274c Rejecting swap request:",n),await i(n),Ct.success("Swap request rejected"),e&&(console.log("\ud83d\udd04 Refreshing swap requests after reject..."),await u(e.id));break;case"complete":console.log("\u2705 Completing swap request:",n),await a(n),Ct.success("Swap marked as completed!");break;case"cancel":console.log("\u274c Cancelling swap request:",n),await o(n),Ct.success("Swap request cancelled");break;case"delete":console.log("\u274c Deleting swap request:",n),await l(n),Ct.success("Swap request deleted"),e&&(console.log("\ud83d\udd04 Refreshing swap requests after delete..."),await u(e.id));break;default:console.log("\u2753 Unknown action:",t)}}catch(s){console.error("\u274c Error handling action:",s),Ct.error(s.message||"Failed to perform action")}},S=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=e=>{switch(e){case"pending":default:return(0,iv.jsx)(rb,{className:"w-4 h-4"});case"accepted":return(0,iv.jsx)(hb,{className:"w-4 h-4"});case"completed":return(0,iv.jsx)(fv,{className:"w-4 h-4"});case"rejected":return(0,iv.jsx)(fb,{className:"w-4 h-4"})}},E=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e);return n?(0,iv.jsx)(av,{}):(0,iv.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Swaps"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Manage your skill swap requests"})]}),(0,iv.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,iv.jsxs)(ov,{variant:"outline",onClick:()=>m(!p),children:[(0,iv.jsx)(Xw,{className:"w-4 h-4 mr-2"}),"Filters"]}),(0,iv.jsx)(ov,{variant:"outline",onClick:async()=>{e&&(console.log("\ud83d\udd04 Manual refresh triggered"),await u(e.id))},children:"\ud83d\udd04 Refresh"})]})]}),(0,iv.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-yellow-900 mb-2",children:"\ud83d\udc1b Debug Panel"}),(0,iv.jsxs)("div",{className:"text-xs text-yellow-800 space-y-1",children:[(0,iv.jsxs)("p",{children:["Total requests: ",t.length]}),(0,iv.jsxs)("p",{children:["Current filter: ",h]}),(0,iv.jsxs)("p",{children:["Filtered count: ",_.length]}),(0,iv.jsxs)("p",{children:["Loading: ",n?"Yes":"No"]}),(0,iv.jsxs)("p",{children:["User ID: ",(null===e||void 0===e?void 0:e.id)||"Not logged in"]}),(0,iv.jsxs)("div",{className:"mt-2",children:[(0,iv.jsx)("p",{className:"font-medium",children:"Request Statuses:"}),t.map(t=>(0,iv.jsxs)("p",{className:"ml-2",children:["\u2022 ",t.id.slice(0,8),"... \u2192 ",(0,iv.jsx)("span",{className:"font-mono",children:t.status}),t.fromUserId===(null===e||void 0===e?void 0:e.id)?" (sent)":" (received)"]},t.id))]})]})]}),p&&(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,iv.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:["all","pending","accepted","completed","rejected"].map(e=>(0,iv.jsx)("button",{onClick:()=>f(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors "+(h===e?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,iv.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"\ud83d\udd0d Debug Info"}),(0,iv.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,iv.jsxs)("p",{children:["Total requests: ",t.length]}),(0,iv.jsxs)("p",{children:["Current filter: ",h]}),(0,iv.jsxs)("p",{children:["Filtered count: ",_.length]}),(0,iv.jsxs)("div",{className:"mt-2",children:[(0,iv.jsx)("p",{className:"font-medium",children:"All requests status:"}),t.map(t=>(0,iv.jsxs)("p",{className:"ml-2",children:["\u2022 ",t.id.slice(0,8),"... \u2192 ",t.status,t.fromUserId===(null===e||void 0===e?void 0:e.id)?" (sent)":" (received)"]},t.id))]})]})]})]}),0===_.length&&(0,iv.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\ud83e\uddea Testing Swap Requests"}),(0,iv.jsx)("p",{className:"text-blue-700 mb-4",children:"You don't have any swap requests yet. To test the functionality:"}),(0,iv.jsxs)("div",{className:"space-y-2 text-sm text-blue-600",children:[(0,iv.jsxs)("p",{children:["1. ",(0,iv.jsx)("strong",{children:"Create another account"})," or use the demo account"]}),(0,iv.jsxs)("p",{children:["2. ",(0,iv.jsx)("strong",{children:"Search for users"})," and send swap requests"]}),(0,iv.jsxs)("p",{children:["3. ",(0,iv.jsx)("strong",{children:"Switch between accounts"})," to accept/reject requests"]}),(0,iv.jsxs)("p",{children:["4. ",(0,iv.jsx)("strong",{children:"Check the browser console"})," (F12) for debugging info"]})]}),(0,iv.jsxs)("div",{className:"mt-4",children:[(0,iv.jsx)(ov,{onClick:()=>window.open("/search","_blank"),variant:"outline",size:"sm",children:"\ud83d\udd0d Go to Search Page"}),(0,iv.jsx)(ov,{onClick:async()=>{try{const{createSwapRequest:t}=eb.getState();e&&(await t(e.id,e,{offered:[{id:"test-1",name:"JavaScript",category:"Programming",level:"intermediate"}],wanted:[{id:"test-2",name:"Python",category:"Programming",level:"beginner"}]},"This is a test swap request for testing purposes"),Ct.success("Test swap request created!"))}catch(t){Ct.error("Failed to create test request: "+t.message)}},variant:"outline",size:"sm",className:"ml-2",children:"\ud83e\uddea Create Test Request"}),(0,iv.jsx)(ov,{onClick:async()=>{try{const e=t.find(e=>"pending"===e.status);if(e){console.log("\ud83e\uddea Testing manual status update for:",e.id);const{acceptSwapRequest:t}=eb.getState();await t(e.id),Ct.success("Test status update completed!")}else Ct.error("No pending requests found to test")}catch(e){Ct.error("Test failed: "+e.message)}},variant:"outline",size:"sm",className:"ml-2",children:"\ud83e\uddea Test Accept"}),(0,iv.jsx)(ov,{onClick:()=>{console.log("\ud83e\uddea Testing filter logic...");const e=[{id:"1",status:"pending"},{id:"2",status:"accepted"},{id:"3",status:"rejected"}],t=e.filter(e=>"pending"===e.status),n=e.filter(e=>"accepted"===e.status);console.log("\ud83e\uddea Filter test results:",{pending:t.length,accepted:n.length,all:e.length}),Ct.success("Filter test completed - check console")},variant:"outline",size:"sm",className:"ml-2",children:"\ud83e\uddea Test Filter"}),(0,iv.jsx)(ov,{onClick:async()=>{try{console.log("\ud83e\uddea Testing Firebase connection..."),await d(),Ct.success("Firebase connection test successful!")}catch(e){console.error("\u274c Firebase test failed:",e),Ct.error("Firebase test failed: "+e.message)}},variant:"outline",size:"sm",className:"ml-2",children:"\ud83d\udd25 Test Firebase"})]})]}),(0,iv.jsx)("div",{className:"space-y-6",children:0===_.length?(0,iv.jsxs)("div",{className:"text-center py-12",children:[(0,iv.jsx)(Zy,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,iv.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No swap requests found"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"all"===h?"You don't have any swap requests yet. Start by searching for skills to swap!":`No ${h} swap requests found.`})]}):_.map(e=>(0,iv.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,iv.jsx)("div",{className:"flex items-start justify-between",children:(0,iv.jsxs)("div",{className:"flex-1",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,iv.jsx)("div",{className:`p-2 rounded-full ${S(e.status)}`,children:N(e.status)}),(0,iv.jsxs)("div",{children:[(0,iv.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Swap with ",e.toUser.name]}),(0,iv.jsx)("p",{className:"text-sm text-gray-600",children:E(e.createdAt)})]})]}),(0,iv.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,iv.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-4",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"You'll teach:"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skillsExchanged.offered.map((e,t)=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-primary-100 text-primary-800 rounded-full",children:e.name},t))})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"You'll learn:"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skillsExchanged.wanted.map((e,t)=>(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-secondary-100 text-secondary-800 rounded-full",children:e.name},t))})]})]}),e.message&&(0,iv.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,iv.jsx)("p",{className:"text-sm text-gray-700",children:e.message})}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(ev,{className:"w-4 h-4 mr-1"}),e.toUser.name]}),(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)(pb,{className:"w-4 h-4 mr-1"}),E(e.updatedAt)]})]}),(0,iv.jsxs)("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&(0,iv.jsxs)(iv.Fragment,{children:[(0,iv.jsx)(ov,{size:"sm",variant:"success",onClick:()=>k("accept",e.id),loading:n,children:"Accept"}),(0,iv.jsx)(ov,{size:"sm",variant:"error",onClick:()=>k("reject",e.id),loading:n,children:"Reject"})]}),"accepted"===e.status&&(0,iv.jsx)(ov,{size:"sm",variant:"success",onClick:()=>{x(e),w(!0)},loading:n,children:"Mark Complete"}),["pending","accepted"].includes(e.status)&&(0,iv.jsx)(ov,{size:"sm",variant:"outline",onClick:()=>k("cancel",e.id),loading:n,children:"Cancel"}),"completed"===e.status&&(0,iv.jsxs)(ov,{size:"sm",variant:"success",onClick:()=>{x(e),y(!0)},loading:n,children:[(0,iv.jsx)(mb,{className:"w-4 h-4 mr-1"}),"Rate"]}),["rejected","cancelled","completed"].includes(e.status)&&(0,iv.jsx)(ov,{size:"sm",variant:"error",onClick:()=>k("delete",e.id),loading:n,children:"Delete"})]})]})]})})},e.id))}),(0,iv.jsxs)("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[(0,iv.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:t.length}),(0,iv.jsx)("div",{className:"text-sm text-gray-600",children:"Total Swaps"})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[(0,iv.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(e=>"pending"===e.status).length}),(0,iv.jsx)("div",{className:"text-sm text-gray-600",children:"Pending"})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[(0,iv.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(e=>"accepted"===e.status).length}),(0,iv.jsx)("div",{className:"text-sm text-gray-600",children:"Active"})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[(0,iv.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>"completed"===e.status).length}),(0,iv.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]})]}),g&&b&&(0,iv.jsx)(vb,{swapRequestId:b.id,fromUser:b.fromUser,toUser:b.toUser,onClose:()=>{y(!1),x(null)},onSubmit:()=>{e&&c(e.id)}}),v&&b&&(0,iv.jsx)(wb,{swapRequestId:b.id,onClose:()=>{w(!1),x(null)},onSubmit:async t=>{try{await a(b.id,t),Ct.success("Swap marked as completed!"),e&&c(e.id)}catch(n){Ct.error(n.message||"Failed to complete swap")}},loading:n})]})},xb=Jy("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),_b=Jy("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),kb=Jy("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Sb=Jy("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Nb=Jy("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Eb=Jy("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Ib=()=>{const{user:e}=Qy(),{users:t,reports:n,loading:r,fetchAllUsers:i,fetchReports:a,banUser:o,unbanUser:l,updateUserRole:c,resolveReport:u,rejectSkillDescription:d,approveSkillDescription:h,sendPlatformMessage:f,exportUserData:p,exportSwapData:m}=ib(),[g,y]=(0,s.useState)({totalUsers:0,activeUsers:0,totalSwaps:0,completedSwaps:0,pendingSwaps:0,reports:0}),[v,w]=(0,s.useState)(!1),[b,x]=(0,s.useState)(!1),[_,k]=(0,s.useState)(!1),[S,N]=(0,s.useState)(!1),[E,I]=(0,s.useState)({title:"",message:""}),[T]=(0,s.useState)([{type:"user_joined",description:"New user registered: John Doe",timestamp:new Date},{type:"swap_completed",description:"Skill swap completed: JavaScript \u2194 Python",timestamp:new Date(Date.now()-36e5)},{type:"report_submitted",description:"Report submitted for user: Jane Smith",timestamp:new Date(Date.now()-72e5)},{type:"user_banned",description:"User banned for inappropriate behavior",timestamp:new Date(Date.now()-108e5)}]),[C]=(0,s.useState)([{skill:"JavaScript",count:45},{skill:"Python",count:38},{skill:"Cooking",count:32},{skill:"Guitar",count:28},{skill:"Spanish",count:25}]);(0,s.useEffect)(()=>{e&&(i(),a())},[e,i,a]),(0,s.useEffect)(()=>{y({totalUsers:t.length,activeUsers:t.filter(e=>!e.isBanned).length,totalSwaps:0,completedSwaps:0,pendingSwaps:0,reports:n.filter(e=>"pending"===e.status).length})},[t,n]);const j=async(t,n)=>{try{await u(t,n,(null===e||void 0===e?void 0:e.id)||""),Ct.success(`Report ${n} successfully`)}catch(r){Ct.error(r.message||"Failed to resolve report")}},A=async e=>{try{let t="";t="users"===e?await p():await m();const n=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`${e}_export_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r),Ct.success(`${e} data exported successfully`)}catch(t){Ct.error(t.message||"Failed to export data")}};return(0,iv.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,iv.jsx)("p",{className:"text-gray-600",children:"Monitor and manage the Skill Swap platform"})]}),(0,iv.jsxs)("div",{className:"flex space-x-2",children:[(0,iv.jsxs)(ov,{onClick:()=>A("users"),children:[(0,iv.jsx)(xb,{className:"w-4 h-4 mr-2"}),"Export Users"]}),(0,iv.jsxs)(ov,{onClick:()=>A("swaps"),children:[(0,iv.jsx)(xb,{className:"w-4 h-4 mr-2"}),"Export Swaps"]})]})]}),(0,iv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,iv.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,iv.jsx)(Zw,{className:"w-6 h-6 text-primary-600"})}),(0,iv.jsxs)("div",{className:"ml-4",children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,iv.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.totalUsers})]})]})}),(0,iv.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("div",{className:"w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center",children:(0,iv.jsx)(Zy,{className:"w-6 h-6 text-success-600"})}),(0,iv.jsxs)("div",{className:"ml-4",children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Swaps"}),(0,iv.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.totalSwaps})]})]})}),(0,iv.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("div",{className:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center",children:(0,iv.jsx)(_b,{className:"w-6 h-6 text-warning-600"})}),(0,iv.jsxs)("div",{className:"ml-4",children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),(0,iv.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.activeUsers})]})]})}),(0,iv.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("div",{className:"w-12 h-12 bg-error-100 rounded-lg flex items-center justify-center",children:(0,iv.jsx)(ob,{className:"w-6 h-6 text-error-600"})}),(0,iv.jsxs)("div",{className:"ml-4",children:[(0,iv.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Reports"}),(0,iv.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.reports})]})]})})]}),(0,iv.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),(0,iv.jsx)(ov,{variant:"outline",size:"sm",children:"View All"})]}),(0,iv.jsx)("div",{className:"space-y-4",children:T.map((e,t)=>(0,iv.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,iv.jsxs)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:["user_joined"===e.type&&(0,iv.jsx)(Zw,{className:"w-4 h-4 text-primary-600"}),"swap_completed"===e.type&&(0,iv.jsx)(hb,{className:"w-4 h-4 text-success-600"}),"report_submitted"===e.type&&(0,iv.jsx)(ob,{className:"w-4 h-4 text-warning-600"}),"user_banned"===e.type&&(0,iv.jsx)(fb,{className:"w-4 h-4 text-error-600"})]}),(0,iv.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,iv.jsx)("p",{className:"text-sm text-gray-900",children:e.description}),(0,iv.jsx)("p",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleString()})]})]},t))})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Top Skills"}),(0,iv.jsx)(kb,{className:"w-5 h-5 text-gray-400"})]}),(0,iv.jsx)("div",{className:"space-y-4",children:C.map((e,t)=>(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,iv.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-sm font-semibold text-primary-600",children:t+1})}),(0,iv.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.skill})]}),(0,iv.jsxs)("span",{className:"text-sm text-gray-600",children:[e.count," users"]})]},t))})]})]}),(0,iv.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),(0,iv.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,iv.jsxs)(ov,{variant:"outline",className:"h-16",onClick:()=>w(!v),children:[(0,iv.jsx)(Sb,{className:"w-5 h-5 mr-2"}),"Moderate Users"]}),(0,iv.jsxs)(ov,{variant:"outline",className:"h-16",onClick:()=>x(!b),children:[(0,iv.jsx)(ob,{className:"w-5 h-5 mr-2"}),"Review Reports"]}),(0,iv.jsxs)(ov,{variant:"outline",className:"h-16",onClick:()=>N(!S),children:[(0,iv.jsx)(hb,{className:"w-5 h-5 mr-2"}),"Moderate Skills"]}),(0,iv.jsxs)(ov,{variant:"outline",className:"h-16",onClick:()=>k(!_),children:[(0,iv.jsx)(lb,{className:"w-5 h-5 mr-2"}),"Send Message"]})]})]}),(0,iv.jsxs)("div",{className:"mt-8 grid md:grid-cols-3 gap-6",children:[(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Swap Status"}),(0,iv.jsxs)("div",{className:"space-y-3",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Completed"}),(0,iv.jsx)("span",{className:"text-sm font-semibold text-success-600",children:g.completedSwaps})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Pending"}),(0,iv.jsx)("span",{className:"text-sm font-semibold text-warning-600",children:g.pendingSwaps})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Active"}),(0,iv.jsx)("span",{className:"text-sm font-semibold text-primary-600",children:g.totalSwaps-g.completedSwaps-g.pendingSwaps})]})]})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Activity"}),(0,iv.jsxs)("div",{className:"space-y-3",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Active Users"}),(0,iv.jsx)("span",{className:"text-sm font-semibold text-primary-600",children:g.activeUsers})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Inactive Users"}),(0,iv.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:g.totalUsers-g.activeUsers})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Activity Rate"}),(0,iv.jsxs)("span",{className:"text-sm font-semibold text-success-600",children:[Math.round(g.activeUsers/g.totalUsers*100),"%"]})]})]})]}),(0,iv.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Platform Health"}),(0,iv.jsxs)("div",{className:"space-y-3",children:[(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Success Rate"}),(0,iv.jsxs)("span",{className:"text-sm font-semibold text-success-600",children:[Math.round(g.completedSwaps/g.totalSwaps*100),"%"]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Pending Rate"}),(0,iv.jsxs)("span",{className:"text-sm font-semibold text-warning-600",children:[Math.round(g.pendingSwaps/g.totalSwaps*100),"%"]})]}),(0,iv.jsxs)("div",{className:"flex items-center justify-between",children:[(0,iv.jsx)("span",{className:"text-sm text-gray-600",children:"Report Rate"}),(0,iv.jsxs)("span",{className:"text-sm font-semibold text-error-600",children:[Math.round(g.reports/g.totalUsers*1e3)," per 1000 users"]})]})]})]})]}),v&&(0,iv.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"User Management"}),(0,iv.jsx)("div",{className:"overflow-x-auto",children:(0,iv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,iv.jsx)("thead",{className:"bg-gray-50",children:(0,iv.jsxs)("tr",{children:[(0,iv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,iv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,iv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,iv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trust Score"}),(0,iv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,iv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.slice(0,10).map(e=>(0,iv.jsxs)("tr",{children:[(0,iv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,iv.jsxs)("div",{className:"flex items-center",children:[(0,iv.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:e.photoURL?(0,iv.jsx)("img",{className:"h-10 w-10 rounded-full",src:e.photoURL,alt:e.name}):(0,iv.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,iv.jsx)("span",{className:"text-primary-600 font-semibold",children:e.name.charAt(0)})})}),(0,iv.jsxs)("div",{className:"ml-4",children:[(0,iv.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,iv.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,iv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,iv.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("admin"===e.role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.role})}),(0,iv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,iv.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.isBanned?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.isBanned?"Banned":"Active"})}),(0,iv.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.trustScore,"/100"]}),(0,iv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:e.isBanned?(0,iv.jsxs)(ov,{size:"sm",variant:"success",onClick:()=>(async e=>{try{await l(e),Ct.success("User unbanned successfully")}catch(t){Ct.error(t.message||"Failed to unban user")}})(e.id),loading:r,children:[(0,iv.jsx)(Nb,{className:"w-3 h-3 mr-1"}),"Unban"]}):(0,iv.jsxs)(ov,{size:"sm",variant:"error",onClick:()=>(async e=>{try{await o(e,"Violation of community guidelines"),Ct.success("User banned successfully")}catch(t){Ct.error(t.message||"Failed to ban user")}})(e.id),loading:r,children:[(0,iv.jsx)(Eb,{className:"w-3 h-3 mr-1"}),"Ban"]})})]},e.id))})]})})]}),b&&(0,iv.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Report Management"}),(0,iv.jsxs)("div",{className:"space-y-4",children:[n.filter(e=>"pending"===e.status).slice(0,10).map(e=>(0,iv.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,iv.jsxs)("div",{className:"flex items-start justify-between",children:[(0,iv.jsxs)("div",{className:"flex-1",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,iv.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Report #",e.id.slice(-6)]}),(0,iv.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Pending"})]}),(0,iv.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,iv.jsx)("strong",{children:"Reason:"})," ",e.reason]}),(0,iv.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,iv.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,iv.jsxs)("p",{className:"text-xs text-gray-500",children:["Reported on ",e.createdAt.toLocaleDateString()]})]}),(0,iv.jsxs)("div",{className:"flex space-x-2",children:[(0,iv.jsx)(ov,{size:"sm",variant:"success",onClick:()=>j(e.id,"resolved"),loading:r,children:"Resolve"}),(0,iv.jsx)(ov,{size:"sm",variant:"outline",onClick:()=>j(e.id,"dismissed"),loading:r,children:"Dismiss"})]})]})},e.id)),0===n.filter(e=>"pending"===e.status).length&&(0,iv.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No pending reports"})]})]}),_&&(0,iv.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Send Platform Message"}),(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Title"}),(0,iv.jsx)("input",{type:"text",value:E.title,onChange:e=>I({...E,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter message title..."})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Content"}),(0,iv.jsx)("textarea",{value:E.message,onChange:e=>I({...E,message:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter message content..."})]}),(0,iv.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,iv.jsx)(ov,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,iv.jsxs)(ov,{onClick:async()=>{if(E.title.trim()&&E.message.trim())try{await f(E.title,E.message),Ct.success("Platform message sent successfully"),I({title:"",message:""}),k(!1)}catch(e){Ct.error(e.message||"Failed to send platform message")}else Ct.error("Please fill in both title and message")},loading:r,children:[(0,iv.jsx)(lb,{className:"w-4 h-4 mr-2"}),"Send Message"]})]})]})]}),S&&(0,iv.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,iv.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Skill Description Moderation"}),(0,iv.jsxs)("div",{className:"space-y-4",children:[t.slice(0,10).map(e=>{var t,n;return(0,iv.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,iv.jsx)("div",{className:"flex items-start justify-between",children:(0,iv.jsxs)("div",{className:"flex-1",children:[(0,iv.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,iv.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,iv.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.email,")"]})]}),(0,iv.jsxs)("div",{className:"space-y-2",children:[(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Skills Offered:"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:null===(t=e.skillsOffered)||void 0===t?void 0:t.map((t,n)=>(0,iv.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 px-2 py-1 rounded",children:[(0,iv.jsx)("span",{className:"text-xs text-gray-700",children:t.name}),(0,iv.jsxs)("div",{className:"flex space-x-1",children:[(0,iv.jsx)(ov,{size:"sm",variant:"success",onClick:()=>h(e.id,t.id),loading:r,children:"\u2713"}),(0,iv.jsx)(ov,{size:"sm",variant:"error",onClick:()=>{const n=prompt("Enter rejection reason:");n&&d(e.id,t.id,n)},loading:r,children:"\u2717"})]})]},n))})]}),(0,iv.jsxs)("div",{children:[(0,iv.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Skills Wanted:"}),(0,iv.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:null===(n=e.skillsWanted)||void 0===n?void 0:n.map((t,n)=>(0,iv.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 px-2 py-1 rounded",children:[(0,iv.jsx)("span",{className:"text-xs text-gray-700",children:t.name}),(0,iv.jsxs)("div",{className:"flex space-x-1",children:[(0,iv.jsx)(ov,{size:"sm",variant:"success",onClick:()=>h(e.id,t.id),loading:r,children:"\u2713"}),(0,iv.jsx)(ov,{size:"sm",variant:"error",onClick:()=>{const n=prompt("Enter rejection reason:");n&&d(e.id,t.id,n)},loading:r,children:"\u2717"})]})]},n))})]})]})]})})},e.id)}),0===t.length&&(0,iv.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No users found"})]})]})]})},Tb=Jy("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Cb=Jy("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),jb=()=>(0,iv.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,iv.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,iv.jsxs)("div",{className:"mb-8",children:[(0,iv.jsx)("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,iv.jsx)(Tb,{className:"w-12 h-12 text-primary-600"})}),(0,iv.jsx)("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"}),(0,iv.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Page Not Found"}),(0,iv.jsx)("p",{className:"text-gray-600 mb-8",children:"The page you're looking for doesn't exist or has been moved."})]}),(0,iv.jsxs)("div",{className:"space-y-4",children:[(0,iv.jsx)(Ce,{to:"/",children:(0,iv.jsxs)(ov,{className:"w-full",children:[(0,iv.jsx)(Cb,{className:"w-4 h-4 mr-2"}),"Go Back Home"]})}),(0,iv.jsx)(Ce,{to:"/search",children:(0,iv.jsx)(ov,{variant:"outline",className:"w-full",children:"Search for Skills"})})]})]})}),Ab=e=>{let{children:t,adminOnly:n=!1}=e;const{isAuthenticated:r,user:s,loading:i}=Qy();return i?(0,iv.jsx)(av,{}):r?n&&"admin"!==(null===s||void 0===s?void 0:s.role)?(0,iv.jsx)(me,{to:"/",replace:!0}):(0,iv.jsx)(iv.Fragment,{children:t}):(0,iv.jsx)(me,{to:"/login",replace:!0})};const Rb=function(){const{initializeAuth:e}=Qy();return(0,s.useEffect)(()=>{e()},[e]),(0,iv.jsx)(Ee,{children:(0,iv.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,iv.jsx)(hv,{}),(0,iv.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,iv.jsxs)(ve,{children:[(0,iv.jsx)(ge,{path:"/",element:(0,iv.jsx)(gv,{})}),(0,iv.jsx)(ge,{path:"/login",element:(0,iv.jsx)($w,{})}),(0,iv.jsx)(ge,{path:"/register",element:(0,iv.jsx)(Hw,{})}),(0,iv.jsx)(ge,{path:"/profile",element:(0,iv.jsx)(Ab,{children:(0,iv.jsx)(Jw,{})})}),(0,iv.jsx)(ge,{path:"/search",element:(0,iv.jsx)(db,{})}),(0,iv.jsx)(ge,{path:"/swaps",element:(0,iv.jsx)(Ab,{children:(0,iv.jsx)(bb,{})})}),(0,iv.jsx)(ge,{path:"/admin",element:(0,iv.jsx)(Ab,{adminOnly:!0,children:(0,iv.jsx)(Ib,{})})}),(0,iv.jsx)(ge,{path:"*",element:(0,iv.jsx)(jb,{})})]})}),(0,iv.jsx)(Tt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})};a.createRoot(document.getElementById("root")).render((0,iv.jsx)(s.StrictMode,{children:(0,iv.jsx)(Rb,{})}))})();
//# sourceMappingURL=main.4ce3aae6.js.map